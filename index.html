<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Web of Things (WoT) Thing Description</title>
    <script src="https://www.w3.org/Tools/respec/respec-w3c-common" class="remove"></script>
    <script class='remove'>
          var respecConfig = {
              specStatus:     "ED"
            , processVersion: 2017
            , shortName:      "wot-thing-description"
            , copyrightStart: 2017
            , noLegacyStyle:  true
            , inlineCSS:      true
            , noIDLIn:        true
            , format:         "markdown"
            , wg:             "Web of Things Working Group"
            , wgURI:          "https://www.w3.org/WoT/WG/"
            , wgPublicList:   "public-wot-wg"
            , edDraftURI:     "https://w3c.github.io/wot-thing-description/"
            , githubAPI:      "https://api.github.com/repos/w3c/wot-thing-description"
            , issueBase:      "https://www.github.com/w3c/wot-thing-description/issues"
            , editors: [
                {
                  name:       "Sebastian Kaebisch"
                , w3cid:      "43064"
                , company:    "Siemens AG"
                , companyURL: "https://www.siemens.com/"
                }
              , {
                  name:       "Takuki Kamiya"
                , w3cid:      "29376"
                , company:    "Fujitsu Laboratories of America, Inc."
                , companyURL: "https://www.fujitsu.com/"
                }
                , {
                  name:       "Michael McCool"
                , w3cid:      ""
                , company:    "Intel"
                , companyURL: "	www.intel.com/"
                }
                , {
                  name:       "Victor Charpenay"
                , w3cid:      ""
                , company:    "Siemens AG"
                , companyURL: "https://www.siemens.com/"
                }
              ]
            , localBiblio: {
                "JSON-SCHEMA-VALIDATION": {
                  title:    "JSON Schema Validation: A Vocabulary for Structural Validation of JSON"
                , href:     "https://tools.ietf.org/html/draft-handrews-json-schema-validation-00"
                , authors: [
                    "Austin Wright"
                  , "Henry Andrews"
                  , "Geraint Luff"
                  ]
                , status:   "Internet-Draft"
                , publisher:  "IETF"
                }
              , "JSON-SCHEMA-CORE": {
                  title:    "JSON Schema: A Media Type for Describing JSON Documents"
                , href:     "https://tools.ietf.org/html/draft-handrews-json-schema-00"
                , authors:  [
                    "Austin Wright"
                  , "Henry Andrews"
                  ]
                , status:    "Internet-Draft"
                , publisher: "IETF"
                }
              , "OPENAPI": {
                  title:    "OpenAPI Specification: Version 3.0.1"
                , href:     "https://swagger.io/specification/"
                , authors:  [
		                "Darrel Miller"
                  , "Jason Harmon"
                  , "Jeremy Whitlock"
                  , "Kris Hahn"
                  , "Marsh Gardiner"
                  , "Mike Ralphson"
                  , "Rob Dolin"
                  , "Ron Ratovsky"
                  , "Tony Tam"
                  ]
                , publisher: "OpenAPI Initiative, Linux Foundation"
                , date: "7 December 2017"
                }
              , "SemVer": {
                  title:    "Semantic Versioning 2.0.0"
                , href:     "https://semver.org/"
                , authors:  ["Tom Preston-Werner"]
                , date: "26 December 2017"
                }
              , "WOT-ARCHITECTURE" : {
                  title: "Web of Things (WoT) Architecture"
                , href: "https://w3c.github.io/wot-architecture/"
                , authors:  [
                    "Matthias Kovatsch"
                  , "Ryuichi Matsukura"
                  , "Michael Lagally"
                  , "Toru Kawaguchi"
                  , "Kunihiko Toumura"
                  , "Kazuo Kajimoto"
                  ]
                , publisher: "W3C"
                , date: "May 2019"
                }
              , "WOT-SECURITY-CONSIDERATIONS" : {
                title: "Web of Things (WoT) Security and Privacy Considerations"
                , href: "https://w3c.github.io/wot-security/"
                , authors:  [
                  , "Michael McCool"
                  , "Elena Reshetova"
                  ]
                , publisher: "W3C"
                , date: "March 2019"
                }
	            , "MQTT" : {
                  title: "MQTT Version 5.0"
                , href: "http://docs.oasis-open.org/mqtt/mqtt/v5.0/cos01/mqtt-v5.0-cos01.html"
                , authors:  [
                    "Andrew Banks",
                    "Ed Briggs",
                    "Ken Borgendale",
                    "Rahul Gupta"
                  ]
                , publisher: "OASIS"
                , date: "31 October 2018"
                , status: "Candidate OASIS Standard 01"
                }
	            , "draft-ietf-ace-oauth-authz" : {
                  title: "Authentication and Authorization for Constrained Environments (ACE) using the OAuth 2.0 Framework (ACE-OAuth)"
                , href: "https://tools.ietf.org/html/draft-ietf-ace-oauth-authz-24"
                , authors:  [
                    "L. Seitz",
                    "G. Selander",
                    "E. Wahlstroem",
                    "S. Erdtman",
                    "H. Tschofenig"
                  ]
                , publisher: "IETF"
                , date: "27 March 2019"
                , status: "Internet-Draft"
                },
                "Rijgersberg-et-al-2013": {
                    "href": "http://www.semantic-web-journal.net/content/ontology-units-measure-and-related-concepts",
                    "authors": [
                        "Hajo Rijgersberg",
                        "Mark van Assem",
                        "Jan Top"
                    ],
                    "title": "Ontology of Units of Measure and Related Concepts",
                    "publisher": "Semantic Web journal, IOS Press",
                    "date": "2013"
                },
                "LDML": {
                    "title": "Unicode Technical Standard #35: Unicode Locale Data Markup Language (LDML)",
                    "href": "https://unicode.org/reports/tr35/",
                    "authors": [
                        "Mark Davis",
                        "CLDR Contributors"
                    ]
                }
              }
            , otherLinks: [
                {
                  key: "Contributors"
                , data: [
                    {
                      value: "In the GitHub repository"
                    , href: "https://github.com/w3c/wot-thing-description/graphs/contributors"
                    }
                  ]
                }
              , {
                  key: "Repository",
                  data: [
                    {
                      value: "We are on GitHub"
                    , href: "https://github.com/w3c/wot-thing-description/"
                    }
                  , {
                      value: "File a bug"
                    , href: "https://github.com/w3c/wot-thing-description/issues"
                    }
                  ]
                }
              ]
            };
    </script>
<style>
a[href].internalDFN {
    color: inherit;
    border-bottom: 1px solid #99c;
    text-decoration: none;
}

.example {
		border-color: #EA1252;
		background: #FEF11E;
		counter-increment: example;
		overflow: auto;
		clear: both;
}

.with-default .with-default-control {
    margin-top: 1em;
    margin-bottom: 1em;
}

.with-default pre.selected {
    margin-top: 0;
    margin-bottom: 1em;
    height: auto;
}

.with-default pre {
    margin-top: 0;
    margin-bottom: 0;
    height: 0;
}
</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // let ReSpec do syntax highlighting first
        document.respecIsReady.then(() => {
            document.querySelectorAll('.with-default').forEach(n => {
                let wo = n.querySelector('pre:nth-of-type(1)');
                let w = n.querySelector('pre:nth-of-type(2)');
                let cbox = n.querySelector('.with-default-control input[type="checkbox"]');

                w.classList.add('selected');
                cbox.checked = true;

                cbox.addEventListener('change', e => {
                    if (e.target.checked) {
                        // with default
                        w.classList.add('selected');
                        wo.classList.remove('selected');
                    } else {
                        // without
                        w.classList.remove('selected');
                        wo.classList.add('selected');
                    }
                });
            });
        });
    });
</script>
<style>
  /* example tab selection */
  .ds-selector-tabs {
    padding-bottom: 2em;
  }
  .ds-selector-tabs .selectors {
    padding: 0;
    border-bottom: 1px solid #ccc;
    height: 28px;
  }
  .ds-selector-tabs .selectors button {
    display: inline-block;
    min-width: 54px;
    text-align: center;
    font-size: 11px;
    font-weight: bold;
    height: 27px;
    padding: 0 8px;
    line-height: 27px;
    transition: all,0.218s;
    border-top-right-radius: 2px;
    border-top-left-radius: 2px;
    color: #666;
    border: 1px solid transparent;
  }
  .ds-selector-tabs .selectors button:first-child {
    margin-left: 2px;
  }
  .ds-selector-tabs .selectors button.selected {
    color: #202020 !important;
    border: 1px solid #ccc;
    border-bottom: 1px solid #fff !important;
  }
  .ds-selector-tabs .selectors button:hover {
    background-color: transparent;
    color: #202020;
    cursor: pointer;
  }
  .ds-selector-tabs pre, .ds-selector-tabs table {
    display: none;
  }
  .ds-selector-tabs pre.selected, .ds-selector-tabs table.selected {
    display: block;
  }
  a.playground {
    display: inline-block;
    width: 150px;
    border: 1px solid transparent;
    border-top-right-radius: 2px;
    border-top-left-radius: 2px;
    background-color: rgb(192, 192, 192);
    text-decoration: none;
    font-size: 13px;
    margin-bottom: 10px;
  }
  a[href].playground {
    padding: 4px 0 3px 8px;
    border-bottom: none;
    text-decoration: none;
    color: #666;
  }
</style>
<!-- END EXTRA TABS -->
<!-- ASSERTION HIGHLIGHTING -->
<style>
.rfc2119-assertion {
  background-color: rgb(230,230,230)
}
#td-default-in-pop {
  background-color: yellow;
}
#td-default-in-apikey {
  background-color: yellow;
}
#td-default-alg-pop {
  background-color: yellow;
}
#td-default-format-pop {
  background-color: yellow;
}
#td-default-qop {
  background-color: yellow;
}
#td-default-flow {
  background-color: yellow;
}
#td-vocab-proxy--SecurityScheme {
  background-color: yellow;
}
#td-vocab-qop--DigestSecurityScheme {
  background-color: yellow;
}
#td-vocab-scopes--Form {
  background-color: yellow;
}

.at-risk {
  background-color: yellow;
}

</style>
<!-- END ASSERTION HIGHLIGHTING -->

</head>
<body>

  

  <section id="abstract">
  <p>
  This document describes a formal model and a common representation 
  for a Web of Things (WoT) Thing Description. 
  A Thing Description describes the metadata and interfaces of <a>Things</a>,
  where a <a>Thing</a> is an abstraction of a physical or virtual entity that
  provides interactions to and participates in the Web of Things. 
  Thing Descriptions provide a set of interactions based on a small vocabulary 
  that makes it possible both to integrate diverse devices and 
  to allow diverse applications to interoperate. 
  Thing Descriptions, by default, are encoded in a JSON format that also allows
  JSON-LD processing. The latter provides a powerful foundation to represent
  knowledge about <a>Things</a> in a machine-understandable way.
  A Thing Description instance can be hosted by the <a>Thing</a> itself or hosted
  externally when a <a>Thing</a> has resource restrictions (e.g., limited memory space)
  or when a Web of Things-compatible legacy device is retrofitted 
  with a Thing Description.
  </p>
  </section>

  <section id="sotd">
  <p>
  Implementers need to be aware that this specification is considered unstable. 
  Vendors interested in implementing this specification before it eventually 
  reaches the Candidate Recommendation phase should subscribe to the 
  <a href="https://github.com/w3c/wot-thing-description">repository</a>
  and take part in the discussions.
  </p>
<!--
  <p>This document is governed by the <a id=
  "w3c_process_revision" href=
  "https://www.w3.org/2019/Process-20190301/">1 March 2019
  <abbr title="World Wide Web Consortium">W3C</abbr> Process
  Document</a>.</p>
-->
  <p>
  <span class="at-risk">Text and table entries highlighted with a yellow background
  indicates an assertion associated with an at-risk feature for which
  insufficient implementation experience currently exists.</span>
  When an entire section is at-risk the words
  "<span class="at-risk">This section is at risk.</span>"
  will be placed at the start of the section and highlighted with a yellow background.</span>
  </p>
   
  </section>

  <section id="introduction" class="informative">
  <h1>Introduction</h1>
  <p>
  The WoT Thing Description (TD) is a central building block in the W3C Web of
  Things (WoT) and can be considered as the entry point of a <a>Thing</a>
  (much like the <i>index.html</i> of a Web site). A TD instance has four main
  components: textual metadata about the <a href="#thing">Thing</a> itself,
  a set of <a href="#interactionaffordance">Interaction Affordances</a>
  that indicate how the <a>Thing</a> can be used,
  <a href="#sec-data-schema-vocabulary-definition">schemas</a> for the data
  exchanged with the <a>Thing</a> for machine-understandability,
  and, finally, <a href="#sec-hypermedia-vocabulary-definition">Web links</a> to 
  express any formal or informal relation to other <a>Things</a> or documents on the Web.
  </p>
  <p>
  The <a>Interaction Model</a> of W3C WoT defines three types of <a>Interaction Affordances</a>:
  Properties (<a href="#propertyaffordance"><code>PropertyAffordance</code></a> class)
  can be used for sensing and controlling parameters, such as getting the current value or 
  setting an operation state.
  Actions (<a href="#actionaffordance"><code>ActionAffordance</code></a> class) model
  invocation of physical (and hence time-consuming) processes, but can also be used to 
  abstract RPC-like calls of existing platforms. 
  Events (<a href="#eventaffordance"><code>EventAffordance</code></a> class) are used
  for the push model of communication where notifications,
  discrete events, or streams of values are sent asynchronously to the receiver.
  See [[wot-architecture]] for details.
  </p>
  <p>
  In general, the TD provides metadata for different <a>Protocol Bindings</a>
  identified by URI schemes [[iana-uri-schemes]] (e.g., <code>http</code>, <code>coap</code>, etc.),
  content types based on media types (e.g., <code>application/json</code>, <code>application/xml</code>, <code>application/cbor</code>, <code>application/exi</code> etc.) [[iana-media-types]],
  and security mechanisms (for authentication,
  authorization, confidentiality, etc.).
  Serialization of TD instances is based on JSON [[rfc8259]], where JSON names refer to terms of
  the TD vocabulary, as defined in this specification document. In addition the JSON serialization of TDs
  follows the syntax of JSON-LD 1.1 [[?json-ld11]] to enable extensions and rich semantic processing.
  </p>
  <p>
  <a href="#simple-thing-description-sample">Example 1</a> shows a TD instance and
  illustrates the <a>Interaction Model</a> with Properties, Actions, and Events
  by describing a lamp <a>Thing</a> with the title <i>MyLampThing</i>.
  </p>
<aside class="example" id="simple-thing-description-sample" title="Thing Description Sample">
    <pre>{
    "@context": "https://www.w3.org/2019/wot/td/v1",
    "id": "urn:dev:ops:32473-WoTLamp-1234",
    "title": "MyLampThing",
    "securityDefinitions": {
        "basic_sc": {"scheme": "basic", "in":"header"}
    },
    "security": ["basic_sc"],
    "properties": {
        "status" : {
            "type": "string",
            "forms": [{"href": "https://mylamp.example.com/status"}]
        }
    },
    "actions": {
        "toggle" : {
            "forms": [{"href": "https://mylamp.example.com/toggle"}]
        }
    },
    "events":{
        "overheating":{
            "data": {"type": "string"},
            "forms": [{
                "href": "https://mylamp.example.com/oh",
                "subprotocol": "longpoll"
            }]
        }
    }
}</pre>
</aside>


  <p>
  From this TD example, 
  we know there exists one <a href="#propertyaffordance">Property affordance</a>
  with the title <i>status</i>. 
  In addition, 
  information is provided to indicate that this Property is accessible via 
  (the secure form of) the HTTP protocol with a GET method 
  at the URI <code>https://mylamp.example.com/status</code> 
  (announced within the <code>forms</code> structure by the 
  <code>href</code> member), and will return a string-based status value.
  The use of the GET method is not stated explicitly,
  but is one of the default assumptions defined by this document.
  </p>
  <p>
  In a similar manner, an <a href="#actionaffordance">Action affordance</a> is specified to toggle the
  switch status using the POST method on the
  <code>https://mylamp.example.com/toggle</code> resource,
  where POST is again a default assumption for invoking Actions.
  </p>
  <p>
  The <a href="#eventaffordance">Event affordance</a> enables a mechanism for asynchronous messages
  to be sent by a <a>Thing</a>.
  Here, a subscription to be notified upon a possible overheating event 
  of the lamp can be obtained by using HTTP with its long polling
  subprotocol on <code>https://mylamp.example.com/oh</code>.
  </p>
 
  <p>
  This example also specifies the <code>basic</code> security scheme, 
  requiring a username and password for access.
  Note that a security scheme is first given a name in a 
  <code>securityDefinition</code> and then activated by specifying
  that name in a <code>security</code> section.
  In combination with the use of the HTTP protocol this example
  demonstrates the use of HTTP Basic Authentication.
  Specification of at least one security scheme at the top level is mandatory,
  and gives the default access requirements for every resource.
  However, security schemes can also be specified per-form,
  with configurations given at the form level overriding configurations given at the <code>Thing</code> level,
  allowing for the specification of fine-grained access control.
  It is also possible to use a special <code>nosec</code> security scheme to
  indicate that no access control mechanisms are used.
  Additional examples will be provided later.
  </p>

  <p>
        The Thing Description offers the possibility to add contextual definitions
        in some namespace. This mechanism can be used to integrate additional semantics
        to the content of the Thing Description instance, provided that formal knowledge,
        e.g. logic rules for a specific domain of application, can be found under the
        given namespace. Contextual information can also help specify some configurations and 
        behavior of the underlying communication protocols declared in the <code>forms</code> field.
        <a href="#thing-description-full-serialization">Example 2</a> extends the TD sample from
        Example 1 by introducing a second defintion in the <code>@context</code> to declare the
        prefix <code>saref</code> as referring to the SAREF vocabulary namespace [[smartM2M]].
        The SAREF vocabulary includes terms to describe lighting devices and other home automation
        devices that one can embed in a TD as semantic labels in the <code>@type</code>
        property. In the present example, the <a>Thing</a> is labelled with <code>saref:LightSwitch</code>,
        the form of the <code>status</code> property affordance is labelled with <code>saref:GetCommand</code>,
        the form of the <code>toggle</code> action affordance with <code>saref:ToggleCommand</code> and
        the form the <code>overheating</code> event affordance with <code>saref:NotifyCommand</code>.
  </p>


 
 <aside class="example" id="thing-description-full-serialization" title="Thing Description with TD Context Extension for semantic annotations">
              <pre>
    {
        "@context": [
            "https://www.w3.org/2019/wot/td/v1",
            { "saref": "https://w3id.org/saref#" }
        ],
        "id": "urn:dev:ops:32473-WoTLamp-1234",
        "name": "MyLampThing",
        "@type": "saref:LightSwitch",
        "securityDefinitions": {"basic_sc": {
            "scheme": "basic",
            "in": "header"
        }},
        "security": ["basic_sc"],
        "properties": {
            "status": {
                "type": "string",
                "forms": [{
                    "@type": "saref:GetCommand",
                    "href": "https://mylamp.example.com/status"
                }]
            }
        },
        "actions": {
            "toggle": {
                "forms": [{
                    "@type": "saref:ToggleCommand",
                    "href": "https://mylamp.example.com/toggle"
                }]
            }
        },
        "events": {
            "overheating": {
                "data": {"type": "string"},
                "forms": [{
                    "@type": "saref:NotifyCommand",
                    "href": "https://mylamp.example.com/oh"
                }]
            }
        }
    }</pre>
</aside>

<p>
        The declaration mechanism inside some
        <code>@context</code> is specified by JSON-LD. A TD instance complies to version 1.1 of
        this specification [[?json-ld11]]. The TD instance can be also processed as an RDF
        document (details are given in <a href="#note-jsonld11-processing"></a>).
</p>

</section>

<section id="conformance">
<p>
A Thing Description instance complies with this specification if it follows 
the normative statements in
<a href="#sec-vocabulary-definition"></a>
and
<a href="#sec-td-serialization"></a> 
regarding Thing Description serialization.
</p>
<p>
A JSON Schema [[?JSON-SCHEMA-VALIDATION]] to validate Thing Description instances
is provided in Appendix <a href="#json-schema-for-validation"></a>.
</p>

<p>
    A set of SHACL shapes [[SHACL]] is provided under the TD
    namespace IRI as an alternative to validate Thing Description instances
    after transformation to RDF. See Appendix <a href="#note-jsonld11-processing"></a>.
</p>

<!-- <p class="issue">
    The validation file is currently available
    <a href="https://w3c.github.io/wot-thing-description/validation/td-validation.ttl">
      on w3c.github.io
  </a>
  but is should eventually be put under the TD namespace, on w3.org. E.g. at
  <code>https://www.w3.org/2019/td/td-validation.ttl</code>.
</p> -->

</section>

<section id="terminology" class="normative"> 
<h2>Terminology</h2>

  <p>The fundamental WoT terminology such as
  <dfn>Thing</dfn>,
  <dfn>Consumer</dfn>,
  <dfn>Thing Description</dfn> (<dfn>TD</dfn>),
  <dfn>Interaction Model</dfn>,
  <dfn>Interaction Affordance</dfn>,
  <dfn>Property</dfn>,
  <dfn>Action</dfn>,
  <dfn>Event</dfn>,
  <dfn>Protocol Binding</dfn>,
  <dfn>Servient</dfn>,
  <dfn>WoT Interface</dfn>,
  <dfn>WoT Runtime</dfn>,
  etc. is defined in <a href="https://w3c.github.io/wot-architecture/#terminology">Section 3</a>
  of the WoT Architecture specification [[WOT-ARCHITECTURE]].
  </p>

  <p>
      In addition, this specification introduces the following definitions:
  </p>

  <dl>
    <dt>
        <dfn id="dfn-context-ext">TD Context Extension</dfn>
    </dt>
    <dd>
        A mechanism to extend <a>Thing Descriptions</a> with additional <a>Vocabulary
        Terms</a>. It is the basis for semantic annotations and extensions to core
        mechanisms such as Protocol Bindings, Security Schemes, and Data Schemas.
    </dd>
    <dt>
        <dfn id="dfn-inf-model">TD Information Model</dfn>
    </dt>
    <dd>
        Set of <a>Class</a> definitions constructed from pre-defined <a>Vocabularies</a>
        on which constraints apply, thus defining the semantics of these <a>Vocabularies</a>.
        Class definitions are typically expressed in terms of a <a>Signature</a> (a set of
        <a>Vocabulary Terms</a>) and functions over that <a>Signature</a>. The <a>TD
        Information Model</a> also includes <a>Default Values</a>, defined as a global
        function over <a>Classes</a>.
    </dd>
    <dt>
    <dfn id="dfn-td-processor">TD Processor</dfn>
    </dt>
    <dd>
        A system that can serialize some internal representation of a <a>Thing Description</a>
        in a given format and deserialize it from that format. A <a>TD Processor</a> must detect
        semantically inconsistent <a>Thing Descriptions</a>, that is, <a>Thing Descriptions</a>
        that cannot satisfy constraints on the <a>Instance Relation</a> of the <code>Thing</code>
        class. For that purpose, a <a>TD Processor</a> may compute canonical forms of <a>Thing
        Descriptions</a> in which all possible <a>Default Values</a> are assigned. A <a>TD Processor</a>
        is typically a sub-system of a <a>WoT Runtime</a>.
    </dd>
    <dt>
        <dfn id="dfn-td-serialization">TD Serialization</dfn>
        or
        <dfn id="dfn-td-document">TD Document</dfn>
    </dt>
    <dd>
        Textual or binary representation of <a>Thing Descriptions</a> that can be stored and
        exchanged between <a>Servients</a>. A <a>TD Serialization</a> follows a given representation
        format,  identified by a media type when exchanged over the network.
        The default representation format for <a>Thing Descriptions</a> is JSON-based as defined by
        this specification.
    </dd>
    <dt>
        <dfn id="dfn-vocab">Vocabulary</dfn>
    </dt>
    <dd>
        A collection of <a>Vocabulary Terms</a>, identified by a namespace IRI.
    </dd>
    <dt>
        <dfn id="dfn-vocab-term">Term</dfn>
        and
        <dfn id="dfn-vocab-term">Vocabulary Term</dfn>
    </dt>
    <dd>
        A character string. When a <a>Term</a> is part of a <a>Vocabulary</a>, i.e. prefixed by
        a namespace IRI, it is called a <a>Vocabulary Term</a>. For the sake of readability,
        <a>Vocabulary Terms</a> present in this document are always written in a concise
        way and not as full IRIs. See Appendix <a href="#thing-description-json-ld-context"></a>
        for a mapping to full IRIs.
    </dd>
  </dl>

  <p>
      These definitions are further developed in <a href="#preliminary-definitions"></a>.
  </p>
</section>

<section>
  <h1>Namespaces</h1>

  <p>
      The version of the <a>TD Information Model</a>
      defined in <a href="#sec-vocabulary-definition"></a> of this specification
      is identified by the following IRI:
  </p>
  <p>
    <code>https://www.w3.org/2019/wot/td/v1</code>
  </p>
  <p>
      This IRI, which is also a URI, can be dereferenced to optain a <a href="https://www.w3.org/2019/wot/td/v1">JSON-LD context file</a> [[?json-ld11]],
      which can be used for the alternative JSON-LD processing of the JSON-based <a>TD documents</a>.
  </p>

  <section class="normative">

    <h2>Reference Namespaces</h2>

    <p>
        For JSON-LD processing of <a>TD documents</a>,
        the <a>Vocabularies</a> used by the <a>TD Information Model</a> need to be grounded in Linked Data namespaces identified by IRIs.
        See <a href="#thing-description-json-ld-context"></a> for more details.
        The <a>Vocabularies</a> are organized into namespaces that follow the structure of <a href="#class-definitions"></a>.
        The namespace IRIs are as follows:
    </p>
  
    <table class="def">
    <thead>
        <tr>
            <th>Vocabulary</th>
            <th>Namespace IRI</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Core</td>
            <td><code>https://www.w3.org/2019/wot/td#</code></td>
        </tr>
        <tr>
            <td>Data Schema</td>
            <td><code>https://www.w3.org/2019/wot/json-schema#</code></td>
        </tr>
        <tr>
            <td>Security</td>
            <td><code>https://www.w3.org/2019/wot/security#</code></td>
        </tr>
        <tr>
            <td>Hypermedia Controls</td>
            <td><code>https://www.w3.org/2019/wot/hypermedia#</code></td>
        </tr>
    </tbody>
    </table>
  
    <p>
        The <a>Vocabularies</a> are independent from each other.
        They may be reused and extended in other W3C specifications.
        Every breaking change in the design of a <a>Vocabulary</a>
        will require the assignment of a new year-based namespace URI.
        Note that to maintain the general coherence of the <a>TD Information Model</a>,
        the associated JSON-LD context file is versioned such that every version has its own URI
        (<code>v1</code>, <code>v1.1</code>, <code>v2</code>, ...)
        to also identify non-breaking changes, in particular the addition of new <a>Terms</a>.
    </p>

    <p>
        Because a <a>Vocabulary</a> under some namespace IRI can only undergo non-breaking
        changes, its content can be safely cached or embedded in applications. One 
        advantage of exposing relatively static content under a namespace IRI is to
        optimize payload sizes of messages exchanged between constrained devices. It
        also avoids any privacy leakage resulting from devices accessing publicly
        available vocabularies from private networks (see also
        <a href="#sec-security-consideration-context"></a>).
    </p>

  </section>
  
  <section class="informative">

    <h2>Alternative Namespaces</h2>

    <p>
        For convenience, generic namespace IRIs redirect to the latest year-based IRI for each vocabulary.
        Their usage is intended for applications with powerful infrastructures,
        like analytics on large production plants or buildings based on knowledge graphs
        that can manage different versions of these <a>Vocabularies</a>
        and can dynamically dereference newer versions.
        These alternative namespaces are defined as follows:
    </p>
  
    <table class="def">
    <thead>
        <tr>
            <th>Vocabulary</th>
            <th>Namespace IRI</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Core</td>
            <td><code>https://www.w3.org/ns/td#</code></td>
        </tr>
        <tr>
            <td>Data Schema</td>
            <td><code>https://www.w3.org/ns/json-schema#</code></td>
        </tr>
        <tr>
            <td>Security</td>
            <td><code>https://www.w3.org/ns/wot-security#</code></td>
        </tr>
        <tr>
            <td>Hypermedia Controls</td>
            <td><code>https://www.w3.org/ns/hypermedia#</code></td>
        </tr>
    </tbody>
    </table>
  
    <p>
        Embedding these generic namespace IRIs in Thing-to-Thing applications is however not encouraged,
        since newer versions of the <a>Vocabularies</a> may break functionalities.
    </p>

  </section>
  </section>

  <section id="sec-vocabulary-definition" class="normative">
    <h1>TD Information Model</h1>

    <p>
      This section introduces the <a>TD Information Model</a>.
      The <a>TD Information Model</a> serves as the conceptual basis
      for the processing of Thing Descriptions and their serialization,
      which is described separately in <a href="#sec-td-serialization"></a>.
    <p>

      <section>
      <h2>Overview</h2>
    
      <p>
        The <a>TD Information Model</a> is built upon the following, independent <a>Vocabularies</a>:
        <ul>
            <li>
                the <em>core</em> TD <a>Vocabulary</a>, which reflects the
                <a>Interaction Model</a> with the <a>Properties</a>, <a>Actions</a>, and <a>Events</a>
                <a>Interaction Affordances</a> [[!WOT-ARCHITECTURE]]
            </li>
            <li>
                the <em>Data Schema</em> <a>Vocabulary</a>, including (a subset of)
                the terms defined by JSON Schema [[?JSON-SCHEMA-VALIDATION]]
            </li>
            <li>
                the <em>WoT Security</em> <a>Vocabulary</a>, identifying security mechanisms
                and requirements for their configuration
            </li>
            <li>
                the <em>Hypermedia Controls</em> <a>Vocabulary</a>, encoding the main principles of RESTful
                communication using Web links and forms
            </li>
        </ul>
      </p>

      <p>
          Each of these <a>Vocabularies</a> is essentially a set of <a>Terms</a> that can
          be used to build data structures, interpreted as objects in the
          traditional object-oriented sense. Objects are instances of classes
          and have properties. In the context of W3C WoT, they denote <a>Things</a> and
          their <a>Interaction Affordances</a>. A formal definition of objects is given in
          <a href="#preliminary-definitions"></a>. The main elements of
          the <a>TD Information Model</a> are then presented in
          <a href="#class-definitions"></a>. Certain object properties may be
          omitted in a TD when <a>Default Values</a> exist. A list of defaults
          is given in <a href="#sec-default-values"></a>.
      </p>

      <p>
          The UML diagram shown next gives an overview of the <a>TD Information Model</a>.
          It represents all classes as tables and the assocations that exist between
          classes, starting from the class <a href="#thing"><code>Thing</code></a>,
          as directed arrows. For the sake of readability, the diagram was split in
          four parts, one for each of the four base <a>Vocabularies</a>.
      </p>
      
      <!--<p><a href="http://visualdataweb.de/webvowl/#iri=https://rawgit.com/w3c/wot-thing-description/TD-JSON-LD-1.1/ontology/td.ttl">Click here for the visualization</a></p>-->
     

      <p class="ednote">
          The following diagrams are automatically generated from the ontology files.
          The layout will be improved upon publication of Working Drafts.
      </p>


    <figure id="td-core-model">
      <img src="visualization/td.svg" alt="TD core model figure"/>
      <figcaption>TD core model (<a href="visualization/td.svg">Click SVG file</a>)</figcaption>
    </figure>
    
    <figure id="td-data-schema-model">
      <img src="visualization/json-schema.svg" alt="TD data schema model figure"/>
      <figcaption>JSON schema model (<a href="visualization/json-schema.svg">Click SVG file</a>)</figcaption>
    </figure>
    
    <figure id="td-security-model">
      <img src="visualization/wot-security.svg" alt="TD security model figure"/>
      <figcaption>WoT security model (<a href="visualization/wot-security.svg">Click SVG file</a>)</figcaption>
    </figure>
    
    <figure id="hypermedia-model">
      <img src="visualization/hypermedia.svg" alt="Hypermedia controls model figure"/>
      <figcaption>Hypermedia controls model (<a href="visualization/hypermedia.svg">Click SVG file</a>)</figcaption>
    </figure>

    </section>

    <section id="preliminary-definitions">

        <h2>Preliminaries</h2>

        <p>
            To provide a model that can be easily processes by both,
            simple rules on a tree-based document (i.e., raw JSON processing)
            and rich Semantic Web tooling (i.e., JSON-LD processing),
            this document defines the following formal preliminaries
            to construct the <a>TD Information Model</a> accordingly.
        </p>

        <p>
            All definitions in this section refer to <em>sets</em>, which
            intuitively are collections of elements that can themselves be sets.
            All arbitrarily complex data structures can be defined in terms
            of sets. In particular, an <dfn>Object</dfn> is a data structure
            recursively defined as follows:
        </p>

        <ul>
            <li>
                a <a>Term</a>, which may or may not belong to a <a>Vocabulary</a>,
                is an <a>Object</a>.
            </li>
            <li>
                a set of name-value pairs where the name is a <a>Term</a> and the
                value is another <a>Object</a>, is also an <a>Object</a>.
            </li>
        </ul>

        <p>
            Though this definition does not prevent <a>Objects</a> to include multiple
            name-value pairs with the same name, they are generally not considered
            in this specification. An <a>Object</a> whose elements only have numbers
            as names is called an <dfn>Array</dfn>. Similarly, an <a>Object</a> whose
            elements only have <a>Term</a>s (that do not belong to any <a>Vocabulary</a>)
            as names is called a <dfn>Map</dfn>. All names appearing in some name-value pair
            in a <a>Map</a> are assumed to be <em>unique</em> within the scope of the
            <a>Map</a>.
        </p>

        <p>
            Moreover, <a>Object</a>s can be instances of some <dfn>Class</dfn>.
            A <a>Class</a>, which is denoted by a <a>Vocabulary Term</a>, is
            first defined by a set of <a>Vocabulary Terms</a> called a <dfn>Signature</dfn>. A
            <a>Class</a> whose <a>Signature</a> is empty is called a <dfn>Simple Type</dfn>.
        </p>

        <p>
            The <a>Signature</a> of a <a>Class</a> allows to construct two functions that further
            define <a>Classes</a>: an <dfn>Assignment Function</dfn> and a <dfn>Type Function</dfn>.
            The <a>Assignment Function</a> of a <a>Class</a> takes a <a>Vocabulary Term</a> as input
            and returns either <code>true</code> or <code>false</code> as output.
            The <a>Type Function</a> of a <a>Class</a> also takes a <a>Vocabulary Term</a>
            as input and returns another <a>Class</a> as output. These functions are <em>partial</em>:
            their domain is limited to the <a>Signature</a> of the <a>Class</a> being defined.
        </p>

        <p>
            On the basis of these two functions, an <dfn>Instance Relation</dfn> can be defined
            for a pair composed of an <a>Object</a> and a <a>Class</a>. This relation is defined as
            constraints to be satisfied, as follows:
            <ul>
                <li>
                    an <a>Object</a> is an instance of a <a>Class</a> if for every <a>Term</a>
                    for which the <a>Assignment Function</a> of the <a>Class</a> returns
                    <code>true</code>, it includes a name-value pair with the <a>Vocabulary Term</a>
                    as name. In other words, the <a>Assignment Function</a> indicates whether
                    a <a>Vocabulary Term</a> in the <a>Signature</a> of the <a>Class</a> is mandatory.
                    <a>Vocabulary Terms</a> that are not mandatory, but are in the <a>Signature</a>
                    of a <a>Class</a> are optional.
                </li>
                <li>
                    an <a>Object</a> is an instance of a <a>Class</a>
                    if for every <a>Vocabulary Term</a>
                    in the <a>Signature</a> of the <a>Class</a> used as name in some name-value pair
                    of the <a>Object</a>, the value of that pair is an instance of the
                    <a>Class</a> returned by the <a>Type Function</a> of the <a>Class</a> for the
                    given <a>Vocabulary Term</a>.
                </li>
            </ul>
        </p>

        <p>
            According to the definition above, an <a>Object</a> would be an instance of every <a>Simple
            Type</a>, regardless of its structure. Instead, another definition for the <a>Instance
            Relation</a> is introduced for <a>Simple Types</a>:
            <ul>
                <li>
                    An <a>Object</a> is an instance of a <a>Simple Type</a> if it is a <a>Term</a>
                    with a given lexical form (e.g. <code>true</code>, <code>false</code> for the
                    <code>boolean</code> type, <code>1</code>, <code>2</code>, <code>3</code>, ...
                    for the <code>unsignedInt</code> type, etc).
                </li>
            </ul>
        </p>

        <p>
            A <a>Class</a> is a <dfn>Subclass</dfn> of some other <a>Class</a> if every
            instance of the former is also an instance of the latter.
        </p>

        <p>
            Given all definitions above, the <a>TD Information Model</a> is to be understood
            as a set of <a>Class</a> definitions,
            which include a <a>Class</a> name (a <a>Vocabulary Term</a>),
            a <a>Signature</a> (a set of <a>Vocabulary Terms</a>),
            an <a>Assignment Function</a>,
            and a <a>Type Function</a>.
            These <a>Class</a> definitions are provided as tables in <a href="#class-definitions"></a>.
        </p>

        <p>
            By convention, <a>Simple Types</a> are denoted by names starting with lowercase.
            The <a>TD Information Model</a> references the following <a>Simple Types</a>:
            <code>string</code>,
            <code>anyURI</code>,
            <code>dateTime</code>,
            <code>integer</code>,
            <code>unsignedInt</code>,
            <code>double</code>, and
            <code>boolean</code>.
            Their definition (i.e. the specification of their lexical form) is outside of the
            scope of the <a>TD Information Model</a>.</p>
        <p>
            In addition, the <a>TD Information Model</a> defines a global function on
            pairs of <a>Vocabulary Terms</a>. The function takes a <a>Class</a> name and
            another <a>Vocabulary Term</a> as input and
            returns an <a>Object</a>. If the returned <a>Object</a> is different from
            <code>null</code>, it represents the <dfn>Default Value</dfn> for some
            assignment on the input <a>Vocabulary Term</a> in an instance of the input
            <a>Class</a>. This function allows to relax the constraint
            defined above on the <a>Assignment Function</a>:
            an <a>Object</a> is an instance of a <a>Class</a> if it includes all mandatory
            assignments <em>or</em> if <a>Default Value</a> exist for the missing
            assignments. All <a>Default Values</a> are given in the table of
            <a href="#sec-default-values"></a>.
        </p>

        <p>
            The formalization introduced here does not consider the possible relation
            between <a>Objects</a> as abstract data structures and physical world objects
            such as <a>Things</a>. However, care was given to the possibility of re-interpreting
            all <a>Vocabulary Terms</a> involved in the <a>TD Information Model</a> as RDF
            resources, so as to integrate them in a larger model of the physical world
            (an ontology). This aspect is dealt with in Appendix
            <a href="#thing-description-ontology"></a>.
        </p>

    </section>
    
      <section>

        <h2>Class Definitions</h2>

        <p>
            <span class="rfc2119-assertion" id="td-vocabulary">
                A <a>TD Processor</a> MUST be able to detect that a TD does not
                meet <a>Class</a> instantiation constraints on all <a>Classes</a> defined in
                <a href="#sec-core-vocabulary-definition"></a>,
                <a href="#sec-data-schema-vocabulary-definition"></a>,
                <a href="#sec-security-vocabulary-definition"></a>,
                and <a href="#sec-hypermedia-vocabulary-definition"></a>.
            </span>
        </p>

      <section id="sec-core-vocabulary-definition">
      <h2>Core Vocabulary Definitions</h2>

<!--
      <p class="ednote" title="Security Definitions Mandatory">
      Note that for now <code>securityDefinitions</code> are mandatory at the top level of a <code>Thing</code>
      since there needs to be
      at least one definition available for use in the top-level mandatory <code>security</code>
      block.  However, a future extension may allow in-place anonymous definitions
      within <code>security</code> blocks in which case this requirement may be relaxed.
      </p>
-->

        <section><h3><code>Thing</code></h3><p>An abstraction of a physical or a virtual entity whose metadata and interfaces are described by a WoT Thing Description, whereas a virtual entity is the composition of one or more Things.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-at-context--Thing"><td><code>@context</code></td><td>JSON-LD keyword to define short-hand names called terms that are used throughout a TD document.</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a> or <a>Array</a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-at-type--Thing"><td><code>@type</code></td><td>JSON-LD keyword to label the object with semantic tags (or types).</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-id--Thing"><td><code>id</code></td><td>unique identifier of the Thing (URI, e.g. custom URN).</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-title--Thing"><td><code>title</code></td><td>Provides a human-readable title (e.g., display a text for UI representation) based on a default language.</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-titles--Thing"><td><code>titles</code></td><td>Provides multi-language human-readable titles (e.g., display a text for UI representation in different languages).</td><td>optional</td><td><a href="#multilanguage"><code>MultiLanguage</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-description--Thing"><td><code>description</code></td><td>Provides additional (human-readable) information based on a default language.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-descriptions--Thing"><td><code>descriptions</code></td><td>Can be used to support (human-readable) information in different languages.</td><td>optional</td><td><a href="#multilanguage"><code>MultiLanguage</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-version--Thing"><td><code>version</code></td><td>Provides version information.</td><td>optional</td><td><a href="#versioninfo"><code>VersionInfo</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-created--Thing"><td><code>created</code></td><td>Provides information when the TD instance was created.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#dateTime"><code>dateTime</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-modified--Thing"><td><code>modified</code></td><td>Provides information when the TD instance was last modified.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#dateTime"><code>dateTime</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-support--Thing"><td><code>support</code></td><td>Provides information about the TD maintainer as URI scheme (e.g., mailto [[RFC6068]], tel [[RFC3966]], https).</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-base--Thing"><td><code>base</code></td><td>Define the base URI that is used for all relative URI references throughout a TD document. In TD instances, all relative URIs are resolved relative to the base URI using the algorithm defined in [[RFC3986]].<br/><br/><code>base</code> does not affect the URIs used in <code>@context</code> and the IRIs [[?RFC3987]] used within Linked Data [[?LINKED-DATA]] graphs that are relevant when semantic processing is applied to TD instances.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-properties--Thing"><td><code>properties</code></td><td>All Property-based interaction affordance of the Thing.</td><td>optional</td><td><a>Map</a> of <a href="#propertyaffordance"><code>PropertyAffordance</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-actions--Thing"><td><code>actions</code></td><td>All Action-based interaction affordance of the Thing.</td><td>optional</td><td><a>Map</a> of <a href="#actionaffordance"><code>ActionAffordance</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-events--Thing"><td><code>events</code></td><td>All Event-based interaction affordance of the Thing.</td><td>optional</td><td><a>Map</a> of <a href="#eventaffordance"><code>EventAffordance</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-links--Thing"><td><code>links</code></td><td>Provides Web links to arbitrary resources that relate to the specified Thing Description.</td><td>optional</td><td><a>Array</a> of <a href="#link"><code>Link</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-forms--Thing"><td><code>forms</code></td><td>Set of form hypermedia controls that describe how an operation can be performed. Forms are serializations of Protocol Bindings. In this version of TD, all operations that can be described at the Thing level are concerning how to interact with the Thing's <a href="#propertyaffordance">property affordances</a> collectively at once.</td><td>optional</td><td><a>Array</a> of <a href="#form"><code>Form</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-security--Thing"><td><code>security</code></td><td>Set of security definition names, chosen from those defined in securityDefinitions.  These must all be satisfied for access to resources.</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-securityDefinitions--Thing"><td><code>securityDefinitions</code></td><td>Set of named security configurations (definitions only).  Not actually applied unless names are used in a security section.</td><td>mandatory</td><td><a>Map</a> of <a href="#securityscheme"><code>SecurityScheme</code></a></td></tr></tbody></table>
<p>
    <span class="rfc2119-assertion" id="td-context-ns-thing-mandatory">
        The <code>@context</code> name-value pair MUST contain the anyURI <code>https://www.w3.org/2019/wot/td/v1</code>
        either directly when of type <code>anyURI</code> or as first element when of type <a>Array</a>.
    </span>
    <span class="rfc2119-assertion" id="td-context-ns-thing-optional">
        When <code>@context</code> is an <a>Array</a>, the anyURI <code>https://www.w3.org/2019/wot/td/v1</code>
        MAY be followed by elements of type <code>anyURI</code> or type <a>Map</a> in any order,
        while it is RECOMMENDED to include only one <a>Map</a> with all the name-value pairs in the <code>@context</code> <a>Array</a>.
    </span>
    <span class="rfc2119-assertion" id="td-context-ns-thing-map-of-namespaces">
        <a>Maps</a> contained in an <code>@context</code> <a>Array</a> MAY contain name-value pairs,
        where the value is a namespace identifier of type <code>anyURI</code> and the name a <a>Term</a> or prefix denoting that namespace.
    </span>
    <span class="rfc2119-assertion" id="td-context-default-language">
        One <a>Map</a> contained in an <code>@context</code> <a>Array</a> SHOULD contain a name-value pair
        that defines the default language for the Thing Description,
        where the name is the <a>Term</a> <code>@language</code> and the value is a well-formed language tag
        as defined by [[!BCP47]]
        (e.g., <code>en</code>, <code>de-AT</code>, <code>gsw-CH</code>,
        <code>zh-Hans</code>, <code>zh-Hant-HK</code>, <code>sl-nedis</code>).
    </span>
</p>
<p>
    The default language is used to compute the base direction for all
    human-readable text values not otherwise associated with a language tag
    such as the <code>MultiLanguage</code> <a>Maps</a> defined in <a href="#multilanguage"></a>.
</p>
<p class="note">
    Great care has to be given when assigning bidirectional text to the human-readable metadata of Thing Descriptions.
    Producers of such texts are advised to include <em>bidi controls</em> as appropriate to try to ensure proper display.
    Consumers of such texts are advised to apply <em>bidi isolation</em> when including human-readable metadata of TDs
    in other text (e.g., for Web user interface).
    <em>Strings on the Web: Language and Direction Metadata</em> [[?string-meta]]
    provides some guidance and illustrates a number of pitfalls when using bidirectional text.
</p>
<p>
    The computation of the base direction of all human-readable text strings
    is defined by the following set of rules,
    which is based on the script subtag approach described in <a href="">Section&nbsp;4.5</a> of [[?string-meta]]:
</p>
<ul>
    <li>
        <span class="rfc2119-assertion" id="td-context-default-language-direction-default">
            If no language tag is given,
            the base direction SHOULD be assumed to be LTR (left-to-right).
        </span>
        This implies that if the language used in human-readable text uses a script that is written RTL (right-to-left),
        the default language needs to be specified explicitly, so that an appropriate base direction can be inferred.
        In the absence of a default language tag,
        it is encouraged to use first-strong heuristics or detection algorithm such as the CLDR Likely Subtags [[?LDML]].
    </li>
    <li>
        <span class="rfc2119-assertion" id="td-context-default-language-direction-script">
            In cases where a language can be written in more than one script with different base directions,
            the corresponding language tag given in <code>@language</code> or <code>MultiLanguage</code> <a>Maps</a>
            MUST include a script subtag, so that an appropriate base direction can be inferred. 
        </span>
        An example is Azeri, which is written LTR when Latin script is used (specified using <code>az-Latn</code>) 
        and RTL when Arabic script is used (specified using <code>az-Arab</code>).
    </li>
    <li><span class="rfc2119-assertion" id="td-context-default-language-direction-inference">
        Outside of <code>MultiLanguage</code> <a>Maps</a>,
        the base direction MUST be inferred from the language tag of the default language.
    </span></li>
    <li><span class="rfc2119-assertion" id="td-context-ns-multilanguage-text-direction-infer">
        Inside of <code>MultiLanguage</code> <a>Maps</a>,
        the base direction of each value of the name-value pairs 
        MUST be inferred from the language tag given in the corresponding name.
    </span></li>
</ul>

<p id="meta-interactions-of-thing">
    In addition to the explicitly provided <a>Interaction Affordances</a>
    in the <code>properties</code>, <code>actions</code>, and <code>events</code> <a>Arrays</a>,
    a <a>Thing</a> can also provide meta-interactions,
    which are indicated by <code>Form</code> instances in its optional <code>forms</code> <a>Array</a>.
    <span class="rfc2119-assertion" id="td-op-for-thing">
    When the <code>forms</code> <a>Array</a> of a <a>Thing</a> instance contains <code>Form</code> instances,
    the string values assigned to the name <code>op</code>, either directly or within an <a>Array</a>, 
    MUST be one of the following <em>opteration types</em>:
    <code>readallproperties</code>, <code>writeallproperties</code>, 
    <code>readmultipleproperties</code>, or <code>writemultipleproperties</code>.
    </span>
    (See <a href="#td-forms-readall-example"> an example</a> for an usage of <code>form</code> in a Thing instance.)
</p>
<p>
    The data schema for each of these meta-interactions is constructed
    by combing the data schemas of each <a href="#propertyaffordance"><code>PropertyAffordance</code></a> instance
    in a single <code>ObjectSchema</code> instance,
    where the <code>properties</code> <a>Map</a> of the <code>ObjectSchema</code> instance contains
    each data schema of the <code>PropertyAffordances</code> identified by the name of the corresponding <code>PropertyAffordances</code> instance.
</p>
<p>
    If not specified otherwise (e.g., through a <a>TD Context Extension</a>),
    the request data of the <code>readmultipleproperties</code> operation
    is an <a>Array</a> that contains the intended <code>PropertyAffordances</code> instance names,
    which is serialized to the content type specified by the <code>Form</code> instance.
</p>
</section>
<section><h3><code>InteractionAffordance</code></h3><p>Metadata of a Thing that shows the possible choices to <a>Consumers</a>, thereby suggesting how <a>Consumers</a> may interact with the Thing. There are many types of potential affordances, but W3C WoT defines three types of Interaction Affordances: Properties, Actions, and Events.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-at-type--InteractionAffordance"><td><code>@type</code></td><td>JSON-LD keyword to label the object with semantic tags (or types).</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-title--InteractionAffordance"><td><code>title</code></td><td>Provides a human-readable title (e.g., display a text for UI representation) based on a default language.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-titles--InteractionAffordance"><td><code>titles</code></td><td>Provides multi-language human-readable titles (e.g., display a text for UI representation in different languages).</td><td>optional</td><td><a href="#multilanguage"><code>MultiLanguage</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-description--InteractionAffordance"><td><code>description</code></td><td>Provides additional (human-readable) information based on a default language.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-descriptions--InteractionAffordance"><td><code>descriptions</code></td><td>Can be used to support (human-readable) information in different languages.</td><td>optional</td><td><a href="#multilanguage"><code>MultiLanguage</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-forms--InteractionAffordance"><td><code>forms</code></td><td>Set of form hypermedia controls that describe how an operation can be performed. Forms are serializations of Protocol Bindings.</td><td>mandatory</td><td><a>Array</a> of <a href="#form"><code>Form</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-uriVariables--InteractionAffordance"><td><code>uriVariables</code></td><td>Define URI template variables as collection based on DataSchema declarations.</td><td>optional</td><td><a>Map</a> of <a href="#dataschema"><code>DataSchema</code></a></td></tr></tbody></table><p>The class <code>InteractionAffordance</code> has the following subclasses:</p><ul><li><a href="#actionaffordance"><code>ActionAffordance</code></a></li>
<li><a href="#propertyaffordance"><code>PropertyAffordance</code></a></li>
<li><a href="#eventaffordance"><code>EventAffordance</code></a></li></ul></section>
<section><h3><code>PropertyAffordance</code></h3><p>An Interaction Affordance that exposes state of the Thing. This state can then be retrieved (read) and optionally updated (write). Things can also choose to make Properties observable by pushing the new state after a change.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-observable--PropertyAffordance"><td><code>observable</code></td><td>A hint that indicates whether Servients hosting the Thing and Intermediaries should provide a Protocol Binding that supports the <code>observeproperty</code> operation for this Property.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#boolean"><code>boolean</code></a></td></tr></tbody></table>
<p class="note">
    Property instances are also instances of the class
    <a href="#dataschema" class="sec-ref">DataSchema</a>. Therefore,
    it can contain the <code>type</code>, <code>unit</code>,
    <code>readOnly</code> and <code>writeOnly</code> members, among
    others.
</p>
<p><code>PropertyAffordance</code> is a <a>Subclass</a> of the <code>InteractionAffordance</code> <a>Class</a> and the <code>DataSchema</code> <a>Class</a>. 
    <span class="rfc2119-assertion" id="td-op-for-property">
When a Form instance is within a <code>PropertyAffordance</code> <a>Class</a>, 
the value assigned to <code>op</code> MUST be one of <code>readproperty</code>, <code>writeproperty</code>, <code>observeproperty</code>, 
<code>unobserveproperty</code> or an  <a>Array</a> containing a combination of these terms.
    </span>
</p>

</section>
<section><h3><code>ActionAffordance</code></h3><p>An Interaction Affordance that allows to invoke a function of the Thing, which manipulates state (e.g., toggling a lamp on or off) or triggers a process on the Thing (e.g., dimm a lamp over time).</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-input--ActionAffordance"><td><code>input</code></td><td>Used to define the input data schema of the action.</td><td>optional</td><td><a href="#dataschema"><code>DataSchema</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-output--ActionAffordance"><td><code>output</code></td><td>Used to define the output data schema of the action.</td><td>optional</td><td><a href="#dataschema"><code>DataSchema</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-safe--ActionAffordance"><td><code>safe</code></td><td>Signals if the action is safe (=true) or not. Used to signal if there is no internal state (cf. resource state) is changed when invoking an Action. In that case responses can be cached as example.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#boolean"><code>boolean</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-idempotent--ActionAffordance"><td><code>idempotent</code></td><td>Indicates whether the action is idempotent (=true) or not. Informs whether the action can be called repeatedly with the same result, if present, based on the same input.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#boolean"><code>boolean</code></a></td></tr></tbody></table>
<p><code>ActionAffordance</code> is a <a>Subclass</a> of the <code>InteractionAffordance</code> <a>Class</a>.
    <span class="rfc2119-assertion" id="td-op-for-action">
When a Form instance is within an instance of the <code>ActionAffordance</code> <a>Class</a>, 
the value assigned to op MUST be  <code>invokeaction</code>.
    </span>
</p>
</section>
<section><h3><code>EventAffordance</code></h3><p>An Interaction Affordance that describes an event source, which asynchronously pushes event data to <a>Consumers</a> (e.g., overheating alerts).</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-subscription--EventAffordance"><td><code>subscription</code></td><td>Defines data that needs to be passed upon subscription, e.g., filters or message format for setting up Webhooks.</td><td>optional</td><td><a href="#dataschema"><code>DataSchema</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-data--EventAffordance"><td><code>data</code></td><td>Defines the data schema of the Event instance messages pushed by the Thing.</td><td>optional</td><td><a href="#dataschema"><code>DataSchema</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-cancellation--EventAffordance"><td><code>cancellation</code></td><td>Defines any data that needs to be passed to cancel a subscription, e.g., a specific message to remove a Webhook.</td><td>optional</td><td><a href="#dataschema"><code>DataSchema</code></a></td></tr></tbody></table>
<p><code>EventAffordance</code> is a <a>Subclass</a> of the <code>InteractionAffordance</code> <a>Class</a>.
    <span class="rfc2119-assertion" id="td-op-for-event">
    When a Form instance is within an instance of the <code>EventAffordance</code> <a>Class</a>, 
    the value assigned to <code>op</code> MUST be either <code>subscribeevent</code>, <code>unsubscribeevent</code>, or both terms within an  <a>Array</a>.
    </span>
</p>
</section>
<section><h3><code>VersionInfo</code></h3><p>Metadata of a Thing that provides version information about the TD document. If required, additional version information such as firmware and hardware version (term definitions outside of the TD namespace) can be extended via the <a>TD Context Extension</a> mechanism.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-instance--VersionInfo"><td><code>instance</code></td><td>Provides a version identicator of this TD instance.</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table>
    <p>It is recommended that the values within instances of the <code>VersionInfo</code> <a>Class</a> follow the semantic versioning pattern,
where a sequence of three numbers separated by a dot indicates the major version, minor version, and patch version, respectively. See [[?SemVer]] for details.
    </p>
    </section>
<section><h3><code>MultiLanguage</code></h3><p>A <a>Map</a> providing a set of human-readable texts in different languages identified by language tags described in [[BCP47]]. See <a href="#titles-descriptions-serialization-json"></a> for example usages of this container in a Thing Description instance.</p>
<p>
<span class="rfc2119-assertion" id="td-multilanguage-language-tag"> 
    Each name of the <code>MultiLanguage</code> <a>Map</a>
    MUST be a language tag as defined in [[!BCP47]].
</span>
<span class="rfc2119-assertion" id="td-multilanguage-value"> 
    Each value of the <code>MultiLanguage</code> <a>Map</a>
    MUST be of type <code>string</code>.
</span>
</p>
</section>

      </section>
    
      <section id="sec-data-schema-vocabulary-definition">
      <h2>Data Schema Vocabulary Definitions</h2>
      <p>
        The data schema definition is reflecting a very common subset of the terms defined by JSON Schema [[?JSON-SCHEMA-VALIDATION]]. It is noted
        that data schema definitions within Thing Description instances are not limited to this defined subset and MAY use additional terms
        found in JSON Schema. In that case, it is recommended to use a <a>TD Context Extension</a> for the additional terms as described in
        <a href="#sec-context-extensions"></a>, otherwise these terms are semantically ignored by <a>TD Processors</a>
        (also see <a href="#note-jsonld11-processing"></a>).
      </p>

        <section><h3><code>DataSchema</code></h3><p>Metadata that describes the data format used. It can be used for validation.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-at-type--DataSchema"><td><code>@type</code></td><td>JSON-LD keyword to label the object with semantic tags (or types)</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-title--DataSchema"><td><code>title</code></td><td>Provides a human-readable title (e.g., display a text for UI representation) based on a default language.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-titles--DataSchema"><td><code>titles</code></td><td>Provides multi-language human-readable titles (e.g., display a text for UI representation in different languages).</td><td>optional</td><td><a href="#multilanguage"><code>MultiLanguage</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-description--DataSchema"><td><code>description</code></td><td>Provides additional (human-readable) information based on a default language.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-descriptions--DataSchema"><td><code>descriptions</code></td><td>Can be used to support (human-readable) information in different languages.</td><td>optional</td><td><a href="#multilanguage"><code>MultiLanguage</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-type--DataSchema"><td><code>type</code></td><td>Assignment of JSON-based data types compatible with JSON Schema (one of boolean, integer, number, string, object, array, or null).</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (one of <code>object</code>, <code>array</code>, <code>string</code>, <code>number</code>, <code>integer</code>, <code>boolean</code>, or <code>null</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-const--DataSchema"><td><code>const</code></td><td>Provides a constant value.</td><td>optional</td><td>any type</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-unit--DataSchema"><td><code>unit</code></td><td>Provides unit information that is used, e.g., in international science, engineering, and business.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-oneOf--DataSchema"><td><code>oneOf</code></td><td>Used to ensure that the data is valid against one of the specified schemas in the array.</td><td>optional</td><td><a>Array</a> of <a href="#dataschema"><code>DataSchema</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-enum--DataSchema"><td><code>enum</code></td><td>Restricted set of values provided as an array.</td><td>optional</td><td><a>Array</a> of any type</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-readOnly--DataSchema"><td><code>readOnly</code></td><td>Boolean value that is a hint to indicate whether a property interaction / value is read only (=true) or not (=false).</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#boolean"><code>boolean</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-writeOnly--DataSchema"><td><code>writeOnly</code></td><td>Boolean value that is a hint to indicate whether a property interaction / value is write only (=true) or not (=false).</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#boolean"><code>boolean</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-format--DataSchema"><td><code>format</code></td><td>Allows validation based on a format pattern such as "date-time", "email", "uri", etc. (Also see below.)</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table><p>The class <code>DataSchema</code> has the following subclasses:</p><ul><li><a href="#objectschema"><code>ObjectSchema</code></a></li>
<li><a href="#stringschema"><code>StringSchema</code></a></li>
<li><a href="#numberschema"><code>NumberSchema</code></a></li>
<li><a href="#nullschema"><code>NullSchema</code></a></li>
<li><a href="#booleanschema"><code>BooleanSchema</code></a></li>
<li><a href="#integerschema"><code>IntegerSchema</code></a></li>
<li><a href="#arrayschema"><code>ArraySchema</code></a></li></ul>
<p>The <code>format</code> string values are known from a fixed set of values and their corresponding format rules 
defined in [[?JSON-SCHEMA-VALIDATION]] (Section 7.3 Defined Formats in particluar). 
<span class="rfc2119-assertion" id="td-format-validation-known-values">
Servients MAY use the <code>format</code> value to perform additional validation accordingly. 
</span>
<span class="rfc2119-assertion" id="td-format-validation-other-values">
When a value that is not found in the known set of values is assigned to <code>format</code>, 
such a validation SHOULD succeed.
</span>
</p>
</section>
<section><h3><code>ArraySchema</code></h3><p>Metadata describing data of type <a>Array</a>. This <a>Subclass</a> is indicated by the value <code>array</code> assigned to <code>type</code> in <code>DataSchema</code> instances.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-items--ArraySchema"><td><code>items</code></td><td>Used to define the characteristics of an array.</td><td>optional</td><td><a href="#dataschema"><code>DataSchema</code></a> or <a>Array</a> of <a href="#dataschema"><code>DataSchema</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-minItems--ArraySchema"><td><code>minItems</code></td><td>Defines the minimum number of items that have to be in the array.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#unsignedInt"><code>unsignedInt</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-maxItems--ArraySchema"><td><code>maxItems</code></td><td>Defines the maximum number of items that have to be in the array.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#unsignedInt"><code>unsignedInt</code></a></td></tr></tbody></table></section>
<section><h3><code>BooleanSchema</code></h3><p>Metadata describing data of type <code>boolean</code>. This <a>Subclass</a> is indicated by the value <code>boolean</code> assigned to <code>type</code> in <code>DataSchema</code> instances.</p></section>
<section><h3><code>NumberSchema</code></h3><p>Metadata describing data of type <code>number</code>. This <a>Subclass</a> is indicated by the value <code>number</code> assigned to <code>type</code> in <code>DataSchema</code> instances.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-minimum--NumberSchema"><td><code>minimum</code></td><td>Specifies a minimum numeric value. Only applicable for associated number or integer types.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#double"><code>double</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-maximum--NumberSchema"><td><code>maximum</code></td><td>Specifies a maximum numeric value. Only applicable for associated number or integer types.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#double"><code>double</code></a></td></tr></tbody></table></section>
<section><h3><code>IntegerSchema</code></h3><p>Metadata describing data of type <code>integer</code>. This <a>Subclass</a> is indicated by the value <code>integer</code> assigned to <code>type</code> in <code>DataSchema</code> instances.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-minimum--IntegerSchema"><td><code>minimum</code></td><td>Specifies a minimum numeric value. Only applicable for associated number or integer types.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#integer"><code>integer</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-maximum--IntegerSchema"><td><code>maximum</code></td><td>Specifies a maximum numeric value. Only applicable for associated number or integer types.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#integer"><code>integer</code></a></td></tr></tbody></table></section>
<section><h3><code>ObjectSchema</code></h3><p>Metadata describing data of type <code>object</code>. This <a>Subclass</a> is indicated by the value <code>object</code> assigned to <code>type</code> in <code>DataSchema</code> instances.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-properties--ObjectSchema"><td><code>properties</code></td><td>Data schema nested definitions.</td><td>optional</td><td><a>Map</a> of <a href="#dataschema"><code>DataSchema</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-required--ObjectSchema"><td><code>required</code></td><td>Defines which members of the object type are mandatory.</td><td>optional</td><td><a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table></section>
<section><h3><code>StringSchema</code></h3><p>Metadata describing data of type <code>string</code>. This <a>Subclass</a> is indicated by the value <code>string</code> assigned to <code>type</code> in <code>DataSchema</code> instances.</p></section>
<section><h3><code>NullSchema</code></h3><p>Metadata describing data of type <code>null</code>. This <a>Subclass</a> is indicated by the value <code>null</code> assigned to <code>type</code> in <code>DataSchema</code> instances. This Subclass only has one acceptable value, namely <code>null</code>. It can be used as part of a <code>oneOf</code> declaration, where it is used to indicate, that the data can also be <code>null</code>.</p></section>

      </section>
    
      <section id="sec-security-vocabulary-definition">
      <h2>Security Vocabulary Definitions</h2>

      <p>
      This specification provides a selection of well-established security mechanisms
      that are directly built into protocols eligable as <a>Protocol Bindings</a> for W3C WoT
      or are widely in use with those protocols.
      The current set of HTTP security schemes is partly based on 
      <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.1.md#securitySchemeObject">OpenAPI 3.0.1</a> (see also [[?OPENAPI]]). 
      However while the HTTP security schemes, <a>Vocabulary</a>, and syntax
      given in this specification share many similarities with OpenAPI, they are not compatible.
      </p>

        <section><h3><code>SecurityScheme</code></h3><p>Metadata describing the configuration of a security mechanism.  <span class="rfc2119-assertion" id="td-security-scheme-name">The value assigned to the name <code>scheme</code> MUST be defined within a <a>Vocabulary</a> included in the <a>Thing Description</a>, either in the standard <a>Vocabulary</a> defined in <a href="#sec-vocabulary-definition"></a> or in a <a>TD Context Extension</a>.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-at-type--SecurityScheme"><td><code>@type</code></td><td>JSON-LD keyword to label the object with semantic tags (or types).</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-scheme--SecurityScheme"><td><code>scheme</code></td><td>Identification of the security mechanism being configured.</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (e.g. <code>nosec</code>, <code>basic</code>, <code>cert</code>, <code>digest</code>, <code>bearer</code>, <code>pop</code>, <code>psk</code>, <code>public</code>, <code>oauth2</code>, or <code>apikey</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-description--SecurityScheme"><td><code>description</code></td><td>Provides additional (human-readable) information based on a default language.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-descriptions--SecurityScheme"><td><code>descriptions</code></td><td>Can be used to support (human-readable) information in different languages.</td><td>optional</td><td><a href="#multilanguage"><code>MultiLanguage</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-proxy--SecurityScheme"><td><code>proxy</code></td><td>URI of the proxy server this security configuration provides access to.  If not given, the corresponding security configuration is for the endpoint.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr></tbody></table><p>The class <code>SecurityScheme</code> has the following subclasses:</p><ul><li><a href="#publicsecurityscheme"><code>PublicSecurityScheme</code></a></li>
<li><a href="#popsecurityscheme"><code>PoPSecurityScheme</code></a></li>
<li><a href="#apikeysecurityscheme"><code>APIKeySecurityScheme</code></a></li>
<li><a href="#digestsecurityscheme"><code>DigestSecurityScheme</code></a></li>
<li><a href="#basicsecurityscheme"><code>BasicSecurityScheme</code></a></li>
<li><a href="#psksecurityscheme"><code>PSKSecurityScheme</code></a></li>
<li><a href="#oauth2securityscheme"><code>OAuth2SecurityScheme</code></a></li>
<li><a href="#bearersecurityscheme"><code>BearerSecurityScheme</code></a></li>
<li><a href="#certsecurityscheme"><code>CertSecurityScheme</code></a></li>
<li><a href="#nosecurityscheme"><code>NoSecurityScheme</code></a></li></ul>
</section>
<section><h3><code>NoSecurityScheme</code></h3><p>A security configuration corresponding to identified by the <a>Vocabulary Term</a> <code>nosec</code> (i.e., <code>"scheme": "nosec"</code>), indicating there is no authentication or other mechanism required to access the resource.</p></section>
<section><h3><code>BasicSecurityScheme</code></h3><p>Basic authentication security configuration identified by the <a>Vocabulary Term</a> <code>basic</code> (i.e., <code>"scheme": "basic"</code>), using an unencrypted username and password.  This scheme should be used with some other security mechanism providing confidentiality, for example, TLS.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-in--BasicSecurityScheme"><td><code>in</code></td><td>Specifies the location of security authentication information.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (one of <code>header</code>, <code>query</code>, <code>body</code>, or <code>cookie</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-name--BasicSecurityScheme"><td><code>name</code></td><td>Name for query, header, or cookie parameters.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table></section>
<section><h3><code>DigestSecurityScheme</code></h3><p>Digest authentication security configuration identified by the <a>Vocabulary Term</a> <code>digest</code> (i.e., <code>"scheme": "digest"</code>). This scheme is similar to basic authentication but with added features to avoid man-in-the-middle attacks.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-qop--DigestSecurityScheme"><td><code>qop</code></td><td>Quality of protection.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (one of <code>auth</code>, or <code>auth-int</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-in--DigestSecurityScheme"><td><code>in</code></td><td>Specifies the location of security authentication information.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (one of <code>header</code>, <code>query</code>, <code>body</code>, or <code>cookie</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-name--DigestSecurityScheme"><td><code>name</code></td><td>Name for query, header, or cookie parameters.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table></section>
<section><h3><code>APIKeySecurityScheme</code></h3><p><span class="at-risk">This section is at risk.</span></p><p>API key authentication security configuration identified by the <a>Vocabulary Term</a> <code>apikey</code> (i.e., <code>"scheme": "apikey"</code>).  This is for the case where the access token is opaque and is not using a standard token format.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-in--APIKeySecurityScheme"><td><code>in</code></td><td>Specifies the location of security authentication information.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (one of <code>header</code>, <code>query</code>, <code>body</code>, or <code>cookie</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-name--APIKeySecurityScheme"><td><code>name</code></td><td>Name for query, header, or cookie parameters.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table></section>
<section><h3><code>BearerSecurityScheme</code></h3><p>Bearer token authentication security configuration identified by the <a>Vocabulary Term</a> <code>bearer</code> (i.e., <code>"scheme": "bearer"</code>).  This scheme is intended for situations where bearer tokens are used independently of OAuth2.  If the <code>oauth2</code> scheme is specified it is not generally necessary to specify this scheme as well as it is implied.  For <code>format</code>, the value <code>jwt</code> indicates conformance with [[!RFC7519]], <code>jws</code> indicates conformance with [[!RFC7797]], <code>cwt</code> indicates conformance with [[!RFC8392]], and <code>jwe</code> indicates conformance with [[!RFC7516]], with values for <code>alg</code> interpreted consistently with those standards. <span class="rfc2119-assertion" id="td-security-bearer-format-extensions">Other formats and algorithms for bearer tokens MAY be specified in vocabulary extensions.</span>.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-authorization--BearerSecurityScheme"><td><code>authorization</code></td><td>URI of the authorization server.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-alg--BearerSecurityScheme"><td><code>alg</code></td><td>Encoding, encryption, or digest algorithm.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (e.g. <code>MD5</code>, <code>ES256</code>, or <code>ES512-256</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-format--BearerSecurityScheme"><td><code>format</code></td><td>Specifies format of security authentication information.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (e.g. <code>jwt</code>, <code>cwt</code>, <code>jwe</code>, or <code>jws</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-in--BearerSecurityScheme"><td><code>in</code></td><td>Specifies the location of security authentication information.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (one of <code>header</code>, <code>query</code>, <code>body</code>, or <code>cookie</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-name--BearerSecurityScheme"><td><code>name</code></td><td>Name for query, header, or cookie parameters.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table></section>
<section><h3><code>CertSecurityScheme</code></h3><p><span class="at-risk">This section is at risk.</span></p><p>Certificate-based asymmetric key security configuration conformant with [[!X509V3]] identified by the <a>Vocabulary Term</a> <code>cert</code> (i.e., <code>"scheme": "cert"</code>).</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-identity--CertSecurityScheme"><td><code>identity</code></td><td>Identifier providing information which can be used for selection or confirmation.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table></section>
<section><h3><code>PSKSecurityScheme</code></h3><p><span class="at-risk">This section is at risk.</span></p><p>Pre-shared key authentication security configuration identified by the <a>Vocabulary Term</a> <code>psk</code> (i.e., <code>"scheme": "psk"</code>).</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-identity--PSKSecurityScheme"><td><code>identity</code></td><td>Identifier providing information which can be used for selection or confirmation.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table></section>
<section><h3><code>PublicSecurityScheme</code></h3><p><span class="at-risk">This section is at risk.</span></p><p>Raw public key asymmetric key security configuration identified by the <a>Vocabulary Term</a> <code>public</code> (i.e., <code>"scheme": "public"</code>).</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-identity--PublicSecurityScheme"><td><code>identity</code></td><td>Identifier providing information which can be used for selection or confirmation.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table></section>
<section><h3><code>PoPSecurityScheme</code></h3><p><span class="at-risk">This section is at risk.</span></p><p>Proof-of-possession (PoP) token authentication security configuration identified by the <a>Vocabulary Term</a> <code>pop</code> (i.e., <code>"scheme": "pop"</code>). Here <code>jwt</code> indicates conformance with [[!RFC7519]], <code>jws</code> indicates conformance with [[!RFC7797]], <code>cwt</code> indicates conformance with [[!RFC8392]], and <code>jwe</code> indicates conformance with [[!RFC7516]], with values for <code>alg</code> interpreted consistently with those standards. <span class="rfc2119-assertion" id="td-security-pop-format-extensions">Other formats and algorithms for PoP tokens MAY be specified in vocabulary extensions.</span>.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-authorization--PoPSecurityScheme"><td><code>authorization</code></td><td>URI of the authorization server.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-alg--PoPSecurityScheme"><td><code>alg</code></td><td>Encoding, encryption, or digest algorithm.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (e.g. <code>MD5</code>, <code>ES256</code>, or <code>ES512-256</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-format--PoPSecurityScheme"><td><code>format</code></td><td>Specifies format of security authentication information.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (e.g. <code>jwt</code>, <code>cwt</code>, <code>jwe</code>, or <code>jws</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-in--PoPSecurityScheme"><td><code>in</code></td><td>Specifies the location of security authentication information.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (one of <code>header</code>, <code>query</code>, <code>body</code>, or <code>cookie</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-name--PoPSecurityScheme"><td><code>name</code></td><td>Name for query, header, or cookie parameters.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table></section>
<section><h3><code>OAuth2SecurityScheme</code></h3><p><span class="at-risk">This section is at risk.</span></p><p>OAuth2 authentication security configuration for systems conformant with [[!RFC6749]] and [[!RFC8252]], identified by the <a>Vocabulary Term</a> <code>oauth2</code> (i.e., <code>"scheme": "oauth2"</code>).  <span class="rfc2119-assertion" id="td-security-oauth2-implicit-flow">For the <code>implicit</code> flow <code>authorization</code> MUST be included.</span>  <span class="rfc2119-assertion" id="td-security-oauth2-password-client-flow">For the <code>password</code> and <code>client</code> flows <code>token</code> MUST be included.</span>  <span class="rfc2119-assertion" id="td-security-oauth2-code-flow">For the <code>code</code> flow both <code>authorization</code> and <code>token</code> MUST be included.</span>  If no <code>scopes</code> are defined in the <code>SecurityScheme</code> then they are considered to be empty.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-authorization--OAuth2SecurityScheme"><td><code>authorization</code></td><td>URI of the authorization server.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-token--OAuth2SecurityScheme"><td><code>token</code></td><td>URI of the token server.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-refresh--OAuth2SecurityScheme"><td><code>refresh</code></td><td>URI of the refresh server.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-scopes--OAuth2SecurityScheme"><td><code>scopes</code></td><td>Set of authorization scope identifiers provided as an array.  These are provided in tokens returned by an authorization server and associated with forms in order to identify what resources a client may access and how.  The values associated with a form should be chosen from those defined in an <code>OAuth2SecurityScheme</code> active on that form.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-flow--OAuth2SecurityScheme"><td><code>flow</code></td><td>Authorization flow.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (one of <code>implicit</code>, <code>password</code>, <code>client</code>, or <code>code</code>)</td></tr></tbody></table></section>

      </section>

      <section id="sec-hypermedia-vocabulary-definition">
      <h2>Hypermedia Controls Vocabulary Definitions</h2>

      <p>
        The present model provides a representation for (typed) Web links and Web forms exposed by
        a <a>Thing</a>. The <code>Link</code> class definition is reflecting a very common subset of the terms defined in
        Web Linking [[!RFC8288]]. The defined terms can be used, e.g., to describe the relation to another <a>Thing</a> such
        as a <i>Lamp Thing</i> is controlled by a <i>Switch Thing</i>. The <code>Form</code> class corresponds to a newly
        introduced form of hypermedia control to manipulate the state of <a>Things</a> (and other Web resources).
     </p>

        <section><h3><code>Link</code></h3><p>A link can be viewed as a statement of the form "<b><em>link context</em></b>  has a <b><em>relation type</em></b> resource at <b><em>link target</em></b>", where the optional <b><em>target attributes</em></b>  may further describe the resource.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-href--Link"><td><code>href</code></td><td>target IRI of a link or submission target of a form.</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-type--Link"><td><code>type</code></td><td>Target attribute providing a hint indicating what the media type [IANA-MEDIA-TYPES] of the result of dereferencing the link should be.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-rel--Link"><td><code>rel</code></td><td>A link relation type identifies the semantics of a link.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-anchor--Link"><td><code>anchor</code></td><td>By default, the context, or anchor, of a link conveyed in the Link header field is the URL of the representation it is associated with, as defined in RFC7231, Section 3.1.4.1, and is serialized as a URI.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr></tbody></table></section>
<section><h3><code>Form</code></h3><p>A form can be viewed as a statement of "To perform an <b><em>operation type</em></b> operation on <b><em>form context</b></em>, make a <b><em>request method</b></em> request to <b><em>submission target</b></em>" where the optional <b><em>form fields</b></em> may further describe the required request. In Thing Descriptions, the <b><em>form context</b></em> is the surrounding Object, such as Properties, Actions, and Events or the Thing itself for meta-interactions.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-op--Form"><td><code>op</code></td><td>Indicates the semantic intention of performing the operation(s) described by the form.

For example, the Property interaction allows get and set operations.  
The protocol binding may contain a form for the get operation and a different form for the set operation.  
The op attribute indicates which form is for which and allows the client to select the correct form for the operation required.

op can be assigned one or more interaction verb(s) each representing a semantic intention of an operation.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (one of <code>readproperty</code>, <code>writeproperty</code>, <code>observeproperty</code>, <code>unobserveproperty</code>, <code>invokeaction</code>, <code>subscribeevent</code>, <code>unsubscribeevent</code>, <code>readallproperties</code>, <code>writeallproperties</code>, <code>readmultipleproperties</code>, or <code>writemultipleproperties</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-href--Form"><td><code>href</code></td><td>target IRI of a link or submission target of a form.</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-contentType--Form"><td><code>contentType</code></td><td>Assign a content type based on a media type [[IANA-MEDIA-TYPES]] (e.g., 'text/plain') and potential parameters (e.g., 'charset=utf-8') for the media type.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-contentCoding--Form"><td><code>contentCoding</code></td><td>Content coding values indicate an encoding transformation that has been or can be applied to a representation. Content codings are primarily used to allow a representation to be compressed or otherwise usefully transformed without losing the identity of its underlying media type and without loss of information. Examples of content coding include "gzip", "deflate", etc. .</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-subprotocol--Form"><td><code>subprotocol</code></td><td>Indicates the exact mechanism by which an interaction will be accomplished for a given protocol when there are multiple options.
     
For example, for HTTP and Events, it indicates which of several available mechanisms should be used for asynchronous notifications such as long polling, websub (also see https://www.w3.org/TR/websub/), or server sent events (also see https://www.w3.org/TR/eventsource/). Please note that there is no restriction on the sub-protocol selection and other mechanisms can also be announced by this subprotocol term.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (e.g. <code>longpoll</code>, <code>websub</code>, or <code>sse</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-security--Form"><td><code>security</code></td><td>Set of security definition names, chosen from those defined in securityDefinitions.  These must all be satisfied for access to resources.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-scopes--Form"><td><code>scopes</code></td><td>Set of authorization scope identifiers provided as an array.  These are provided in tokens returned by an authorization server and associated with forms in order to identify what resources a client may access and how.  The values associated with a form should be chosen from those defined in an <code>OAuth2SecurityScheme</code> active on that form.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-response--Form"><td><code>response</code></td><td>This optional term can be used if, e.g., the output communication metadata differ from input metdata (e.g., output contentType differ from the
     input contentType). The response name contains metadata that is only valid for the reponse messages.</td><td>optional</td><td><a href="#expectedresponse"><code>ExpectedResponse</code></a></td></tr></tbody></table>
<p>The list of possible operation types of a form is fixed. As of this version of the specification, it only includes the
well-known types necessary to implement the WoT interaction model described in
[[WOT-ARCHITECTURE]]. Future versions of the standard may extend this list but
<span class="rfc2119-assertion" id="well-known-operation-types-only">
operations types SHOULD NOT be arbitrarily set by servients
</span>.
</p>

<p>
The optional <code>response</code> name-value pair can be used to provide metadata for the expected response message.
With the core vocabulary, it only includes content type information, but TD Context Extensions could be applied. 
<span class="rfc2119-assertion" id="td-expectedResponse-default-contentType">
If no <code>response</code> name-value pair is provided, it MUST be assumed that the content type of the 
response is equal to the content type assigned to the Form instance.</span>
Note that <code>contentType</code> within an <code>ExpectedResponse</code> <a>Class</a> does not have a <a>Default Value</a>. 
For instance, if the value of the content type of the form is <code>application/xml</code> the assumed value of the content type of 
the response will be also <code>application/xml</code>.
</p>


<p>
In some use cases, input and output data might be represented in a different form, for instance an Action that accepts JSON, but returns an image. In such a case, the optional <code>response</code> name-value pair can describe the content type of the expected response.
<span class="rfc2119-assertion" id="td-expectedResponse-contentType">
If the content type of the expected response differs from the content type of the form,
the <code>Form</code> instance MUST include a name-value pair with the name <code>response</code>.
</span> 
For instance, an <code>ActionAffordance</code> could only accept <code>application/json</code> for its input data, while it
will respond with an <code>image/jpeg</code> content type for its output data. In that case the content types differ and the 
<code>response</code> name-value pair has to be used to provide response content type (<code>image/jpeg</code>) information 
to the <a>Consumer</a>.

</p>




<p>Possible values for the <code>contentCoding</code> property can be found e.g. in
the <a href="https://www.iana.org/assignments/http-parameters/http-parameters.xhtml#content-coding">
IANA HTTP content coding registry</a>.
</p>
</section>
<section><h3><code>ExpectedResponse</code></h3><p>Communication metadata describing the expected response message.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-contentType--ExpectedResponse"><td><code>contentType</code></td><td>Assign a content type based on a media type [[IANA-MEDIA-TYPES]] (e.g., 'text/plain') and potential parameters (e.g., 'charset=utf-8') for the media type.</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table></section>

      </section>

    </section>

    <section id="sec-default-values">
      <h3>Default Value Definitions</h3>

      <p>
          <span class="rfc2119-assertion" id="td-vocabulary-defaults">
            When assignments in a TD are missing, a <a>TD Processor</a> MUST follow
            the <a>Default Value</a> assignments expressed in the table of
            <a href="#sec-default-values"></a>.
          </span>
      </p>
      
      <p>
          The following table gives all <a>Default Values</a> defined in the
          <a>TD Information Model</a>.
      </p>

      <table class="def">
        <thead>
            <tr>
                <th><a>Class</a></th>
                <th><a>Vocabulary Term</a></th>
                <th><a>Default Value</a></th>
                <th>Comment</th>
            </tr>
        </thead>
        <tbody>
            <tr class="rfc2119-default-assertion" id="td-default-contentType">
                <td><code>Form</code>
                </td>
                <td>
                    <code>contentType</code>
                </td>
                <td><code>application/json</code></td>
                <td></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-readOnly">
                <td><code>DataSchema</code></td>
                <td>
                    <code>readOnly</code>
                </td>
                <td><code>false</code></td>
                <td></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-idempotent">
                <td><code>DataSchema</code></td>
                <td>
                    <code>writeOnly</code>
                </td>
                <td><code>false</code></td>
                <td></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-safe">
                <td><code>ActionAffordance</code></td>
                <td>
                    <code>safe</code>
                </td>
                <td><code>false</code></td>
                <td></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-idempotent">
                <td><code>ActionAffordance</code></td>
                <td>
                    <code>idempotent</code>
                </td>
                <td><code>false</code></td>
                <td></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-op-properties">
                <td><code>Form</code></td>
                <td>
                    <code>op</code>
                </td>
                <td><a>Array</a> of <code>string</code> with the elements <code>readproperty</code> and <code>writeproperty</code><br>
                </td>
                <td>If defined within an instance of <code>PropertyAffordance</code></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-op-actions">
                <td><code>Form</code></td>
                <td>
                    <code>op</code>
                </td>
                <td><code>invokeaction</code></td>
                <td>If defined within an instance of <code>ActionAffordance</code></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-op-events">
                <td><code>Form</code></td>
                <td>
                    <code>op</code>
                </td>
                <td><code>subscribeevent</code></td>
                <td>If defined within an instance of <code>EventAffordance</code></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-in-basic">
                <td>
                  <code>BasicSecurityScheme</code>
                </td>
                <td>
                    <code>in</code>
                </td>
                <td><code>header</code></td>
                <td></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-in-digest">
                <td>
                  <code>DigestSecurityScheme</code>
                </td>
                <td>
                    <code>in</code>
                </td>
                <td><code>header</code></td>
                <td></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-in-bearer">
                <td>
                  <code>BearerSecurityScheme</code>
                </td>
                <td>
                    <code>in</code>
                </td>
                <td><code>header</code></td>
                <td></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-in-pop">
                <td>
                  <code>PoPSecurityScheme</code>
                </td>
                <td>
                    <code>in</code>
                </td>
                <td><code>header</code></td>
                <td></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-in-apikey">
                <td><code>APIKeySecurityScheme</code></td>
                <td>
                    <code>in</code>
                </td>
                <td><code>query</code></td>
                <td></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-qop">
                <td><code>DigestSecurityScheme</code></td>
                <td>
                    <code>qop</code>
                </td>
                <td><code>auth</code></td>
                <td></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-alg">
                <td>
                  <code>BearerSecurityScheme</code></br>
                </td>
                <td>
                    <code>alg</code>
                </td>
                <td><code>ES256</code></td>
                <td></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-alg-pop">
                <td>
                  <code>PoPSecurityScheme</code>
                </td>
                <td>
                    <code>alg</code>
                </td>
                <td><code>ES256</code></td>
                <td></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-format">
                <td>
                  <code>BearerSecurityScheme</code></br>
                </td>
                <td>
                    <code>format</code>
                </td>
                <td><code>jwt</code></td>
                <td></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-format-pop">
                <td>
                  <code>PoPSecurityScheme</code>
                </td>
                <td>
                    <code>format</code>
                </td>
                <td><code>jwt</code></td>
                <td></td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-flow">
                <td><code>OAuth2SecurityScheme</code></td>
                <td>
                    <code>flow</code>
                </td>
                <td><code>implicit</code></td>
                <td></td>
            </tr>
        </tbody>
    </table>
    </section>

    </section>

  <section id="sec-td-serialization" class="normative">
  <h1>TD Representation Format</h1>

  <p>
    WoT Thing Descriptions represent Things and are modeled and structured based on
  <a href="#sec-vocabulary-definition"></a>.
  This section defines a JSON-based representation format for <a>Things</a>,
  a serialization of instances of the <a>Class</a> <code>Thing</code> defined by the <a>TD Information Model</a>.
  </p>

  <p>
    <span class="rfc2119-assertion" id="td-processor-serialization">
        A <a>TD Processor</a> MUST be able to serialize <a>Thing Descriptions</a>
        into the JSON format [[!RFC8259]] and deserialize <a>Thing Descriptions</a>
        from that format, according to the rules noted in
        <a href="#td-basic-types-mapping"></a> and
        <a href="#td-class-serialization"></a>.
    </span>
  </p>

  <p>
  The JSON serialization of the <a>TD Information Model</a> is aligned with
  the syntax of JSON-LD 1.1 [[?json-ld11]]
  in order to streamline semantic evaluation.
  Hence, the TD representation format can be processed either as raw JSON
  or with a JSON-LD 1.1 processor,
  as further detailed in <a href="#note-jsonld11-processing"></a>.
  </p>

<p>
In order to support interoperable internationalization,
<span class="rfc2119-assertion" id="td-json-open">TDs MUST be serialized according to the 
requirements defined in Section 8.1 of RFC8259 [[!RFC8259]] for open ecosystems.</span>
In summary, this requires the following:
<ul>
<li><span class="rfc2119-assertion" id="td-json-open_utf-8">TDs MUST be encoded using UTF-8 [[!RFC3629]].</span</li>
<li><span class="rfc2119-assertion" id="td-json-open_no-byte-order">Implementations MUST NOT 
  add a byte order mark (U+FEFF) to the beginning of a TD document.</span></li>
<li><span class="rfc2119-assertion" id="td-json-open_accept-byte-order"><a>TD Processors</a> MAY ignore
  the presence of a byte order mark rather than treating it as an error.</span></li>
</ul>
</p>

<section id="td-basic-types-mapping">
<h2>Mapping to JSON Types</h2>

  <p>
    The <a>TD Information Model</a> is constructed,
    so that there is an easy mapping between model <a>Objects</a> and JSON types.
    Every <a>Class</a> instances maps to a JSON object,
    where each name-value pair of the <a>Class</a> instance
    is a member of the JSON object.
  </p>

  <p>
    Every <a>Simple Type</a> mentioned in
    <a href="#class-definitions"></a> (i.e., <code>string</code>, <code>anyURI</code>,
    <code>dateTime</code>, <code>integer</code>, <code>unsignedInt</code>,
    <code>double</code>, and <code>boolean</code>) maps to a primitive JSON 
    type (string, number, boolean), as per the rules listed below. These
    rules apply to values in name-value pairs:
  </p>
  <ul>
  <li><span class="rfc2119-assertion" id="td-string-type">
        Values that are of type <code>string</code> or
        <code>anyURI</code> MUST be serialized as JSON strings.
  </span></li>
  <li><span class="rfc2119-assertion" id="td-datetime-type">
        Values that are of type <code>dateTime</code>
        MUST be serialized as JSON strings  following the timestamp format
        specified by [[RFC3339]].
    </span>
    <span class="rfc2119-assertion" id="td-datetime-recommended-type">
        Timestamps included in a TD SHOULD have
        the lexical form <code><i>YYYY</i>-<i>MM</i>-<i>DD</i>T<i>hh</i>:<i>mm</i>:<i>ss</i>Z</code>,
        where <code><i>YYYY</i></code>, <code><i>MM</i></code> and <code><i>DD</i></code>
        respectively encode a year, a month and a day (i.e. a date) and where
        <code><i>hh</i></code>, <code><i>mm</i></code> and <code><i>ss</i></code>
        respectively encode hours, minutes and seconds (i.e. a time).
  </span> Other elements of the lexical form (<code>-</code>, <code>T</code>, <code>Z</code>)
  are verbatim. It implies that implementations need to support time zones, <code>Z</code>
  being interpreted as the UTC+00 time zone.</li>
  <li><span class="rfc2119-assertion" id="td-integer-type">
        Values that are of type <code>integer</code> or <code>unsignedInt</code>
        MUST be serialized as JSON numbers without a fraction or exponent part.
  </span></li>
  <li><span class="rfc2119-assertion" id="td-number-type">
        Values that are of type <code>double</code>
        MUST be serialized as JSON number.
  </span></li>
  <li><span class="rfc2119-assertion" id="td-boolean-type">
        Values that are of type <code>boolean</code>
        MUST be serialized as JSON boolean.
  </span></li>
  </ul>
  
  <p>
    Every complex type of the <a>TD Information Model</a> (i.e., <a>Arrays</a>, <a>Maps</a>, and <a>Class</a> instances)
    maps to a structured JSON type (array and object), as per the rules listed below:
  </p>
  <ul>
  <li><span class="rfc2119-assertion" id="td-array-type">
        A value of type <a>Array</a> MUST be serialized as JSON array,
        with each value of the name-value pairs as element of the JSON array
        ordered by the numeric name of the pair.
  </span></li>
  <li><span class="rfc2119-assertion" id="td-map-type">
        A value of type <a>Map</a> MUST be serialized as JSON object,
        with each name-value pair as member of the JSON object.
  </span></li>
  <li><span class="rfc2119-assertion" id="td-class-type">
        A <a>Class</a> instance MUST be serialized as JSON object,
        following the detailed rules given individually in <a href="#td-class-serialization"></a>.
  </span></li>
  </ul>

</section>
  
<section id="omitting-default-values">
<h2>Omitting Default Values</h2>

  <p>
  A Thing Description serialization may omit <a>Vocabulary Term</a>
  for which <a>Default Values</a> are defined,
  as listed in the table given in <a href="#sec-default-values"></a>.
  </p>

  <p>
  The following example shows the TD instance from
  <a href="#simple-thing-description-sample">Example 1</a>
  with a checkbox to also include the members with <a>Default Values</a> (=checkbox checked).
  These members can be omitted (=checkbox unchecked) to simplify the TD serialization.
  Note that a <a>TD Processor</a> interprets these omitted members identically
  as if they were explicitly present with a given <a>Default Value</a>.
  </p>

  <aside class="example with-default">
    <div class="with-default-control">
      <input type="checkbox"/>
      <span><i>with Default Values</i></span>
    </div>
<pre>{
    "@context": "https://www.w3.org/2019/wot/td/v1",
    "id": "urn:dev:ops:32473-WoTLamp-1234",
    "title": "MyLampThing",
    "securityDefinitions": {
        "basic_sc": {
            "scheme": "basic"
        }
    },
    "security": [
        "basic_sc"
    ],
    "properties": {
        "status": {
            "type": "string",
            "forms": [{
                "href": "https://mylamp.example.com/status"
            }]
        }
    },
    "actions": {
        "toggle": {
            "forms": [{
                "href": "https://mylamp.example.com/toggle"
            }]
        }
    },
    "events": {
        "overheating": {
            "data": {
                "type": "string"
            },
            "forms": [{
                "href": "https://mylamp.example.com/oh",
                "subprotocol": "longpoll"
            }]
        }
    }
}
</pre>
<pre>{
    "@context": "https://www.w3.org/2019/wot/td/v1",
    "id": "urn:dev:ops:32473-WoTLamp-1234",
    "title": "MyLampThing",
    "securityDefinitions": {
        "basic_sc": {
            "scheme": "basic",
            "in": "header"
        }
    },
    "security": [
        "basic_sc"
    ],
    "properties": {
        "status": {
            "type": "string",
            "readOnly" : false,
            "writeOnly" : false,
            "forms": [{
                "op": [
                    "readproperty",
                    "writeproperty"
                ],
                "href": "https://mylamp.example.com/status",
                "contentType": "application/json"
            }]
        }
    },
    "actions": {
        "toggle": {
            "safe": false,
            "idempotent": false,
            "forms": [{
                "op": "invokeaction",
                "href": "https://mylamp.example.com/toggle",
                "contentType": "application/json"
            }]
        }
    },
    "events": {
        "overheating": {
            "data": {
                "type": "string",
                "readOnly" : false,
                "writeOnly" : false
            },
            "forms": [{
                "op": "subscribeevent",
                "href": "https://mylamp.example.com/oh",
                "contentType": "application/json",
                "subprotocol": "longpoll"
            }]
        }
    }
}
</pre>
    </aside>

    <p>
    Please note that, depending on the <a>Protocol Binding</a> used,
    additional protocol-specific <a>Vocabulary Terms</a> may apply.
    They may also have associated <a>Default Values</a>,
    and hence can also be omitted as explained in this subsection.
    Further information can be found in <a href="#protocol-bindings"></a>.
    </p>
  </section>

<section id="td-class-serialization">
<h2>Information Model Serialization</h2>

<section id="sec-thing-as-a-whole-json">
<h3>Thing Root Object</h3>

  <p>
    A Thing Description is a data structure rooted at an <a>Object</a>
    of type <a href="#thing"><code>Thing</code></a>.
    In turn, a JSON serialization of the Thing Description
    is a JSON object, which is the root of a syntax tree constructed
    from the <a>TD Information Model</a>.
  </p>

  <p><span class="rfc2119-assertion" id="td-context">
  The root element of a <a>TD Serialization</a> MUST be a JSON object that
  includes a member with the name <code>@context</code> and a value of type
  string or array that equals or respectively contains <code>https://www.w3.org/2019/wot/td/v1</code>.
  </span></p>
  
  <p>
  In general, this URI is used to identify the
  TD representation format version defined by this specification.
  For JSON-LD processing [[?json-ld11]], this URI specifies the Thing Description context file.
  An <code>@context</code> of type array indicates <a>TD Context Extensions</a> (see <a href="sec-context-extensions"></a> for details).
  </p>

<pre class="example">
{  
    "@context": "https://www.w3.org/2019/wot/td/v1",
    ...
}
</pre>

  <p><span class="rfc2119-assertion" id="td-context-toplevel">
    All name-value pairs of an instance of <code>Thing</code>,
    where the name is a <a>Vocabulary Term</a> in the <a>Signature</a> of <code>Thing</code>,
    MUST be serialized as JSON members of the root object.
  </span></p>

  <p>
    A TD snippet for a serialized root object including all mandatory and optional members is given below:
  </p>

<pre class="example" id="thing-serialization-sample" title="Sample of Thing serializations">
{
    "@context": "https://www.w3.org/2019/wot/td/v1",
    "@type": "Thing",
    "id": "urn:dev:ops:32473-Thing-1234",
    "title": "MyThing",
    "titles": {...},
    "description": "Human readable information.",
    "descriptions": {...},
    "support": "mailto:support@example.com",
    "version" : {...},
    "created" : "2018-11-14T19:10:23.824Z",
    "modified" : "2019-06-01T09:12:43.124Z",
    "securityDefinitions": {...},
    "security": ...,
    "base": "https://servient.example.com/",
    "properties": {...},
    "actions": {...},
    "events": {...},
    "links": [...],
    "forms": [...]
}
</pre>

  <p><span class="rfc2119-assertion" id="td-objects">
  All values assigned to
  <code>version</code>,
  <code>securityDefinitions</code>,
  <code>properties</code>,
  <code>actions</code>, and
  <code>events</code>
  in an instance of the <a>Class</a> <code>Thing</code>
  MUST be serialized as JSON objects.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-arrays">
  All values assigned to
  <code>links</code>, and
  <code>forms</code>
  in an instance of the <a>Class</a> <code>Thing</code>
  MUST be serialized as JSON arrays containing JSON objects
  as defined in <a href="#link-serialization-json"></a>
  and <a href="#form-serialization-json"></a>, respectively.
  </span></p>

  <p>
  <span class="rfc2119-assertion" id="td-security-activation">
  The value assigned to
  <code>security</code>
  in an instance of <a>Class</a> <code>Thing</code>
  MUST be serialized as JSON string or as JSON array whose elements are JSON strings.
  </span>
  </p>

</section> <!-- end of id="sec-thing-as-a-whole-json"-->

<section id="titles-descriptions-serialization-json">
<h3>Human-Readable Metadata</h3>

  <p>
    JSON members named <code>title</code> and <code>description</code> are 
    used within a TD document to provide human-readable metadata.
    They can be used as comments for developers inspecting a TD document
    or as display texts for user interface.
  </p>

  <p>
    As defined in <a href="#thing"></a>, the base text direction used to display human-readable metadata
    is inferred from the default language.
    The default language is defined by the value assigned to <code>@language</code> in the <code>@context</code>.
    <span class="rfc2119-assertion" id="td-context-default-language-direction-independence">
      Each human-readable string value MUST be processed independently, using the base
      direction defined for that string.
    </span>
    In other words, a <a>TD Processor</a> cannot carry forward changes in direction from one string to another,
    or infer direction for one string from another one elsewhere in the TD.
  </p>

  <p class="note">
    Being aware that Strings on the Web [[?string-meta]] suggests 
    to use Localizable dictionary structure as the best practice to support base 
    direction metadata, given that Thing Description format is based on JSON-LD 1.1 
    [[?json-ld11]], the approach described above is considered most appropriate 
    at the time of this publication. When JSON-LD 1.1 adopts the design for supporting 
    base direction metadata advised by [[?string-meta]] and implement as a feature 
    in the future, Thing Description format should be updated to take advantage of 
    that feature for cleanly supporting base direction metadata.
  </p>
  
  <p>
  A TD snippet using <code>title</code> and <code>description</code> is 
  shown below. The default language is set to <code>en</code> through the
  definition of the <code>@language</code> member within a JSON object in the <code>@context</code> array.
  </p>

<pre class="example">
{
    "@context": [
        "https://www.w3.org/2019/wot/td/v1",
        { "@language" : "en" }
    ],
    "title": "MyThing",
    "description": "Human readable information.",
    ...
    "properties": {
        "on": {
            "title" : "On/Off",
            "type": "boolean",
            "forms": [...]
        },
        "status": {
            "title" : "Status",
            "type": "object",
            ...
            "forms": [...]
        }
    },
    ...
}
</pre>

  <p>
  The JSON members named <code>titles</code> and <code>descriptions</code> are 
  used within the TD document to provide human-readable metadata
  in multiple languages within a single TD document.
  <span class="rfc2119-assertion" id="td-multi-languages">
    All name-value pairs of a <code>MultiLanguage</code> <a>Map</a>
    MUST be serialized as members of a JSON object,
    where the name is a well-formed language tag as defined by [[!BCP47]]
    and the value is a human-readable string in the language indicated by the tag.
  </span>
  See <a href="#multilanguage"></a> for details.
  <span class="rfc2119-assertion" id="td-multi-languages-consistent">
    All <code>MultiLanguage</code> object within a TD document
    SHOULD contain the same set of language members.
  </span>
  </p>

  <p>A TD snippet using <code>titles</code> and <code>descriptions</code> at different levels is given below:</p>
    
<pre class="example">
{
    "@context": "https://www.w3.org/2019/wot/td/v1",
    "title": "MyThing",
    "titles": {
        "en":"MyThing",
        "de": "MeinDing",
        "ja" : "私の物",
        "zh-Hans" : "我的东西", 
        "zh-Hant" : "我的東西"
    },
    "descriptions": {
        "en":"Human readable information.",
        "de": "Menschenlesbare Informationen.",
        "ja" : "人間が読むことができる情報",
        "zh-Hans" : "人们可阅读的信息", 
        "zh-Hant" : "人們可閱讀的資訊"
    },
    ...
    "properties": {
        "on": {
            "titles": {
                "en": "On/Off",
                "de": "An/Aus",
                "ja": "オンオフ",
                "zh-Hans": "开关",
                "zh-Hant": "開關" },
            "type": "boolean",
            "forms": [...]
        },
        "status": {
            "titles": {
                "en": "Status",
                "de": "Zustand",
                "ja": "状態",
                "zh-Hans": "状态",
                "zh-Hant": "狀態" },
            "type": "object",
            ...
            "forms": [...]
        }
    },
    ...
}
</pre>
    
  <p>
  TD instances may also combine the use of <code>title</code> and <code>description</code>
  with <code>titles</code> and <code>descriptions</code>.
  <span class="rfc2119-assertion" id="td-title-description">
    When <code>title</code> and <code>titles</code> or
    <code>description</code> and <code>descriptions</code>
    are present within the same JSON object,
    the values of <code>title</code> and <code>description</code> MAY be seen as the default text.
  </span>
  <span class="rfc2119-assertion" id="td-titles-descriptions">
    When <code>title</code> and <code>titles</code> or
    <code>description</code> and <code>descriptions</code>
    are present in a TD document,
    each <code>title</code> and <code>description</code> member
    SHOULD have a corresponding <code>titles</code> and <code>descriptions</code> member, respectively.
  </span>
  The the language of the default text is indicated by the default language,
  which is usually set by the creator of the Thing Description instance.
  </p>
    
<pre class="example">
{
    "@context": [
        "https://www.w3.org/2019/wot/td/v1",
        { "@language" : "de" }
    ],
    "title": "MyThing",
    "titles": {
        "en":"MyThing",
        "de": "MeinDing",
        "ja" : "私の物",
        "zh-Hans" : "我的东西", 
        "zh-Hant" : "我的東西"
    },
    "description": "Menschenlesbare Informationen.",
    "descriptions": {
        "en":"Human readable information.",
        "de": "Menschenlesbare Informationen.",
        "ja" : "人間が読むことができる情報",
        "zh-Hans" : "人们可阅读的信息", 
        "zh-Hant" : "人們可閱讀的資訊"
    },
    ...
    "properties": {
        "on": {
            "title" : "An/Aus",
            "titles": {
                "en": "On/Off",
                "de": "An/Aus",
                "ja": "オンオフ",
                "zh-Hans": "开关",
                "zh-Hant": "開關" },
            "type": "boolean",
            "forms": [...]
        },
        "status": {
            "title" : "Zustand",
            "titles": {
                "en": "Status",
                "de": "Zustand",
                "ja": "状態",
                "zh-Hans": "状态",
                "zh-Hant": "狀態" },
            "type": "object",
            ...
            "forms": [...]
        }
    },
    ...
}
</pre>

<p>
  Another possibility to set the default language is through a language negotiation mechanism,
  such as the <code>Accept-Language</code> header field of HTTP.
  <span class="rfc2119-assertion" id="td-ns-multilanguage-content-negotiation">
    In cases where the default language has been negotiated,
    an <code>@language</code> member MUST be present to indicate the result of the negotiation and the corresponding default language of the returned content.
  </span>
  <span class="rfc2119-assertion" id="td-ns-multilanguage-content-negotiation-no-multi">
    When the default language has been negotiated successfully,
    TD documents SHOULD include the appropriate matching values for the members <code>title</code> and <code>description</code>
    in preference to <code>MultiLanguage</code> objects in <code>titles</code> and <code>descriptions</code> members.
  </span>
  <span class="rfc2119-assertion" id="td-ns-multilanguage-content-negotiation-optional">
    Note however that Things MAY choose to not support such dynamically-generated TDs
    nor to support language negotiation (e.g., because of resource constraints).
  </span>
  </p>

</section> <!-- end of id="human-readable-serialization-json"-->

<section id="version-serialization-json">
<h3><code>version</code></h3>

  <p><span class="rfc2119-assertion" id="td-version">
    All name-value pairs of an instance of <code>VersionInfo</code>,
    where the name is a <a>Vocabulary Term</a> included in the <a>Signature</a> of <code>VersionInfo</code>,
    MUST be serialized as JSON members with the <a>Vocabulary Term</a> as name.
  </span></p>

  
  <p>A TD snippet of a version information object is given below:</p>

<pre class="example">
{
    ...
    "version": { "instance": "1.2.1" },
    ...
}
</pre>

  <p>
        The <code>version</code> member is intended as container for additional application- and/or device-specific version information based 
        on <a>TD Context Extensions</a>. See <a href="#semantic-annotations"></a> for details.
  </p>

</section> <!-- end of id="version-json"-->

<section id="security-serialization-json">
<h3><code>securityDefinitions</code> and <code>security</code></h3>

  <p>
    In a <code>Thing</code> instance, the value assigned to
    <code>securityDefinitions</code> is a <a>Map</a> of instances of
    <code>SecurityScheme</code>.
    <span class="rfc2119-assertion" id="td-security">
    All name-value pairs of a <a>Map</a> of <code>SecurityScheme</code> instances
    MUST be serialized as members of the JSON object that results from serializing the <a>Map</a>;
    the name of a pair MUST be serialized as a JSON string and the value of the pair, an
    instance of <code>SecurityScheme</code>, MUST be serialized as a JSON object.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-security-schemes">
    All name-value pairs of an instance of one of the <a>Subclasses</a> of
    <code>SecurityScheme</code>,
    where the name is a <a>Vocabulary Term</a> included in the
    <a>Signature</a> of that <a>Subclass</a> or in the <a>Signature</a> of
    <code>SecurityScheme</code>, MUST be serialized as members of the JSON object
    that results from serializing the <code>SecurityScheme</code> <a>Subclass</a>'s
    instance, with the <a>Vocabulary Term</a> as name.
  </span></p>

  <p>
  The following TD snippet shows a simple security configuration specifying
  basic username/password authentication in the header.
  The value given for <code>in</code> is actually the <a>Default Value</a> (<code>header</code>)
  and could be omitted.
  A named security configuration must be given
  in the <code>securityDefinitions</code> map.
  That definition must be activated by including its JSON name in the
  <code>security</code> member, which can be of type string when only one definition is activated.
  </p>

<pre class="example" id="security-basic-example">
    ...
    "securityDefinitions": {
        "basic_sc": {
            "scheme": "basic",
            "in": "header"
        }
    },
    "security": "basic_sc",
    ...
</pre>

  <p>
  Here is a more complex example: a TD snippet showing digest authentication
  on a proxy combined with bearer token authentication on the <a>Thing</a>.
  In the <code>digest</code> scheme, the <a>Default Value</a> of <code>in</code>
  (i.e., <code>header</code>) is omitted, but still applies.
  Note that the corresponding private security configuration
  such as username/password and tokens must be configured in the <a>Consumer</a>
  to interact successfully.
  When activating multiple security definitions, the <code>security</code> member becomes an array.
  </p>

<pre class="example" id="security-digest-example">
    ...
    "securityDefinitions": {
        "proxy_sc": {
            "scheme": "digest",
            "proxy": "https://portal.example.com/"
        },
        "bearer_sc": {
            "in":"header",
            "scheme": "bearer",
            "format": "jwt",
            "alg": "ES256",
            "authorization": "https://servient.example.com:8443/"
        }
    },
    "security": ["proxy_sc", "bearer_sc"],
    ...
</pre>

  <p>
  Security configuration in the TD is mandatory.
  <span class="rfc2119-assertion" id="td-security-mandatory">
  At least one security definition MUST be activated through the
  <code>security</code> array at the Thing level (i.e., in the TD root object).
  </span>
  This configuration can be seen as the default security mechanism required to interact with the <a>Thing</a>.
  <span class="rfc2119-assertion" id="td-security-overrides">
  Security definitions MAY also be activated at the form level by including a
  <code>security</code> member in form objects,
  which overrides (i.e., completely replace) all definitions activated at the Thing level.
  </span>
  </p>

  <p>
  The <code>nosec</code> security scheme is provided for the case that 
  no security is needed.
  The minimal security configuration for a <a>Thing</a> is activation
  of the <code>nosec</code> security scheme 
  at the Thing level, as shown in the following example:
  </p>

<pre class="example">
{
    "@context": "https://www.w3.org/2019/wot/td/v1",
    "id": "urn:dev:ops:32473-Thing-1234",
    "title": "MyThing",
    "description": "Human readable information.",
    "support": "https://servient.example.com/contact",
    "securityDefinitions": { "nosec_sc": { "scheme": "nosec" }},
    "security": "nosec_sc",
    "properties": {...},
    "actions": {...},
    "events": {...},
    "links": [...]
}
</pre> 

  <p>
  To give a more complex example, 
  suppose we have a <a>Thing</a> where all <a>Interaction Affordances</a>
  require basic authentication except for one, for which
  no authentication is required.
  For the <code>status</code> Property and the <code>toggle</code> Action,
  <code>basic</code> authentication is required and defined at the Thing level.
  For the <code>overheating</code> Event, however,
  no authentication is required, and hence the security configuration is
  overridden at the form level.
  </p>

<pre class="example">
{
    ...
    "securityDefinitions": {
        "basic_sc": {"scheme": "basic"},
        "nosec_sc": {"scheme": "nosec"}
    },
    "security": ["basic_sc"],
    ...
    "properties": {
        "status": {
            ...
            "forms": [{
                "href": "https://mylamp.example.com/status"
            }]
        }
    },
    "actions": {
        "toggle": {
            ...
            "forms": [{
                "href": "https://mylamp.example.com/toggle"
            }]
        }
    },
    "events": {
        "overheating": {
            ...
            "forms": [{
                "href": "https://mylamp.example.com/oh",
                "security": ["nosec_sc"]
            }]
        }
    }
}
</pre>

  <p>
  Security configurations can also can be specified for different forms
  within the same <a>Interaction Affordance</a>. This may be required for devices that support
  multiple protocols, for example HTTP and CoAP [[?RFC7252]], which support different
  security mechanisms.  This is also useful when alternative authentication
  mechanisms are allowed.  Here is a TD snippet demonstrating three possible
  ways to activate a Property affordance: via HTTPS with basic authentication, via HTTPS
  via digest authentication, or via CoAPS with a pre-shared key (PSK).
  In other words, 
  the use of different security configurations within multiple forms
  provides a way to combine security mechanisms in an "OR" fashion.
  In contrast, putting multiple security configurations in the same
  <code>security</code> member combines them in an "AND" fashion, 
  since in that case they would all need to be satisfied to allow activation of the <a>Interaction Affordance</a>.
  Note that activating one (default) configuration at the Thing level is still mandatory.
  </p>

<pre class="example">
{
    ...
    "securityDefinitions": {
        "basic_sc": { "scheme": "basic" },
        "digest_sc": { "scheme": "digest", "qop": "auth", "in": "header" },
        "psk_sc": { "scheme": "psk" }
    },
    "security": ["basic_sc"],
    ...
    "properties": {
        "status": {
            ...
            "forms": [{
                "href": "https://mylamp.example.com/status"
            }, {
                "href": "https://mylamp.example.com/status",
                "security": ["digest_sc"]
            }, {
                "href": "coaps://mylamp.example.com:5684/status",
                "security": ["psk_sc"]
            }]
        }
    },
    ...
}
</pre>

  <p>
  As another more complex example, OAuth2 makes use of scopes. 
  These are identifiers that 
  may appear in tokens and must match with corresponding identifiers in a resource to allow 
  access to that resource (or <a>Interaction Affordance</a> in the case of W3C WoT).
  For example, in the following, the <code>status</code> Property can be
  read by <a>Consumers</a> using bearer tokens containing the scope <code>limited</code>,
  but the <code>configure</code> Action can only be invoked
  with a token containing the <code>special</code> scope.
  Scopes are not identical to roles, but are often associated with them;
  for example, perhaps only those in an administrative role are authorized to perform "special" interactions.
  Tokens can have more than one scope.  
  In this example, an administrator would
  probably be issued tokens with both the <code>limited</code> and <code>special</code> scopes,
  while ordinary users would only be issued tokens with the <code>limited</code> scope.
  </p>

<pre class="example">
{
    ...
    "securityDefinitions": {
        "oauth2_sc": {
            "scheme": "oauth2",
            ...
            "flow": "implicit",
            "authorization": "https://example.com/authorization",
            "scopes": ["limited", "special"]
        }
    },
    "security": ["oauth2_sc"],
    ...
    "properties": {
        "status": {
            ...
            "forms": [{
                "href": "https://scopes.example.com/status",
                "scopes": ["limited"]
            }]
        }
    },
    "action": {
        "configure": {
            ...
            "forms": [{
                "href": "https://scopes.example.com/configure",
                "scopes": ["special"]
            }]
        }
    },
    ...
}
</pre>

</section> <!-- end of id="security-serialization-json"-->    

<section id="property-serialization-json">
<h3><code>properties</code></h3>
  
  <p>
  The value assigned to <code>properties</code> in a <code>Thing</code> instance
  is a <a>Map</a> of instances of <code>PropertyAffordance</code>.
  <span class="rfc2119-assertion" id="td-properties">
    All name-value pairs of a <a>Map</a> of <code>PropertyAffordance</code> instances
    MUST be serialized as members of the JSON object that results from serializing the <a>Map</a>;
    the name of a pair MUST be serialized as a JSON string and the value of the pair, an
    instance of <code>PropertyAffordance</code>, MUST be serialized as a JSON object.
  </span></p>

  <p>
  <span class="rfc2119-assertion" id="td-property-names">
    All name-value pairs of an instance of <code>PropertyAffordance</code>,
    where the name is a <a>Vocabulary Term</a> included in (one of) the <a>Signatures</a> of
    <code>PropertyAffordance</code>, <code>InteractionAffordance</code>, or <code>DataSchema</code>,
    MUST be serialized as members of the JSON object that results from
    serializing the <code>PropertyAffordance</code> instance, with the
    <a>Vocabulary Term</a> as name.
  </span>
  See <a href="#data-schema-serialization-json" class="sec-ref"></a> for
  details on serializing <a href="#dataschema" class="sec-ref"><code>DataSchema</code></a> instances.
  </p>

  <p><span class="rfc2119-assertion" id="td-property-arrays">
    The value assigned to <code>forms</code> in an instance of <code>PropertyAffordance</code>
    MUST be serialized as a JSON array
    containing one or more JSON object serializations as defined in <a href="#form-serialization-json"></a>.
  </span></p>

  <p>
  A snippet for two <a>Property</a> affordances is given below:
  </p>

<aside class="example" id="property-serialization-sample" title="Sample of Property serializations">
<pre>
    ...
    "properties": {
        "on": {
            "type": "boolean",
            "forms": [...]
        },
        "status": {
            "type": "object",
            "properties": {
                "brightness": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 100.0
                    },
                    "rgb": {
                    "type": "array",
                    "items" : {
                        "type" : "number",
                        "minimum": 0,
                        "maximum": 255
                    },
                    "minItems": 3,
                    "maxItems": 3
                }
            },
            "required": ["brightness", "rgb"],
            "forms": [...]
        }
    },
    ...
</pre>
</aside>

</section> <!-- end of id="property-serialization-json"-->

<section id="action-serialization-json">
<h3><code>actions</code></h3>

  <p>
    In a <code>Thing</code> instance, the value assigned to <code>actions</code>
    is a <a>Map</a> of instances of <code>ActionAffordance</code>.
    <span class="rfc2119-assertion" id="td-actions">
    All name-value pairs of a <a>Map</a> of <code>ActionAffordance</code> instances
    MUST be serialized as members of the JSON object that results from serializing the <a>Map</a>;
    the name of a pair MUST be serialized as a JSON string and the value of the pair, an
    instance of <code>ActionAffordance</code>, MUST be serialized as a JSON object.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-action-names">
    All name-value pairs of an instance of <code>ActionAffordance</code>,
    where the name is a <a>Vocabulary Term</a> included in (one of) the <a>Signatures</a> of
    <code>ActionAffordance</code> or <code>InteractionAffordance</code>,
    MUST be serialized as members of the JSON object that results from
    serializing the <code>ActionAffordance</code> instance, with the
    <a>Vocabulary Term</a> as name.
  </span></p>

  <p>
  <span class="rfc2119-assertion" id="td-action-objects">
    The values assigned to <code>input</code> and <code>output</code> in an instance of
    <code>ActionAffordance</code>
    MUST be serialized as JSON objects.
  </span>
  They rely on the the <a>Class</a> <a href="#dataschema" class="sec-ref"><code>DataSchema</code></a>,
  whose serialization is defined in <a href="#data-schema-serialization-json"></a>.
  </p>

  <p><span class="rfc2119-assertion" id="td-action-arrays">
    The value assigned to <code>forms</code> in an instance of <code>ActionAffordance</code>
    MUST be serialized as a JSON array
    containing one or more JSON object serializations as defined in <a href="#form-serialization-json"></a>.
  </span></p>

  <p>
  A TD snippet of an Action affordance is given below:
  </p>

<aside class="example" id="action-serialization-sample" title="Sample of an Action serialization">
<pre>
    ...
    "actions": {
        "fade" : {
            "title": "Fade in/out",
            "description": "Smooth fade in and out animation.",
            "input": {
                "type": "object",
                "properties": {
                    "from": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 100
                    },
                    "to": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 100
                    },
                    "duration": {"type": "number"}
                },
                "required": ["to","duration"],
            },
            "output": {"type": "string"},
            "forms": [...]
        }
    },
    ...
</pre>
</aside>
 

</section> <!-- end of id="action-serialization-json"-->

<section id="event-serialization-json">
<h3><code>events</code></h3>

  <p>
    In a <code>Thing</code> instance, the value assigned to <code>events</code>
    is a map of instances of <code>EventAffordance</code>.
    <span class="rfc2119-assertion" id="td-events">
    All name-value pairs of a <a>Map</a> of <code>EventAffordance</code> instances
    MUST be serialized as members of the JSON object that results from serializing the <a>Map</a>;
    the name of a pair MUST be serialized as a JSON string and the value of the pair, an
    instance of <code>EventAffordance</code>, MUST be serialized as a JSON object.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-event-names">
    All name-value pairs of an instance of <code>EventAffordance</code>,
    where the name is a <a>Vocabulary Term</a> included in (one of) the <a>Signatures</a> of
    <code>EventAffordance</code> or <code>InteractionAffordance</code>,
    MUST be serialized as members of the JSON object that results from
    serializing the <code>EventAffordance</code> instance, with the
    <a>Vocabulary Term</a> as name.
  </span></p>

  <p>
  <span class="rfc2119-assertion" id="td-event-objects">
    The values assigned to <code>subscription</code>,
    <code>data</code>, and <code>cancellation</code>
    in an instance of <code>EventAffordance</code>
    MUST be serialized as JSON objects.
  </span>
  They rely on the the <a>Class</a> <a href="#dataschema" class="sec-ref"><code>DataSchema</code></a>,
  whose serialization is defined in <a href="#data-schema-serialization-json"></a>.
  </p>

  <p><span class="rfc2119-assertion" id="td-event-arrays">
  The value assigned to <code>forms</code> in an instance of <code>EventAffordance</code>
  MUST be serialized as a JSON array
  containing one or more JSON object serializations as defined in <a href="#form-serialization-json"></a>.
  </span></p>

  <p>
  A TD snippet of an Event object is given below:
  </p>

<aside class="example" id="event-serialization-sample" title="Sample of an Event serialization">
<pre>
    ...
    "events": {
        "overheated": {
            "data" : {
                "type": "string"
            },
            "forms": [...]
        }
    },
    ...
</pre>
</aside>

<p>
Event affordances have been defined in a flexible manner, 
in order to adopt existing (e.g., WebSub) or customer-oriented event mechanisms (e.g., Webhooks).
For this reason, <code>subscription</code> and <code>cancellation</code> can be defined according to the desired mechanism. Please find further details in [[WoT-Binding-Templates]].
Example <a href="#webhook-example-serialization"></a> illustrates how Events can use <code>subscription</code> and <code>cancellation</code> to describe Webhooks.
</p>

</section> <!-- end of id="event-serialization-json"-->

<section id="link-serialization-json">
<h3><code>links</code></h3>

  <p><span class="rfc2119-assertion" id="td-links">
    All name-value pairs of an instance of <code>Link</code>,
    where the name is a <a>Vocabulary Term</a> included in the <a>Signature</a> of <code>Link</code>,
    MUST be serialized as members of the JSON object that results from
    serializing the <code>Link</code> instance, with the
    <a>Vocabulary Term</a> as name.
  </span></p>

  <p>A TD snippet of a link object in the <code>links</code> array is given below:</p>

<aside class="example" id="link-serialization-sample" title="Sample of a Link serialization">
<pre>
    ...
    "links": [{
        "rel": "controlledBy",
        "href": "https://servient.example.com/things/lampController",
        "type": "application/td+json"
    }]
    ...
</pre>
</aside>

</section> <!-- end of id="link-serialization-json"-->

<section id="form-serialization-json">
<h3><code>forms</code></h3>

  <p><span class="rfc2119-assertion" id="td-forms">
    All name-value pairs of an instance of <code>Form</code>,
    where the name is a <a>Vocabulary Term</a> included in the <a>Signature</a> of <code>Form</code>,
    MUST be serialized as members of the JSON object that results from
    serializing the <code>Form</code> instance, with the
    <a>Vocabulary Term</a> as name.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-form-protocolbindings">
  If required, form objects
  MAY be supplemented with protocol-specific <a>Vocabulary Terms</a>
  identified with a prefix.
  </span>
  See also <a href="#protocol-bindings"></a>.
  </p>

  <p>A TD snippet of a form object in the <code>forms</code> array is given below:</p>

<aside class="example" id="form-serialization-sample" title="Sample of a Form serialization">
<pre>
    ...
    "forms": [{
        "op": "writeproperty",
        "href" : "http://mytemp.example.com:5683/temp",
        "contentType": "application/json",
        "htv:methodName": "POST"
    }]
    ...
</pre>
</aside>

  <p>
  <code>href</code> may also carry a URI that contains dynamic variables
  such as p and d in http://192.168.1.25/left?p=2&amp;d=1.
  In that case the URI can be defined as template as defined in [[RFC6570]]:
  <code>http://192.168.1.25/left{?p,d}</code>.
  </p>

  <p><span class="rfc2119-assertion" id="td-uriVariables-names">
  In such a case, the URI Template variables MUST be collected
  in the JSON-object based <code>uriVariables</code> member
  with the associated (unique) variable names as JSON names.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-uriVariables-dataschema">
  The serialization of each value in the map assigned to <code>uriVariables</code>
  in an instance of <code>Form</code> MUST
  rely on the <a>Class</a> <a href="#dataschema" class="sec-ref"><code>DataSchema</code></a>,
  whose serialization is defined in <a href="#data-schema-serialization-json"></a>.
  </span></p>

  <p>A TD snippet using a URI Template and <code>uriVariables</code> is given below:</p>

<pre class="example">
{
    "@context": [
        "https://www.w3.org/2019/wot/td/v1",
        { "eg": "http://www.example.org/iot" }
    ],
    ...
    "actions": {
        "LeftDown": {
            ...
            "uriVariables": {
                "p" : { "type": "integer", "minimum": 0, "maximum": 16, "@type": "eg:SomeKindOfAngle" },
                "d" : { "type": "integer", "minimum": 0, "maximum": 1, "@type": "eg:Direction" }
            },
            "forms": [{
              "href" : "http://192.168.1.25/left{?p,d}",
              "htv:methodName": "GET"
            }]
        },
        ...
    },
    ...
}
</pre>

  <p>
  The <code>contentType</code> member is used to assign a media types [[!IANA-MEDIA-TYPES]]
  including media type parameters as attribute-value pairs separated by a <code>;</code> character.
  Example:
  </p>

<pre class="example">
    ...
    "contentType" : "text/plain; charset=utf-8",
    ...
</pre>

  <p>
  In some use cases, the form metadata of the <a>Interaction Affordance</a> not only
  describes the request, but also provides metadata for the expected response.
  For instance, an Action <code>takePhoto</code> defines an <code>input</code> schema
  to submit parameter settings of a camera (aperture priority, timer, etc.) using
  JSON for the request payload (i.e., <code>"contentType": "application/json"</code>).
  The output of this action is the photo taken, which is available in JPEG format, for example.
  In such cases, the <code>response</code> member is used to indicate the representation format
  of the response payload (e.g., <code>"contentType": "image/jpeg"</code>).
  Here no <code>output</code> schema is required, as the content type fully specifies
  the representation format.
  </p>

  <p>
  <span class="rfc2119-assertion" id="td-form-response-object">
  If present, the value assigned to <code>response</code> in an instance of
  <code>Form</code> MUST be a JSON object.
  </span>
  <span class="rfc2119-assertion" id="td-forms-response">
  If present, the response object MUST contain a <code>contentType</code> member as
  defined in the <a>Class</a> definition of
  <a href="#expectedresponse" class="sec-ref"><code>ExpectedResponse</code></a>.
  </span>
  </p>

  <p>
  A <code>form</code> snippet with the <code>response</code> member is shown
  below based on the <code>takePhoto</code> Action described above:
  </p>

<pre class="example">
{
    ...
    "actions": {
        "takePhoto": {
            ...
            "forms": [{
                "op": "invokeaction",
                "href": "http://camera.example.com/api/snapshot",
                "contentType": "application/json",
                "response": {
                    "contentType": "image/jpeg"
                }
            }]
        }
    },
    ...
}
</pre>

  <p>
  When <code>forms</code> is present at the top level, it can be used to describe meta interactions offered by a <a>Thing</a>.
  For example, the operation types "readallproperties" and "writeallproperties" are for meta
  interactions with a <a>Thing</a> by which <a>Consumers</a> can read and write all properties at once.
  In the example below, a <code>forms</code> member is included in the TD root object
  and the <a>Consumer</a> can use the submission target
  <code>https://mylamp.example.com/allproperties</code> both to read or write all
  Properties (i.e., <code>on</code>, <code>brightness</code>, and <code>timer</code>)
  of the <a>Thing</a> in a single protocol transaction.
  </p>

<pre class="example" id="td-forms-readall-example">
{
    ...
    "properties": {
        "on": {
            "type": "boolean",
            "forms": [...]
        },
        "brightness": {
            "type": "number",
            "forms": [...]
        },
        "timer": {
            "type": "integer",
            "forms": [...]
        }
    },
    ...
    "forms": [{
        "op": "readallproperties",
        "href": "https://mylamp.example.com/allproperties",
        "contentType": "application/json",
        "htv:methodName": "GET"
    }, {
        "op": "writeallproperties",
        "href": "https://mylamp.example.com/allproperties",
        "contentType": "application/json",
        "htv:methodName": "PUT"
    }]
}
</pre>

</section> <!-- end of id="form-serialization-json"-->

<section id="data-schema-serialization-json">
<h3>Data Schemas</h3>

  <p>
  The data schemas of the WoT Thing Description defined through the
  <a href="#dataschema" class="sec-ref"><code>DataSchema</code></a> <a>Class</a>
  are based on a subset of the JSON Schema terms [[?JSON-SCHEMA-VALIDATION]].
  Thus, serializations of the TD data schemas can be fed directly into JSON Schema
  validator implementations to validate the data exchanged with <a>Things</a>.
  </p>

  <p>
  Data schema serialization applies to <code>PropertyAffordance</code> instances,
  the values assigned to <code>input</code> and <code>output</code> in
  <code>ActionAffordance</code> instances,
  the values assigned to <code>subscription</code>, <code>data</code>, and <code>cancellation</code> in
  <code>EventAffordance</code> instances,
  and the value assigned to <code>uriVariables</code> in instances of <a>Subclasses</a> of <code>InteractionAffordance</code>
  (when a <a href="#form-serialization-json">form object</a> uses a URI Template).
  </p>

  <p><span class="rfc2119-assertion" id="td-data-schema">
    All name-value pairs of an instance of one of the <a>Subclasses</a> of
    <code>DataSchema</code>, where the name is a <a>Vocabulary Term</a> included in the
    <a>Signature</a> of that <a>Subclass</a> or in the <a>Signature</a> of
    <code>DataSchema</code>, MUST be serialized as members of the JSON object
    that results from serializing the <code>DataSchema</code> <a>Subclass</a>'s
    instance, with the <a>Vocabulary Term</a> as name.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-data-schema-objects">
  The value assigned to <code>properties</code> in an instance of
  <code>ObjectSchema</code> MUST be serialized as a JSON object.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-data-schema-arrays">
  The values assigned to <code>enum</code>,
  <code>required</code>,
  and <code>oneOf</code> in an instance of <code>DataSchema</code>
  MUST be serialized as a JSON array.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-data-schema-objects-arrays">
  The value assigned to <code>items</code> in an instance of
  <code>ArraySchema</code> MUST be serialized as a JSON object or a JSON array containing JSON objects.
  </span></p>

  <p>
  A TD snippet data schema members is given below.
  Note that the surrounding object may be a data schema object
  (e.g., for <code>input</code> and <code>output</code>)
  or a Property object, which would contain additional members.
  </p>

<aside class="example" id="dataschema-serialization-sample" title="Sample of a DataSchema serialization">
<pre>
    ...
    "type": "object",
    "properties": {
        "status": {
            "title": "Status",
            "type": "string",
            "enum": ["On", "Off", "Error"]
        },
        "brightness": {
            "title": "Brightness value",
            "type": "number",
            "minimum": 0.0,
            "maximum": 100.0
        },
        "rgb": {
            "title": "RGB color value",
            "type": "array",
            "items" : {
                "type" : "number",
                "minimum": 0,
                "maximum": 255
            },
            "minItems": 3,
            "maxItems": 3
        }
    },
    ...
</pre>
</aside>

  <p>
  The terms <code>readOnly</code> and <code>writeOnly</code> can be used signal
  which data items are exchanged in read interactions (i.e., when reading a Property)
  and which in write interactions (i.e., when writing a Property).
  This can be used as workaround when Properties of an unconventional <a>Thing</a>
  exhibit different data for reading and writing, which can be the case when
  augmenting an existing device or service with a Thing Description.
  </p>

  <p>A TD snippet with the usage of <code>readOnly</code> and <code>writeOnly</code> is given below:</p>

<pre class="example">
    ...
    "properties": {
        "status": {
            "description": "Read or write On/Off status.",
            "type": "object",
            "properties": {
                "latestStatus": {
                    "type": "string",
                    "enum": ["On", "Off"],
                    "readOnly": true
                },
                "newStatusValue": {
                    "type": "string",
                    "enum": ["On", "Off"],
                    "writeOnly": true
                }
            },
            forms: [...]
        }
    }
    ...
</pre>

  <p>
  When the <code>status</code> Property is read,
  the status data is returned using a <code>latestStatus</code> member in the payload.
  To update the <code>status</code> Property,
  the new value must be provided through a <code>newStatusValue</code> member in the payload.
  </p>

  <p>
  As an additional feature,
  a Thing Description instance allows the usage of a <code>unit</code> member within data schemas.
  This can be used to associate a unit of measure to a data item.
  Its string value can be selected freely, however,
  it is recommended to select units based on existing definitions
  by integrating the corresponding namespace
  (e.g., from Smart Appliances REFerence (SAREF) ontology or Ontology of units of Measure (OM)).
  See <a href="#sec-context-extensions"></a> for details.
</p>

</section> <!-- end of id="data-schema-serialization-json"-->

</section> <!-- end of id="serialization-json"-->

<section>
<h2>Identification</h2>

  <p>
  The JSON-based serialization of Thing Descriptions is identified by 
  the media type <code>application/td+json</code> or the
  CoAP Content-Format ID <code>T.B.D.</code> (see <a href="#iana-section"></a>).
  </p>

  <p class="note" title="CoAP Content-Format">
  CoAP-based WoT implementations can use the experimental Content-Format
  <code>65100</code> until the final Content-Format ID has been assigned.
  </p>

</section>
</section> <!-- end of id="sec-td-serialization"-->


<section id="sec-context-extensions" class="informative">
<h1>TD Context Extensions</h1>

  <p>
  In addition to the standard <a>Vocabulary</a> definitions in
  <a href="#sec-vocabulary-definition"></a>,
  the WoT Thing Description offers the possibility to add context knowledge
  from additional namespaces.
  This mechanism can be used to enrich the Thing Description
  instances with additional (e.g., domain-specific) semantics.
  It can also be used to import additional <a>Protocol Bindings</a>
  or new security schemes in the future.
  </p>

  <p>
  For such <a>TD Context Extensions</a>, the Thing Descriptions use the <code>@context</code>
  mechanism known from JSON-LD [[?json-ld11]].
  When using <a>TD Context Extensions</a>,
  the value of <code>@context</code> of the <a>Class</a> <code>Thing</code>
  is an Array with additional elements of type <code>anyURI</code> identifying JSON-LD context files
  or <a>Map</a> containing namespace IRIs as defined in <a href="#thing"></a>.
  </p>

  <p>
    The serialization rules for complex types in <a href="#td-basic-types-mapping"></a>
    define the serialization of an extended <code>@context</code> name-value pair.
    A snippet with <a>TD Context Extensions</a> is given below:
  </p>

<pre class="example">
{
    "@context": [
        "https://www.w3.org/2019/wot/td/v1",
        {
            "iot": "http://example.org/iot",
            "cov": "http://www.example.org/coap-binding#"
        },
        "https://schema.org/"
    ],
    ...
}
</pre>

<section class="informative">
<h3>Semantic Annotations</h3>

    <p>
    <a>TD Context Extensions</a> allow for additional <a>Vocabulary Terms</a> to a Thing Description instance.
    If the included namespaces are based on <a>Class</a> definitions
    such as those provided by the RDF Schema or OWL,
    they can be used to annotate any <a>Class</a> instance of a Thing Description semantically
    by associating the instance to a such an external <a>Class</a> definition.
    This is done by assigning a <a>Class</a> name to the <code>@type</code> name-value pair or
    including <a>Class</a> name in its <a>Array</a> value for multiple associations/annotations.
    Following the serialization rules in <a href="#td-basic-types-mapping"></a>,
    <code>@type</code> is either serialized as JSON string or as JSON array.
    <code>@type</code> is the JSON-LD keyword [[?json-ld11]] used to set the type of a node.
    </p>

    <p>
    <a>TD Context Extensions</a> also allow the inclusion of additional name-value pairs
    and well-defined values within any <a>Class</a> instance of a Thing Description.
    These pairs and values are defined through the included <a>Vocabulary Terms</a>
    and are serialized as additional members in the corresponding JSON objects
    or values of existing members, respectively.
    Examples are additional version metadata for the <a>Thing</a>
    or units of measure for data items.
    </p>

    <p>
      As an example, the TD snippet given below extends the version information container
      by addind version numbers for the hardware and firmware of the Thing,
      semantically annotates a Property, and uses a well-defined value for the data schema unit.
    </p>

<pre class="example">
{
    "@context": [
        "https://www.w3.org/2019/wot/td/v1",
        {
            "v": "http://www.example.org/versioningTerms#",
            "saref": "https://w3id.org/saref#",
            "om": "http://www.wurvoc.org/vocabularies/om-1.8/"
        }
    ],
    "@type": "Thing",
    "version": {
        "instance": "1.2.1",
        "v:firmware": "0.9.1",
        "v:hardware": "1.0"
    },
    ...
    "properties": {
        "temperature": {
            "@type": "saref:Temperature",
            "description": "Temperature value of the weather station",
            "type": "number",
            "minimum": -32.5,
            "maximum": 55.2,
            "unit": "om:degree_Celsius",
            "forms": [...]
        },
        ...
    },
    ...
}
</pre>

    <p>
        In many cases, context extension may be used to annotate pieces of
        a data schema, as in the TD snippet below. The example references
        SSN/SOSA [[vocab-ssn]] and OM 1.8, an ontology for units of measure
        [[Rijgersberg-et-al-2013]]. Note
        that object assigned to <code>temperature</code> is a data schema and not
        the actual temperature property of the physical world object. More details
        on modeling the physical world can be found in Appendix
        <a href="#thing-description-ontology"></a>.
    </p>

<pre class="example" id="saref-annotation-example">
{
    "@context": [
        "https://www.w3.org/2019/wot/td/v1",
        {
            "sosa": "http://www.w3.org/ns/sosa/",
            "ssn": "http://www.w3.org/ns/ssn/",
            "om": "http://www.wurvoc.org/vocabularies/om-1.8/"
        }
    ],
    "@type": "Thing",
    "id": "urn:dev:ops:32473-WoTLamp-1234",
    "sosa:observes": {
        "@id": "urn:dev:ops:32473-WoTStation-1234/temperature",
        "@type": "om:Temperature"
    },
    ...
    "properties": {
        "temperature": {
            "ssn:forProperty": "urn:dev:ops:32473-WoTStation-1234/temperature",
            "description": "Temperature measurement of the weather station",
            "type": "number",
            "minimum": -32.5,
            "maximum": 55.2,
            "unit": "om:degree_Celsius",
            "forms": [...]
        },
        ...
    },
    ...
}
</pre>

</section>

<section class="informative">
<h3>Adding Protocol Bindings</h3>

  <p>
  With the <a>TD Context Extensions</a> in a Thing Description,
  the communication metadata can be supplemented or new <a>Protocol Bindings</a> added
  through additional <a>Vocabulary Terms</a> serialized into JSON objects representing a <code>Form</code> instance.
  (see also <a href="#protocol-bindings"></a>).
  </p>
    
  <p>
  The following TD example uses a fictional CoAP <a>Protocol Binding</a>,
  as no such <a>Protocol Binding</a> is available at the time of writing this specification.
  This <a>TD Context Extension</a> assumes that there is a CoAP RDF vocabulary similar to [[HTTP-in-RDF10]]
  that is accessable via the namespace <code>http://www.example.org/coap-binding#</code>.
  The supplemented <code>cov:methodName</code> member instructs the <a>Consumer</a>
  which CoAP method has to be applied
  (e.g., <code>GET</code> for the CoAP Method Code 0.01,
  <code>POST</code> for the CoAP Method Code 0.02,
  or <code>iPATCH</code> for CoAP Method Code 0.07).
  </p>
    
<aside class="example" id="context-extension-for-forms" title="Specialization of forms through context extension">
<pre>
{
    "@context": [
        "https://www.w3.org/2019/wot/td/v1",
        { "cov": "http://www.example.org/coap-binding#" }
    ],
    ...
    "properties": {
        "brightness": {
            "description": "The current brightness setting",
            "type": "integer",
            "minimum": -64,
            "maximum": 64,
            "forms": [{
                "op": "readproperty",
                "href": "coap://example.org:61616/api/brightness",
                "cov:methodName": "GET"
            }, {
                "op": "writeproperty",
                "href": "coap://example.org:61616/api/brightness",
                "cov:methodName": "POST"
            }]
        },
        ...
    },
    ...
}
</pre>
</aside>
    
</section>
    
<section class="informative">
<h2>Adding Security Schemes</h2>
    
  <p>
  Finally, new security schemes that are not included in <a href="#sec-security-vocabulary-definition"></a>
  can be imported using the <a>TD Context Extension</a> mechanism.
  This example uses a fictional ACE security scheme
  based on [[?draft-ietf-ace-oauth-authz]] that is, for this example,
  defined by the namespace at <code>http://www.example.org/ace-security#</code>.
  Note that such additional security schemes must be <a>Subclasses</a> of the
  <a>Class</a> <a href="#securityscheme" class="sec-ref"><code>SecurityScheme</code></a>.
  </p>
    
<pre class="example">
{
    @context: [
        "https://www.w3.org/2019/wot/td/v1",
        {
            "cov": "http://www.example.org/coap-binding#",
            "ace": "http://www.example.org/ace-security#"
        }
    ],
    ...
    "securityDefinitions": {
        "ace_sc": {
            "scheme": "ace:ACESecurityScheme",
            ...
            "ace:as": "coaps://as.example.com/token",
            "ace:audience": "coaps://rs.example.com",
            "ace:scopes": ["limited", "special"],
            "ace:cnonce": true
        }
    },
    "security": ["ace_sc"],
    "properties": {
        "status": {
            ...
            "forms": [{
                "op": "readproperty",
                "href": "coaps://rs.example.com/status",
                "contentType": "application/cbor",
                "cov:methodName": "GET",
                "ace:scopes": ["limited"]
            }]
        }
    },
    "action": {
        "configure": {
            ...
            "forms": [{
                "op": "invokeaction",
                "href": "coaps://rs.example.com/configure",
                "contentType": "application/cbor",
                "cov:methodName": "POST",
                "ace:scopes": ["special"]
            }]
        }
    },
    ...
}
</pre>

  <p>
  Note that all security schemes defined in <a href="#sec-security-vocabulary-definition"></a>
  are already part of the TD context and need not to be included through a context extension.
  </p>
    
</section>
</section>

<section id="behavior" class="normative">
<h2>Behavioral Assertions</h2>
 <p>
 The following assertions relate to the behavior of components of a 
 WoT system, as opposed to the representation or information model of the TD. 
 However, note that TDs are descriptive, and may in particular be used to
 describe pre-existing network interfaces. In these cases, assertions cannot
 be made that constrain the behaviour of such pre-existing interfaces.  Instead,
 the assertions must be interpreted as constraints on the TD to accurately
 represent such interfaces. 
 </p> 
<section id="behavior-security">
<h3>Security Configurations</h3>
 <p>
 To enable secure interoperation, 
 security configurations must accurately reflect the requirements of the <a>Thing</a>:
<ul>
<li>
 <span class="rfc2119-assertion" id="td-security-binding">
 If a <a>Thing</a> requires a specific access mechanism for an interaction, that
 mechanism MUST be specified in the security configuration of the Thing Description.
 </span>  
</li>
<li>
 <span class="rfc2119-assertion" id="td-security-no-extras">
 If a <a>Thing</a> does not require a specific access mechanism for an interaction, that
 mechanism MUST NOT be specified in the security configuration of the Thing Description.
 </span>  
</li>
</ul>
 Some security protocols may ask for authentication 
 information dynamically, including required encoding or encryption schemes. 
 One consequence of the above is that if a protocol asks for
 a form of security credentials or an encoding or encryption scheme 
 not declared in the Thing Description 
 then the Thing Description is to be considered invalid.
 </p>
</section> <!-- end of id="behavior-security"-->
<section id="behavior-data">
<h3>Data Schemas</h3>
<p>The data schemas provided in the TD should accurately represent the 
data payloads returned and accepted by the described <a>Thing</a>
in the interactions specified in the TD.  In general, <a>Consumers</a> should
follow the data schemas strictly, not generating anything not given
in the WoT Thing Description, but should accept additional data from
the <a>Thing</a> not given explicitly in the WoT Thing Decription.  In general, <a>Things</a> are <em>described</em> by WoT Thing Descriptions,
but <a>Consumers</a> are <em>constrained</em> to follow WoT Thing Descriptions when
interacting with <a>Things</a>.
<ul>
<li>
<span class="rfc2119-assertion" 
      id="client-data-schema">
A <a>Thing</a> acting as a <a>Consumer</a> when interacting with another target <a>Thing</a>
described in a WoT Thing Description MUST generate data  
organized according to the data schemas given in the corresponding
interactions.
</span>
</li>
<li>
<span class="rfc2119-assertion" 
      id="server-data-schema">
A WoT Thing Description MUST accurately describe the 
data returned and accepted by each interaction.
</span>
</li>
<li>
<span class="rfc2119-assertion" 
      id="server-data-schema-extras">
A <a>Thing</a> MAY return additional data from an interaction
even when such data is 
not described in the data schemas given in its WoT Thing Description.
</span>
</li>
<li>
<span class="rfc2119-assertion" 
      id="client-data-schema-accept-extras">
A <a>Thing</a> acting as a <a>Consumer</a> when interacting with another <a>Thing</a> MUST accept without
error any additional data  
not described in the data schemas given in the Thing Description of the target <a>Thing</a>.
</span>
</li>
<li>
<span class="rfc2119-assertion" 
      id="client-data-schema-no-extras">
A <a>Thing</a> acting as a <a>Consumer</a> when interacting with another <a>Thing</a> MUST NOT generate data
not described in the data schemas given in the Thing Description of that <a>Thing</a>.
</span>
</li>
<li>
<span class="rfc2119-assertion" 
      id="client-uri-template">
A <a>Thing</a> acting as a <a>Consumer</a> when interacting with another <a>Thing</a> MUST generate URIs
according to the URI Templates, base URIs, and form href parameters
given in the Thing Description of the target <a>Thing</a>.
</span>
</li>
<li>
<span class="rfc2119-assertion" 
      id="server-uri-template">
URI Templates, base URIs, and href members
in a WoT Thing Description MUST accurately describe the <a>WoT Interface</a> of the <a>Thing</a>.
</span>
</li>
</ul>
</p>
</section> <!-- end of id="behavior-data"-->

<section>
  <h3>Protocol Bindings</h3>

  <p>A <a>Protocol Binding</a> is the mapping from an <a>Interaction Affordance</a> to concrete messages of a
      specific protocol such as HTTP [[!RFC7231]], CoAP [[!RFC7252]], or MQTT [[!MQTT]]. <a>Protocol Bindings</a> of
      <a>Interaction Affordances</a> are serialized as <code>forms</code> as defined in <a href="#form-serialization-json"></a>.
    </p>

  <p>
    Every form in a WoT Thing Description must have a submission target,
    given by the <code>href</code> member. The URI scheme of this
    submission target indicates what <a>Protocol Binding</a> the <a>Thing</a> implements
    [[WoT-Architecture]].
    For instance, if the target starts with <code>http</code> or
    <code>https</code>, a <a>Consumer</a> can then infer the <a>Thing</a> implements the
    HTTP <a>Protocol Binding</a> and it should expect HTTP-specific terms in the
    form instance (see next section, <a href="#http-binding-assertions"></a>).
    <ul>
        <li>
            <span class="rfc2119-assertion" id="bindings-requirements-scheme">
                Every form in a WoT Thing Description MUST follow the requirements
                of the <a>Protocol Binding</a> indicated by the URI scheme of its
                <code>href</code> member.
            </span>
        </li>
        <li>
            <span class="rfc2119-assertion" id="bindings-server-accept">
                Every form in a WoT Thing Description MUST accurately describe requests
                (including request headers, if present) accepted by the <a>Thing</a> in an
                interaction.
            </span>
        </li>
    </ul>
  </p>

  <section id="http-binding-assertions">
    <h4>HTTP Protocol Binding</h4>

    <p>
        Per default the Thing Description supports the HTTP <a>Protocol Binding</a> and
        includes the HTTP RDF vocabulary set definitions from [[HTTP-in-RDF10]] and can be 
        directly used within TD instances by the usage of the prefix <code>htv</code>, which 
        points to <code>http://www.w3.org/2011/http#</code>. 
    </p>
    <p>
        To interact with a <a>Thing</a> that implements the HTTP <a>Protocol Binding</a>, a <a>Consumer</a>
        needs to know what HTTP method to use when submitting a form. In the general case,
        a Thing Description can explicitly include a term indicating the method, i.e.,
        <code>htv:methodName</code>. For the
        sake of conciseness, the HTTP <a>Protocol Binding</a> defines <a>Default Values</a> for each operation type,
        which also aims at convergence of the methods expected by <a>Things</a> (e.g., GET to read, PUT to write).
        <span class="rfc2119-assertion" id="td-default-http-method">
            When no method is indicated in a form representing an HTTP
            <a>Protocol Binding</a>, a <a>Default Value</a> MUST be assumed as shown in
            the following table.
        </span>
    </p>

    <table class="def">
        <thead>
            <tr>
                <th><a>Vocabulary term</a></th>
                <th>Default value</th>
                <th>Context</th>
            </tr>
        </thead>
        <tbody>
            <tr class="rfc2119-default-assertion" id="td-default-http-method_get">
                <td>
                    <code>htv:methodName</code>
                </td>
                <td><code>GET</code></td>
                <td>
                    <code>Form</code> with operation type <code>readproperty</code>
                </td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-http-method_put">
                <td>
                    <code>htv:methodName</code>
                </td>
                <td><code>PUT</code></td>
                <td>
                    <code>Form</code> with operation type <code>writeproperty</code>
                </td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-http-method_post">
                <td>
                    <code>htv:methodName</code>
                </td>
                <td><code>POST</code></td>
                <td>
                    <code>Form</code> with operation type <code>invokeaction</code>
                </td>
            </tr>
        </tbody>
    </table>

    <p>
        For example, the following <a>Default Values</a> should be assumed for forms in the introductory TD example:
    </p>

    <aside class="example with-default">
            <div class="with-default-control">
                <input type="checkbox">
                <span><i>with default HTTP Protocol Binding values</i></span>
            </div>
            <pre>{
    "@context": "https://www.w3.org/2019/wot/td/v1",
    "id": "urn:dev:ops:32473-WoTLamp-1234",
    "title": "MyLampThing",
    "securityDefinitions": {
        "basic_sc": {
            "scheme": "basic",
            "in": "header"
        }
    },
    "security": [
        "basic_sc"
    ],
    "properties": {
        "status": {
            "type": "string",
            "forms": [
                {
                    "href": "https://mylamp.example.com/status"
                }
            ]
        }
    },
    "actions": {
        "toggle": {
            "forms": [
                {
                    "href": "https://mylamp.example.com/toggle"
                }
            ]
        }
    },
    "events": {
        "overheating": {
            "data": {
                "type": "string"
            },
            "forms": [
                {
                    "href": "https://mylamp.example.com/oh",
                    "subprotocol": "longpoll"
                }
            ]
        }
    }
}</pre>
        <pre>{
    "@context": "https://www.w3.org/2019/wot/td/v1",
    "id": "urn:dev:ops:32473-WoTLamp-1234",
    "title": "MyLampThing",
    "securityDefinitions": {
        "basic_sc": {
            "scheme": "basic",
            "in": "header"
        }
    },
    "security": [
        "basic_sc"
    ],
    "properties": {
        "status": {
            "type": "string",
            "forms": [
                {
                    "op": "readproperty",
                    "href": "https://mylamp.example.com/status",
                    "htv:methodName": "GET"
                },
                {
                    "op": "writeproperty",
                    "href": "https://mylamp.example.com/status",
                    "htv:methodName": "PUT"
                }
            ]
        }
    },
    "actions": {
        "toggle": {
            "forms": [
                {
                    "op": "invokeaction",
                    "href": "https://mylamp.example.com/toggle",
                    "htv:methodName": "POST"
                }
            ]
        }
    },
    "events": {
        "overheating": {
            "data": {
                "type": "string"
            },
            "forms": [
                {
                    "href": "https://mylamp.example.com/oh",
                    "subprotocol": "longpoll"
                }
            ]
        }
    }
}</pre>
    </aside>
  </section>

  <section>
      <h4>Other Protocol Bindings</h4>

      <p>
          The number of <a>Protocol Bindings</a> a <a>Thing</a> can implement
          is not restricted. Other <a>Protocol Bindings</a> (e.g., for CoAP, MQTT, or OPC UA)
          are intended to be standardized in separate documents such as a protocol <a>Vocabulary</a> similar to <em>HTTP Vocabulary in RDF 1.0</em> [[HTTP-in-RDF10]]
          or specifications including <a>Default Value</a> definitions. Such protocols can be simply integrated into the TD by the
          usage of the context extension mechanism (<a href="#sec-context-extensions"></a>).
      </p>
  </section>
</section>

</section> <!-- end of id="behavior"-->



  <section id="sec-security-consideration" class="informative">
  <h4>Security and Privacy Considerations</h4>
  
  <p>
  In general the security measures taken to protect a WoT 
  system will depend on the threats and attackers that system
  may face and the value of the assets needs to protect.
  A detailed discussion of security and privacy considerations for the Web of Things,
  including a threat model that can be adapted to various circumstances, is
  presented in the informative document [[WOT-SECURITY-CONSIDERATIONS]].  
  This section discusses only security and privacy risks
  and possible mitigations directly relevant to the WoT Thing Description.
  </p>
  <p>A WoT Thing Description can describe both secure and 
  insecure network interfaces.  When a Thing Description is 
  retro-fitted to an existing network interface, no change in the 
  security status of the network interface is to be expected.
  </p>
  <p>The use of a WoT Thing Description introduces  
  the security and privacy risks given in the following sections.
  After each risk, we suggest some possible mitigations.
  </p>
  <section id="sec-security-consideration-context">
  <h5>Context Dereferencing Privacy Risk</h5>
      <p>Deferencing the vocabulary files given in the <code>@context</code>
          member of any JSON-LD [[?json-ld11]] document can be a privacy risk.
          In the case of the WoT, an attacker can observe the network
          traffic produced by such deferences and can use the metadata
          of the dereference, such as the destination IP address,
          to infer information about the device especially if domain-specific
          vocabularies are used.  This is a risk even if the connection
          is encrypted, and is related to DNS privacy leaks.
      </p>
      <dl><dt>Mitigation:</dt><dd>
          Avoid actual dereferencing of vocabulary files.
          Vocabulary files should be cached whenever possible.
          Ideally they would be made immutable, built into the interpreting device,
          and not derefenced at all,
          with the URI in the <code>@context</code> member serving only as 
          an identifier of the (known) vocabulary. 
          This requires the use of strict version control, as updates
          should use a new URI to ensure that existing URIs can refer to 
          immutable data.
          Use well-known standard vocabulary files whenever possible to
          improve the chances that the context file will be available locally
          to systems interpreting the metadata in a Thing Description.
      </dd></dl>
   </section>
   <section id="sec-security-consideration-id">
   <h5>Immutable Identifiers Privacy Risk</h5>
      <p>The fact that a Thing Description contains a unique
          identifier means that should it be associated with
          a person it can be used to track that person and 
          therefore pose a risk to privacy.
      </p>
      <dl><dt>Mitigation:</dt><dd>
          All identifiers should be mutable,
          and there should be a mechanism to update the <code>id</code>
          of a <a>Thing</a>.
          Specifically,
          the <code>id</code> of a <a>Thing</a> should not be fixed in hardware.
          This does, however, conflict with the Linked Data ideal that
          identifiers are fixed URIs.  In many circumstances it
          will be acceptable to only allow updates to identifiers if
          a <a>Thing</a> is reinitialized.  In this case as a software entity the
          old <a>Thing</a> ceases to exist and a new <a>Thing</a> is created.
          This can be sufficient to break a tracking chain when, for
          example, a device is sold to a new owner.
          Alternatively, if more frequent changes are desired during 
          the operational phase of a device,
          a mechanism can be put into place to notify only authorized users
          of the change in identifier when a change is made.
          Note however that some classes of devices, e.g. medical devices,
          may require immutable IDs by law in some jurisdictions.
          In this case extra attention should be paid to secure 
          access to files, such as Thing Descriptions, containing such
          immutable identifiers.
          </dd></dl>
      </p>
   </section>
   <section id="sec-security-consideration-fingerprint">
   <h5>Fingerprinting Privacy Risk</h5>
      <p>As noted above, the <code>id</code> member in a TD can pose a privacy risk.  
      However, even if the <code>id</code> is updated as described to mitigate its
      tracking risk, it may still be possible to associate
      a TD with a particular physical device, and from there to a person, through fingerprinting.
      </p>
      <dl><dt>Mitigation:</dt><dd>
          Only authorized users should be provided access
          to the Thing Description for a <a>Thing</a>.
          If the TD is only distributed to authorized users 
          through secure and confidential channels, for
          example through a directory service that requires authentication,
          the risk can be minimized.  
      </dd></dl>
   </section>
   <section id="sec-security-consideration-tampering">
   <h5>TD Interception and Tampering Security Risk</h5>
      <p>Intercepting and tampering with TDs can be used to launch man-in-the-middle attacks,
      for example by rewriting URLs in TDs to redirect accesses to a malicious 
      intermediary that can capture or manipulate data.
      </p>
      <dl><dt>Mitigation:</dt><dd>
          Obtain Thing Descriptions only through
          mutually authenticated channels.
          This ensures that the <a>Consumer</a> and the server are both sure of the
          identity of the other party to the communication.
          This is also necessary in order to deliver TDs only to authorized users.
      </dd></dl>
   </section>
   <section id="sec-security-consideration-tampering">
   <h5>Context Interception and Tampering Security Risk</h5>
      <p>Intercepting and tampering with context files can be used to facilitate attacks
      by modifying the interpretation of vocabulary. 
      </p>
      <dl><dt>Mitigation:</dt><dd>
	      Ideally context files would only be obtained through authenticated channels
	      but it is notable (and unfortunate) that many contexts are indicated using
	      HTTP URLs, which are vulnerable to interception and modification if 
	      dereferenced.  However, if context files are immutable and cached, 
	      and dereferencing is avoided whenever possible, then this risk can be reduced.
      </dd></dl>
   </section>
   <section id="sec-security-consideration-inferencing">
   <h5>Inferencing of Personally Identifiable Information Privacy Risk</h5>
      <p>In many locales, in order to protect the privacy of users,
      there are legal requirements for the handling of
      personally identifiable information,
      that is,
      information that can be associated with a particular person.
      Such information can of course be generated by IoT devices directly.
      However,
      the existence and metadata of IoT devices
      (the kind of data stored in a Thing Description)
      can also contain or be used to infer personally identifiable information.
      This information can be as simple as the fact that a certain person owns a certain
      type of device,
      which can lead to additional inferences about that person.
      </p>
      <dl><dt>Mitigation:</dt><dd>
          Treat a Thing Description associated with a 
	      personal device as if it contained
	      personally identifiable information.
          As an example application of this principle,
          consider how to obtain user consent.  
          Consent for usage of personally identifiable data
          generated by a <a>Thing</a> is often obtained when a <a>Thing</a> is paired with system
          consuming the data,
          which is frequently also when the Thing Description
          is registered with a local directory or the system consuming the 
          Thing Description in order to access the device.
          In this case, consent for using data from a <a>Thing</a> can be combined with
          consent for accessing the Thing Description of the <a>Thing</a>.
          As a second example, if we consider a TD to contain personally
          identifiable information, then it should not be retained indefinitely
          or used for purposes other than those for which consent was given.
      </dd></dt>
  </section>

  </section>

  <section id="iana-section" class="normative">
  <h1>IANA Considerations</h1>
    <section id="media-type-section">
    <h2><code>application/td+json</code> Media Type Registration</h2>
    <dl>
      <dt>Type name:</dt>
      <dd>application</dd>
      <dt>Subtype name:</dt>
      <dd>td+json</dd>
      <dt>Required parameters:</dt>
      <dd>None</dd>
      <dt>Optional parameters:</dt>
      <dd>None</dd>
      <dt>Encoding considerations:</dt>
      <dd>See <a href="https://tools.ietf.org/html/rfc6839#section-3.1">RFC&nbsp;6839, section 3.1</a>.</dd>
      <dt>Security considerations:</dt>
      <dd>See <a href="https://tools.ietf.org/html/rfc8259">RFC&nbsp;8259</a>.
        <p>
          <span class="rfc2119-assertion" id="iana-security-execution">
            Since WoT Thing Description is intended to be a pure data exchange format for
            <a>Thing</a> metadata, the serialization SHOULD NOT be passed through a
            code execution mechanism such as JavaScript's <code>eval()</code>
            function to be parsed.
          </span>
          An (invalid) document may contain code that,
          when executed, could lead to unexpected side effects compromising
          the security of a system.
        </p>
        <p>
          WoT Thing Descriptions can be evaluated with a JSON-LD 1.1 processor,
          which typically follows links to remote contexts (i.e., TD context
          extensions, see <a href="#sec-context-extensions"></a>)
          automatically, resulting in the transfer of files
          without the explicit request of the <a>Consumer</a> for each one. If remote
          contexts are served by third parties, it may allow them to gather
          usage patterns or similar information leading to privacy concerns.
          <span class="rfc2119-assertion" id="iana-security-remote">
          While implementations on resource-constrained devices are expected
          to perform raw JSON processing (as opposed to JSON-LD processing),
          implementations in general SHOULD statically cache vetted
          versions of their supported context extensions and not to follow links
          to remote contexts.
          </span>
          Supported context extensions can be managed
          through a secure software update mechanism instead.
        </p>
        <p>
          Context Extensions (see <a href="#sec-context-extensions"></a>)
          that are loaded from the Web over non-secure connections,
          such as HTTP, run the risk of being altered by an attacker such that
          they may modify the <a>TD Information Model</a> in a way that could
          compromise security.
          <span class="rfc2119-assertion" id="iana-security-alter">
          For this reason, <a>Consumer</a> again
          SHOULD vet and cache remote contexts before allowing the system
          to use it.
          </span>
        </p>
        <p>
          Given that JSON-LD processing usually includes the substitution of
          long IRIs with short terms,
          WoT Thing Descriptions may expand considerably when processed using
          a JSON-LD 1.1 processor and, in the worst case, the resulting data
          might consume all of the recipient's resources.
          <span class="rfc2119-assertion" id="iana-security-expansion">
          <a>Consumers</a> SHOULD treat any TD metadata with due skepticism.
          </span>
        </p>
      </dd>
      <dt>Interoperability considerations:</dt>
      <dd>See <a href="https://tools.ietf.org/html/rfc8259">RFC&nbsp;8259</a>.
        <p>
        Rules for processing both conforming and non-conforming content are
        defined in this specification.
        </p>
      </dd>
      <dt>Published specification:</dt>
      <dd><a href="https://w3c.github.io/wot-thing-description">https://w3c.github.io/wot-thing-description</a></dd>
      <dt>Applications that use this media type:</dt>
      <dd>
        All participating entities in the W3C Web of Things, that is,
        <a>Things</a>, <a>Consumers</a>, and Intermediaries as defined in the
        <a href="https://w3c.github.io/wot-architecture">Web of Things (WoT) Architecture</a>.</dd>
      <dt>Fragment identifier considerations:</dt>
      <dd>See <a href="https://tools.ietf.org/html/rfc6839#section-3.1">RFC&nbsp;6839, section 3.1</a>.</dd>
      <dt>Additional information:</dt>
      <dd>
        <dl>
          <dt>Magic number(s):</dt>
          <dd>Not Applicable</dd>
          <dt>File extension(s):</dt>
          <dd>.jsontd</dd>
          <dt>Macintosh file type code(s):</dt>
          <dd>TEXT</dd>
        </dl>
      </dd>
      <dt>Person &amp; email address to contact for further information:</dt>
      <dd>Matthias Kovatsch &lt;w3c@kovatsch.net&gt;</dd>
      <dt>Intended usage:</dt>
      <dd>COMMON</dd>
      <dt>Restrictions on usage:</dt>
      <dd>None</dd>
      <dt>Author(s):</dt>
      <dd>The WoT Thing Description specification is a product of the Web of Things Working Group.</dd>
      <dt>Change controller:</dt>
      <dd><abbr title="World Wide Web Consortium">W3C</abbr></dd>
    </dl>

    </section>
    <section id="content-format-section">
    <h2>CoAP Content-Format Registration</h2>
    <p>
      IANA assigns compact CoAP Content-Format IDs for media types in the
      <a href="https://www.iana.org/assignments/core-parameters/core-parameters.xhtml#content-formats">CoAP Content-Formats</a>
      subregistry within the
      <a href="https://www.iana.org/assignments/core-parameters/core-parameters.xhtml">Constrained RESTful Environments (CoRE) Parameters</a>
      registry [[RFC7252]].
      The Content-Format ID for WoT Thing Description is (t.b.d.) in the 256-9999 range (IETF Review or IESG Approval).
    </p>
    <dl>
      <dt>Media Type:</dt>
      <dd>application/td+json</dd>
      <dt>Encoding:</dt>
      <dd>-</dd>
      <dt>ID:</dt>
      <dd>T.B.D.</dd>
      <dt>Reference:</dt>
      <dd>[<a href="https://w3c.github.io/wot-thing-description">"Web of Things (WoT) Thing Description", May 2019</a>]</dd>
    </section>
  </section>

  <section id="example-serialization" class="appendix informative">
    <h2>Example Thing Description Instances</h2>
  
    <section id="myLampThing-example-serialization">
    <h3>MyLampThing Example with CoAP Protocol Binding</h3>
  
    <p>Feature list of the <a>Thing</a>:</p>
  
    <ul>
        <li>Title: MyLampThing</li>
        <li>Context extension: none</li>
        <li>Offered affordances: 1 Property, 1 Action, 1 Event</li>
        <li>Security: PSKSecurityScheme</li>
        <li>Protocol Binding: CoAP [[?RFC7252]] over TLS</li>
        <li>Comment: Also see <a href="#adding-protocol-bindings"></a>.</li>
    </ul>
  
  <pre class="example" title="MyLampThing with CoAP Protocol Binding">
  {
     "@context": [
        "https://www.w3.org/2019/wot/td/v1",
        {
        "cov": "http://www.example.org/coap-binding#"
        }
      ],
      "id": "urn:dev:ops:32473-WoTLamp-1234",
      "title": "MyLampThing",
      "description" : "MyLampThing uses JSON serialization",
      "securityDefinitions": {"psk_sc":{"scheme": "psk"}},
      "security": ["psk_sc"],
      "properties": {
          "status": {
              "description" : "Shows the current status of the lamp",
              "type": "string",
              "forms": [{
                  "href": "coaps://mylamp.example.com/status",
                  "cov:methodName" : "GET" 
              }]
          }
      },
      "actions": {
          "toggle": {
              "description" : "Turn on or off the lamp",
              "forms": [{
                  "href": "coaps://mylamp.example.com/toggle",
                  "cov:methodName" : "POST" 
              }]
          }
      },
      "events": {
          "overheating": {
              "description" : "Lamp reaches a critical temperature (overheating)",
              "data": {"type": "string"},
              "forms": [{
                  "href": "coaps://mylamp.example.com/oh",
                  "cov:methodName" : "GET",
                  "subprotocol" : "cov:observe" 
              }]
          }
      }
  }
  </pre>
  </section>
  
    <section id="myLampThing-example-serialization">
    <h3>MyLightSensor Example with MQTT Protocol Binding</h3>
  
    <p>Feature list of the <a>Thing</a>:</p>
  
    <ul>
        <li>Title: MyLightSensor</li>
        <li>Context extension: none</li>
        <li>Offered affordances: 1 Event</li>
        <li>Security: none</li>
        <li>Protocol Binding: MQTT [[?MQTT]]</li>
        <li>Comment: An MQTT client frequently publishes the light sensor data (number is serialized in text format) to 
            the topic /lightSensor by the MQTT broker running behind the address 192.168.1.187:1883. </li>
    </ul>
  
  <pre class="example" title="MyLightSensor with MQTT Protocol Binding">
          {   
              "@context": "https://www.w3.org/2019/wot/td/v1",
              "title": "MyLightSensor",
              "id": "urn:dev:ops:32473-WoTLightSensor-1234",
              "securityDefinitions": {"nosec_sc": {"scheme": "nosec"}},
              "security": ["nosec_sc"],
              "events": {
                  "lightSensor": {
                      "data":{"type": "integer"},
                      "forms": [
                          {
                              "href": "mqtt://192.168.1.187:1883/lightSensor",
                              "contentType" : "text/plain"
                          }
                      ]
                  }
              } 
          }
  </pre>
    </section>
  
  
    <section id="webhook-example-serialization">
      <h3>Webhook Event Example</h3>
    
      <p>Feature list of the <a>Thing</a>:</p>
    
      <ul>
          <li>Title: WebhookThing</li>
          <li>Context extension: use HTTP <a>Protocol Binding</a> supplements (htv prefix already included in TD context)</li>
          <li>Offered affordances: 1 Event</li>
          <li>Security: none</li>
          <li>Protocol Binding: HTTP</li>
          <li>Comment: <i>WebhookThing</i> provides an Event affordance <code>temperature</code>
              which periodically pushes the latest temperature value to the <a>Consumer</a> using a Webhook mechanism,
              where the <a>Thing</a> sends POST requests to a callback URI provided by the <a>Consumer</a>.
              To describe this, the <code>subscription</code> member defines a write-only parameter <code>callbackURL</code>,
              which must be submitted through the <code>subscribeevent</code> form.
              The read-only parameter <code>subscriptionID</code> is returned by the subscription.
              The <i>WebhookThing</i> will then periodically POST to this callback URI with a payload defined by <code>data</code>.
              To unsubscribe, the <a>Consumer</a> has to submit the <code>unsubscribeevent</code> form,
              which makes use of a URI Template.
              The <code>uriVariables</code> member informs the <a>Consumer</a> to include the <code>subscriptionID</code> string.
              This can be further automated by using a context extension to include proper semantic annotations.
              Alternatively, one can imagine unsubscribing using the <code>concellation</code> member similarly to <code>subscription</code>
              and combine this with a <code>unsubscribeevent</code> form that describes a POST request with payload to unsubscribe.
          </li>
      </ul>
    
<pre class="example" title="Temperature Event with subscripton and cancellation">
{
    "@context": "https://www.w3.org/2019/wot/td/v1",
    "id": "urn:dev:ops:32473-Thing-1234",
    "title": "WebhookThing",
    "description": "Webhook-based Event with subscription and unsubscribe form.",
    "securityDefinitions": {"nosec_sc": {"scheme": "nosec"}},
    "security": ["nosec_sc"],
    "events": {
        "temperature": {
            "description": "Provides periodic temperature value updates.",
            "subscription": {
                "type": "object",
                "properties": {
                    "callbackURL": {
                        "type": "string",
                        "format": "uri",
                        "description": "Callback URL provided by subscriber for Webhook notifications.",
                        "writeOnly": true
                    },
                    "subscriptionID": {
                        "type": "string",
                        "description": "Unique subscription ID for cancellation provided by WebhookThing.",
                        "readOnly": true
                    }
                }
            },
            "data": {
                "type": "number",
                "description": "Latest temperature value that is sent to the callback URL."
            },
            "cancellation": {
                "type": "object",
                "properties": {
                    "subscriptionID": {
                        "type": "integer",
                        "description": "Required subscription ID to cancel subscription.",
                        "writeOnly": true
                    }
                }
            },
            "uriVariables": {
                "subscriptionID": { "type": "string" }
            },
            "forms": [
                {
                    "op": "subscribeevent",
                    "href": "http://192.168.0.124:8080/events/temp/subscribe",
                    "contentType": "application/json",
                    "htv:methodName": "POST"
                },
                {
                    "op": "unsubscribeevent",
                    "href": "http://192.168.0.124:8080/events/temp/{subscriptionID}",
                    "htv:methodName": "DELETE"
                }
            ]
        }
    }
}
</pre>

    </section>
  </section>

  <section id="json-schema-for-validation" class="appendix informative">
  <h1>JSON Schema for TD Instance Validation</h1>
    <p>
        Below is a JSON Schema [[?JSON-SCHEMA-VALIDATION]] document for syntactically validating Thing Description instances serialized in JSON based format.
    </p>
    <p class="note">The Thing Description defined by this document allows for 
        adding external vocabularies by using <code>@context</code> mechanism 
        known from JSON-LD [[?json-ld11]], and the terms in those external vocabularies can be
        used in addition to the terms defined in <a href="#sec-vocabulary-definition"></a>. 
        For this reason, the below JSON schema is intentionally non-strict in that 
        regard. You can replace the value of <code>additionalProperties</code> schema 
        property <code>true</code> with <code>false</code> in different scopes/levels in 
        order to perform a stricter validation in case no external vocabularies are used.
    </p>

    <p class="note"> Please note that some JSON Schema validation tools do not support the <code>iri</code> string format.
    </p>

    <p>
        The following JSON Schema for validating TD instances does not require the terms with <a>Default Values</a> to be present. Thus the terms with <a>Default Values</a> are optional. (see also <a href="#sec-default-values"></a>)
    </p>
    <pre class="advisement">
    {
    "title": "WoT TD Schema - 08 May 2019",
    "description": "JSON Schema for validating TD instances against the TD model. TD instances can be with or without terms that have default values",
    "$schema ": "http://json-schema.org/draft-07/schema#",
    "definitions": {
        "thing-context-w3c-uri": {
            "type": "string",
            "enum": [
                "https://www.w3.org/2019/wot/td/v1"
            ]
        },
        "thing-context": {
            "oneOf": [{
                    "type": "array",
                    "items": {
                        "anyOf": [{
                                "$ref": "#/definitions/anyUri"
                            },
                            {
                                "type": "object"
                            }
                        ]
                    },
                    "contains": {
                        "$ref": "#/definitions/thing-context-w3c-uri"
                    }
                },
                {
                    "$ref": "#/definitions/thing-context-w3c-uri"
                }
            ]
        },
        "type_declaration": {
            "oneOf": [{
                    "type": "string"
                },
                {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            ]
        },
        "property_element": {
            "type": "object",
            "properties": {
                "@type": {
                    "$ref": "#/definitions/type_declaration"
                },
                "description": {
                    "$ref": "#/definitions/description"
                },
                "descriptions": {
                    "$ref": "#/definitions/descriptions"
                },
                "title": {
                    "$ref": "#/definitions/title"
                },
                "titles": {
                    "$ref": "#/definitions/titles"
                },
                "uriVariables": {
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/dataSchema"
                    }
                },
                "forms": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                        "$ref": "#/definitions/form_element_property"
                    }
                },
                "observable": {
                    "type": "boolean"
                },
                "writeOnly": {
                    "type": "boolean"
                },
                "readOnly": {
                    "type": "boolean"
                },
                "oneOf": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/dataSchema"
                    }
                },
                "unit": {
                    "type": "string"
                },
                "enum": {
                    "type": "array",
                    "minItems": 1,
                    "uniqueItems": true
                },
                "format": {
                    "type": "string"
                },
                "const": {},
                "type": {
                    "type": "string",
                    "enum": [
                        "boolean",
                        "integer",
                        "number",
                        "string",
                        "object",
                        "array",
                        "null"
                    ]
                },
                "items": {
                    "oneOf": [{
                            "$ref": "#/definitions/dataSchema"
                        },
                        {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/dataSchema"
                            }
                        }
                    ]
                },
                "maxItems": {
                    "type": "integer",
                    "minimum": 0
                },
                "minItems": {
                    "type": "integer",
                    "minimum": 0
                },
                "minimum": {
                    "type": "number"
                },
                "maximum": {
                    "type": "number"
                },
                "properties": {
                    "additionalProperties": {
                        "$ref": "#/definitions/dataSchema"
                    }
                },
                "required": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "required": [
                "forms"
            ],
            "additionalProperties": true
        },
        "action_element": {
            "type": "object",
            "properties": {
                "description": {
                    "type": "string"
                },
                "descriptions": {
                    "$ref": "#/definitions/descriptions"
                },
                "title": {
                    "$ref": "#/definitions/title"
                },
                "titles": {
                    "$ref": "#/definitions/titles"
                },
                "uriVariables": {
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/dataSchema"
                    }
                },
                "@type": {
                    "$ref": "#/definitions/type_declaration"
                },
                "forms": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                        "$ref": "#/definitions/form_element_action"
                    }
                },
                "input": {
                    "$ref": "#/definitions/dataSchema"
                },
                "output": {
                    "$ref": "#/definitions/dataSchema"
                },
                "safe": {
                    "type": "boolean"
                },
                "idempotent": {
                    "type": "boolean"
                }
            },
            "required": [
                "forms"
            ],
            "additionalProperties": true
        },
        "event_element": {
            "type": "object",
            "properties": {
                "description": {
                    "type": "string"
                },
                "descriptions": {
                    "$ref": "#/definitions/descriptions"
                },
                "title": {
                    "$ref": "#/definitions/title"
                },
                "titles": {
                    "$ref": "#/definitions/titles"
                },
                "uriVariables": {
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/dataSchema"
                    }
                },
                "@type": {
                    "$ref": "#/definitions/type_declaration"
                },
                "forms": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                        "$ref": "#/definitions/form_element_event"
                    }
                },
                "subscription": {
                    "$ref": "#/definitions/dataSchema"
                },
                "data": {
                    "$ref": "#/definitions/dataSchema"
                },
                "cancellation": {
                    "$ref": "#/definitions/dataSchema"
                },
                "type": {
                    "not": {}
                },
                "enum": {
                    "not": {}
                },
                "const": {
                    "not": {}
                }
            },
            "required": [
                "forms"
            ],
            "additionalProperties": true
        },
        "form_element_property": {
            "type": "object",
            "properties": {
                "href": {
                    "$ref": "#/definitions/anyUri"
                },
                "op": {
                    "oneOf": [{
                            "type": "string",
                            "enum": [
                                "readproperty",
                                "writeproperty",
                                "observeproperty",
                                "unobserveproperty"
                            ]
                        },
                        {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "enum": [
                                    "readproperty",
                                    "writeproperty",
                                    "observeproperty",
                                    "unobserveproperty"
                                ]
                            }
                        }
                    ]
                },
                "contentType": {
                    "type": "string"
                },
                "security": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "scopes": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "subProtocol": {
                    "type": "string",
                    "enum": [
                        "longpoll",
                        "websub",
                        "sse"
                    ]
                },
                "response": {
                    "type": "object",
                    "properties": {
                        "contentType": {
                            "type": "string"
                        }
                    }
                }
            },
            "required": [
                "href"
            ],
            "additionalProperties": true
        },
        "form_element_action": {
            "type": "object",
            "properties": {
                "href": {
                    "$ref": "#/definitions/anyUri"
                },
                "op": {
                    "oneOf": [{
                            "type": "string",
                            "enum": [
                                "invokeaction"
                            ]
                        },
                        {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "enum": [
                                    "invokeaction"
                                ]
                            }
                        }
                    ]
                },
                "contentType": {
                    "type": "string"
                },
                "security": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "scopes": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "subProtocol": {
                    "type": "string",
                    "enum": [
                        "longpoll",
                        "websub",
                        "sse"
                    ]
                },
                "response": {
                    "type": "object",
                    "properties": {
                        "contentType": {
                            "type": "string"
                        }
                    }
                }
            },
            "required": [
                "href"
            ],
            "additionalProperties": true
        },
        "form_element_event": {
            "type": "object",
            "properties": {
                "href": {
                    "$ref": "#/definitions/anyUri"
                },
                "op": {
                    "oneOf": [{
                            "type": "string",
                            "enum": [
                                "subscribeevent",
                                "unsubscribeevent"
                            ]
                        },
                        {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "enum": [
                                    "subscribeevent",
                                    "unsubscribeevent"
                                ]
                            }
                        }
                    ]
                },
                "contentType": {
                    "type": "string"
                },
                "security": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "scopes": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "subProtocol": {
                    "type": "string",
                    "enum": [
                        "longpoll",
                        "websub",
                        "sse"
                    ]
                },
                "response": {
                    "type": "object",
                    "properties": {
                        "contentType": {
                            "type": "string"
                        }
                    }
                }
            },
            "required": [
                "href"
            ],
            "additionalProperties": true
        },
        "form_element_root": {
            "type": "object",
            "properties": {
                "href": {
                    "$ref": "#/definitions/anyUri"
                },
                "op": {
                    "oneOf": [{
                            "type": "string",
                            "enum": [
                                "readallproperties",
                                "writeallproperties",
                                "readmultipleproperties",
                                "writemultipleproperties"
                            ]
                        },
                        {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "enum": [
                                    "readallproperties",
                                    "writeallproperties",
                                    "readmultipleproperties",
                                    "writemultipleproperties"
                                ]
                            }
                        }
                    ]
                },
                "contentType": {
                    "type": "string"
                },
                "security": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "scopes": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "subProtocol": {
                    "type": "string",
                    "enum": [
                        "longpoll",
                        "websub",
                        "sse"
                    ]
                },
                "response": {
                    "type": "object",
                    "properties": {
                        "contentType": {
                            "type": "string"
                        }
                    }
                }
            },
            "required": [
                "href"
            ],
            "additionalProperties": true
        },
        "description": {
            "type": "string"
        },
        "title": {
            "type": "string"
        },
        "descriptions": {
            "type": "object"
        },
        "titles": {
            "type": "object"
        },
        "dataSchema": {
            "type": "object",
            "properties": {
                "@type": {
                    "$ref": "#/definitions/type_declaration"
                },
                "description": {
                    "$ref": "#/definitions/description"
                },
                "title": {
                    "$ref": "#/definitions/title"
                },
                "descriptions": {
                    "$ref": "#/definitions/descriptions"
                },
                "titles": {
                    "$ref": "#/definitions/titles"
                },
                "writeOnly": {
                    "type": "boolean"
                },
                "readOnly": {
                    "type": "boolean"
                },
                "oneOf": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/dataSchema"
                    }
                },
                "unit": {
                    "type": "string"
                },
                "enum": {
                    "type": "array",
                    "minItems": 1,
                    "uniqueItems": true
                },
                "format": {
                    "type": "string"
                },
                "const": {},
                "type": {
                    "type": "string",
                    "enum": [
                        "boolean",
                        "integer",
                        "number",
                        "string",
                        "object",
                        "array",
                        "null"
                    ]
                },
                "items": {
                    "oneOf": [{
                            "$ref": "#/definitions/dataSchema"
                        },
                        {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/dataSchema"
                            }
                        }
                    ]
                },
                "maxItems": {
                    "type": "integer",
                    "minimum": 0
                },
                "minItems": {
                    "type": "integer",
                    "minimum": 0
                },
                "minimum": {
                    "type": "number"
                },
                "maximum": {
                    "type": "number"
                },
                "properties": {
                    "additionalProperties": {
                        "$ref": "#/definitions/dataSchema"
                    }
                },
                "required": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "link_element": {
            "type": "object",
            "properties": {
                "anchor": {
                    "$ref": "#/definitions/anyUri"
                },
                "href": {
                    "$ref": "#/definitions/anyUri"
                },
                "rel": {
                    "type": "string"
                },
                "type": {
                    "type": "string"
                }
            },
            "required": [
                "href"
            ],
            "additionalProperties": true
        },
        "securityScheme": {
            "oneOf": [{
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "nosec"
                            ]
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "basic"
                            ]
                        },
                        "in": {
                            "type": "string",
                            "enum": [
                                "header",
                                "query",
                                "body",
                                "cookie"
                            ]
                        },
                        "name": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "cert"
                            ]
                        },
                        "identity": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "digest"
                            ]
                        },
                        "qop": {
                            "type": "string",
                            "enum": [
                                "auth",
                                "auth-int"
                            ]
                        },
                        "in": {
                            "type": "string",
                            "enum": [
                                "header",
                                "query",
                                "body",
                                "cookie"
                            ]
                        },
                        "name": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "bearer"
                            ]
                        },
                        "authorization": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "alg": {
                            "type": "string",
                            "enum": [
                                "MD5",
                                "ES256",
                                "ES512-256"
                            ]
                        },
                        "format": {
                            "type": "string",
                            "enum": [
                                "jwt",
                                "jwe",
                                "jws"
                            ]
                        },
                        "in": {
                            "type": "string",
                            "enum": [
                                "header",
                                "query",
                                "body",
                                "cookie"
                            ]
                        },
                        "name": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "psk"
                            ]
                        },
                        "identity": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "public"
                            ]
                        },
                        "identity": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "oauth2"
                            ]
                        },
                        "authorization": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "token": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "refresh": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scopes": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "flow": {
                            "type": "string",
                            "enum": [
                                "implicit",
                                "password",
                                "client",
                                "code"
                            ]
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "apikey"
                            ]
                        },
                        "in": {
                            "type": "string",
                            "enum": [
                                "header",
                                "query",
                                "body",
                                "cookie"
                            ]
                        },
                        "name": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "pop"
                            ]
                        },
                        "authorization": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "format": {
                            "type": "string",
                            "enum": [
                                "jwt",
                                "jwe",
                                "jws"
                            ]
                        },
                        "alg": {
                            "type": "string",
                            "enum": [
                                "MD5",
                                "ES256",
                                "ES512-256"
                            ]
                        },
                        "in": {
                            "type": "string",
                            "enum": [
                                "header",
                                "query",
                                "body",
                                "cookie"
                            ]
                        },
                        "name": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                }
            ]
        },
        "anyUri": {
            "type": "string",
            "format": "iri-reference"
        }
    },
    "type": "object",
    "properties": {
        "id": {
            "type": "string",
            "format": "uri"
        },
        "title": {
            "$ref": "#/definitions/title"
        },
        "titles": {
            "$ref": "#/definitions/titles"
        },
        "properties": {
            "type": "object",
            "additionalProperties": {
                "$ref": "#/definitions/property_element"
            }
        },
        "actions": {
            "type": "object",
            "additionalProperties": {
                "$ref": "#/definitions/action_element"
            }
        },
        "events": {
            "type": "object",
            "additionalProperties": {
                "$ref": "#/definitions/event_element"
            }
        },
        "description": {
            "$ref": "#/definitions/description"
        },
        "descriptions": {
            "$ref": "#/definitions/descriptions"
        },
        "version": {
            "type": "object",
            "properties": {
                "instance": {
                    "type": "string"
                }
            },
            "required": [
                "instance"
            ]
        },
        "links": {
            "type": "array",
            "items": {
                "$ref": "#/definitions/link_element"
            }
        },
        "forms": {
            "type": "array",
            "minItems": 1,
            "items": {
                "$ref": "#/definitions/form_element_root"
            }
        },
        "base": {
            "$ref": "#/definitions/anyUri"
        },
        "securityDefinitions": {
            "type": "object",
            "minProperties": 1,
            "additionalProperties": {
                "$ref": "#/definitions/securityScheme"
            }
        },
        "support": {
            "$ref": "#/definitions/anyUri"
        },
        "created": {
            "type": "string"
        },
        "modified": {
            "type": "string"
        },
        "security": {
            "type": "array",
            "minItems": 1,
            "items": {
                "type": "string"
            }
        },
        "@type": {
            "$ref": "#/definitions/type_declaration"
        },
        "@context": {
            "$ref": "#/definitions/thing-context"
        }
    },
    "required": [
        "title",
        "id",
        "security",
        "securityDefinitions",
        "@context"
    ],
    "additionalProperties": true
}
    </pre>

  </section>

  <section id="thing-templates" class="appendix informative">
  <h1>Thing Templates</h1>
      
    <p>
    A <em>Thing Template</em> is a description for a <em>class</em> of <a>Things</a>.
    It describes the properties, actions, events and common metadata that are shared for an entire group of <a>Things</a>,
    to enable the common handling of thousands of devices by a cloud server, which is not practical on a per-<a>Thing</a> basis.
    The Thing Template uses the same core vocabulary and information model from section 5.
    </p>
    <p>
    The Thing Template enables:
    <ul>
    <li> management of multiple <a>Things</a> by a cloud service. </li>
    <li> simulation of devices/<a>Things</a> that have not yet been developed.</li>
    <li> common applications across devices from different manufacturers that share a common <a>Thing</a> model.</li>
    <li> combining multiple models into a <a>Thing</a>.
    </ul>
    </p>
    <p>
    The Thing Template is a logical description of the interface and possible interaction with devices
    (properties, actions and events), however it does not contain device-specific
    information, such as a serial number, GPS location, security information or concrete protocol endpoints.
    </p><p>
    Since a Thing Template does not contain a <a>Protocol Binding</a> to specific endpoints and
    does not define a specific security mechanism, the <em>forms</em> and <em>securityDefinitions</em> and 
    <em>security</em> keys must not be present.
    </p><p>
     The same Thing Template can be implemented by <a>Things</a> from multiple vendors,
    a <a>Thing</a> can implement multiple Thing Templates, define additional metadata
    (vendor, location, security) and define bindings to concrete protocols.
    To avoid conflicts between properties, actions and events from different Thing Templates
    that are combined into a common <a>Thing</a>, all these identifiers must be unique within a <a>Thing</a>.
    </p><p>
    A common Thing Template for a class of devices enables writing applications across vendors and
    creates a more attractive market for application developers.
    A concrete Thing Description can implement multiple Thing Templates and
    thus can aggregate function blocks into a combined device.
    </p><p>
    The business models of cloud vendors are typically built on managing thousands of identical devices.
    All devices with the same Thing Template can be managed in the same way by cloud applications.
    It is easy to create multiple simulated devices, if the interface and the instance are treated separately.
    </p><p>
        Since a Thing Template is a subset of the Thing Description in which some optional and mandatory <a>Vocabulary Terms</a> 
        do not exist, however, it can be serialized in the same way and in the same formats as a Thing Description. Note that Thing 
        Template instances cannot be validated in the same way as Thing Description instances due to some missing mandatory terms.
    </p>
    
      <section id="thing-template-examples">
     <h2>Thing Template Examples</h2>
    
    This section shows a Thing Template for a lamp and a Thing Template for a buzzer.
    
      <section id="lamp-thing-template">
      <h3>Thing Template: Lamp</h3>
    
    <pre class="example" title="MyLampThingTemplate serialized in JSON">
    {
        "@context": ["https://www.w3.org/2019/wot/td/v1"], 
        "@type" : "ThingTemplate",
        "title": "Lamp Thing Template",
        "description" : "Lamp Thing Template",
        "properties": {
            "status": {
                "description" : "current status of the lamp (on|off)",
                "type": "string",
                "readOnly": true
            }
        },
        "actions": {
            "toggle": {
                "description" : "Turn the lamp on or off"
            }
        },
        "events": {
            "overheating": {
                "description" : "Lamp reaches a critical temperature (overheating)",
                "data": {"type": "string"}
            }
        }
    }
    </pre>
    </section>
    
    <section id="buzzer-thing-template">
    <h3>Thing Template: Buzzer</h3>
    
    <pre class="example" title="MyBuzzerThingTemplate serialized in JSON">
    {
        "@context": ["https://www.w3.org/2019/wot/td/v1"], 
        "@type" : "ThingTemplate",
        "title": "Buzzer Thing Template",
        "description" : "Thing template of a buzzer that makes noise for 10 seconds",
         "actions": {
            "buzz": {
                "description" : "buzz for 10 seconds"
            }
         }
    }
    </pre>
    </section>
    
     </section>   
     </section> 
    
<section id="note-jsonld11-processing" class="appendix informative">
<h1>Transformation to RDF</h1>

        <p>
            To integrate a Thing Description instance with external knowledge and
            contextual information (like SAREF annotations), the use of
            JSON-LD 1.1 and its processing API [[json-ld11-api]], as well as RDF-based
            tools [[rdf11-concepts]] and libraries is highly recommended. This appendix
            introduces two non-normative elements of the Thing Description model based
            on RDF: the default JSON-LD context for TD and the TD ontology.
        </p>

        <section>
            <h3>Thing Description JSON-LD Context</h3>

            <p>
                A TD document can be transformed into RDF by a standard JSON-LD processor
                (to then be uploaded to an RDF store for further processing).
                The following procedure loads the context of the TD, given by the
                term <code>@context</code>, and generates RDF triples:
            </p>

            <p>
                <a href="https://www.w3.org/TR/json-ld11-api/#deserialize-json-ld-to-rdf-algorithm">
                    <code>JsonLdProcessor.toRdf</code>
                </a>
            </p>
            
            <p>
                When applying this procedure to the introductory TD example
                (<a href="#thing-description-full-serialization"></a>) with all
                <a>Default Values</a>, the following triples are obtained:
            </p>
            
            <aside class="example with-default" id="simple-thing-description-rdf">
                <div class="with-default-control">
                    <input type="checkbox"/>
                    <span><i>after transformation to RDF</i></span>
                </div>
                <pre>{
    "@context": [
        "https://www.w3.org/2019/wot/td/v1",
        { 
            "saref": "https://w3id.org/saref#",
            "htv": "http://www.w3.org/2011/http#"
        }
    ],
    "id": "urn:dev:ops:32473-WoTLamp-1234",
    "title": "MyLampThing",
    "@type": "saref:LightSwitch",
    "securityDefinitions": {"basic_sc": {
        "scheme": "basic",
        "in": "header"
    }},
    "security": ["basic_sc"],
    "properties": {
        "status": {
            "type": "string",
            "forms": [{
                "@type": "saref:GetCommand",
                "href": "https://mylamp.example.com/status",
                "op": "readproperty",
                "htv:methodName": "GET"
            }, {
                "href": "https://mylamp.example.com/status",
                "op": "writeproperty",
                "contentType": "application/json",
                "htv:methodName": "PUT"
            }]
        }
    },
    "actions": {
        "toggle": {
            "safe": false,
            "idempotent": false,
            "forms": [{
                "@type": "saref:ToggleCommand",
                "href": "https://mylamp.example.com/toggle",
                "op": "invokeaction",
                "contentType": "application/json",
                "htv:methodName": "POST"
            }]
        }
    },
    "events": {
        "overheating": {
            "data": {"type": "string"},
            "forms": [{
                "@type": "saref:NotifyCommand",
                "href": "https://mylamp.example.com/oh",
                "op": "subscribeevent",
                "contentType": "application/json"
            }]
        }
    }
}</pre><pre>
&lt;urn:dev:ops:32473-WoTLamp-1234&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;https://w3id.org/saref#LightSwitch&gt; .
&lt;urn:dev:ops:32473-WoTLamp-1234&gt; &lt;https://www.w3.org/2019/wot/td#hasActionAffordance&gt; _:b0 .
&lt;urn:dev:ops:32473-WoTLamp-1234&gt; &lt;https://www.w3.org/2019/wot/td#hasEventAffordance&gt; _:b2 .
&lt;urn:dev:ops:32473-WoTLamp-1234&gt; &lt;https://www.w3.org/2019/wot/td#hasPropertyAffordance&gt; _:b5 .
&lt;urn:dev:ops:32473-WoTLamp-1234&gt; &lt;https://www.w3.org/2019/wot/td#hasSecurityConfiguration&gt; &lt;urn:dev:ops:32473-WoTLamp-1234/basic_sc&gt; .
&lt;urn:dev:ops:32473-WoTLamp-1234&gt; &lt;https://www.w3.org/2019/wot/td#title&gt; &quot;MyLampThing&quot; .
_:b0 &lt;https://www.w3.org/2019/wot/td#name&gt; &quot;toggle&quot; .
_:b0 &lt;https://www.w3.org/2019/wot/td#hasForm&gt; _:b1 .
_:b0 &lt;https://www.w3.org/2019/wot/td#isIdempotent&gt; &quot;false&quot;^^&lt;http://www.w3.org/2001/XMLSchema#boolean&gt; .
_:b0 &lt;https://www.w3.org/2019/wot/td#isSafe&gt; &quot;false&quot;^^&lt;http://www.w3.org/2001/XMLSchema#boolean&gt; .
_:b1 &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;https://w3id.org/saref#ToggleCommand&gt; .
_:b1 &lt;http://www.w3.org/2011/http#methodName&gt; &quot;POST&quot; .
_:b1 &lt;https://www.w3.org/2019/wot/hypermedia#forContentType&gt; &quot;application/json&quot; .
_:b1 &lt;https://www.w3.org/2019/wot/hypermedia#forOperationType&gt; &quot;invokeaction&quot; .
_:b1 &lt;https://www.w3.org/2019/wot/hypermedia#hasTarget&gt; &quot;https://mylamp.example.com/toggle&quot; .
_:b2 &lt;https://www.w3.org/2019/wot/td#name&gt; &quot;overheating&quot; .
_:b2 &lt;https://www.w3.org/2019/wot/td#hasForm&gt; _:b3 .
_:b2 &lt;https://www.w3.org/2019/wot/td#hasNotificationSchema&gt; _:b4 .
_:b3 &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;https://w3id.org/saref#NotifyCommand&gt; .
_:b3 &lt;https://www.w3.org/2019/wot/hypermedia#forContentType&gt; &quot;application/json&quot; .
_:b3 &lt;https://www.w3.org/2019/wot/hypermedia#forOperationType&gt; &quot;subscribeevent&quot; .
_:b3 &lt;https://www.w3.org/2019/wot/hypermedia#hasTarget&gt; &quot;https://mylamp.example.com/oh&quot; .
_:b4 &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;https://www.w3.org/2019/wot/json-schema#StringSchema&gt; .
_:b5 &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;https://www.w3.org/2019/wot/json-schema#StringSchema&gt; .
_:b5 &lt;https://www.w3.org/2019/wot/td#name&gt; &quot;status&quot; .
_:b5 &lt;https://www.w3.org/2019/wot/td#hasForm&gt; _:b6 .
_:b5 &lt;https://www.w3.org/2019/wot/td#hasForm&gt; _:b7 .
_:b6 &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;https://w3id.org/saref#GetCommand&gt; .
_:b6 &lt;http://www.w3.org/2011/http#methodName&gt; &quot;GET&quot; .
_:b6 &lt;https://www.w3.org/2019/wot/hypermedia#forOperationType&gt; &quot;readproperty&quot; .
_:b6 &lt;https://www.w3.org/2019/wot/hypermedia#hasTarget&gt; &quot;https://mylamp.example.com/status&quot; .
_:b7 &lt;http://www.w3.org/2011/http#methodName&gt; &quot;PUT&quot; .
_:b7 &lt;https://www.w3.org/2019/wot/hypermedia#forContentType&gt; &quot;application/json&quot; .
_:b7 &lt;https://www.w3.org/2019/wot/hypermedia#forOperationType&gt; &quot;writeproperty&quot; .
_:b7 &lt;https://www.w3.org/2019/wot/hypermedia#hasTarget&gt; &quot;https://mylamp.example.com/status&quot; .
&lt;urn:dev:ops:32473-WoTLamp-1234/basic_sc&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;https://www.w3.org/2019/wot/security#BasicSecurityScheme&gt; .
&lt;urn:dev:ops:32473-WoTLamp-1234/basic_sc&gt; &lt;https://www.w3.org/2019/wot/security#in&gt; &quot;header&quot; .</pre>
            </aside>

            <p>
                Most importantly, the JSON-LD context maps JSON strings to RDF IRIs (hence, the notion
                of <em>context</em>: in two different contexts, the same string can have different
                meanings). The mapping here is rather straightforward: every vocabulary of the TD
                information model is defined its own namespace and every vocabulary term maps to some
                name, appended to the corresponding namespace. Strings that are not part of any
                vocabulary map to RDF literals (strings with an optional datatype). For instance,
                <code>title</code> maps to <code>https://www.w3.org/2019/wot/td#title</code> and
                <code>MyLampThing</code> remains unchanged. Applying this mapping is called
                <a href="https://www.w3.org/TR/json-ld11/#expanded-document-form">context expansion</a>.
            </p>

            <p>
                Then, after expanding JSON strings to full IRIs, all map structures of the
                TD document must be turned into RDF triples. In a simple case, a
                triple is produced for every key/value pair in the map. For instance, the
                very first triple of the example above was produced from <code>"title": "myLampThing"</code>.
            </p>

            <p>
                Other cases rely on specific JSON-LD features. Most of these features were
                introduced in the 1.1 version of the standard and thus require an appropriate
                JSON-LD 1.1 implementation. They are listed below:
            </p>

            <ul>
                <li>
                    <a href="https://www.w3.org/TR/json-ld11/#aliasing-keywords"><em>Aliasing keywords</em></a>:
                    JSON-LD reserved keywords always start with <code>@</code> but in certain cases, it is
                    more convenient to define aliases for these keywords, e.g. to more easily process JSON-LD
                    document in a specific programming environment. In the TD core vocabulary, <code>id</code>
                    is an alias for <code>@id</code>, which must be an IRI used as the subject of triples when
                    producing RDF. For this reason, the first triples in the example have
                    <code>urn:dev:ops:32473-WoTLamp-1234</code> as a subject instead of an arbitrary
                    blank node.
                </li>
                <li>
                    <a href="https://www.w3.org/TR/json-ld11/#scoped-contexts"><em>Scoped contexts</em></a>:
                    The term <code>properties</code> is used both in the core vocabulary and in the data schema
                    vocabulary. Yet, a JSON string cannot map to two IRIs simultaneously in the same context
                    definition. The mapping from <code>properties</code> to
                    <code>https://www.w3.org/2019/wot/json-schema#properties</code> must therefore be <em>scoped</em>
                    to instances of <code>DataSchema</code> only.
                </li>
                <li>
                    <a href="https://github.com/w3c/json-ld-api/issues/65"><em>Property-based data indexing</em></a>:
                    in the example above, <code>status</code>, <code>toggle</code> and <code>overheating</code>
                    appear as keys in a map but they do not produce triples in which they become predicates. This special
                    structure is called an <a href="https://www.w3.org/TR/json-ld11/#data-indexing">index map</a>.
                    Without any indication in the context, the index key is lost when an index map is turned into RDF.
                    To make the transformation to RDF reversible, it is possible to indicate that index keys should
                    produce triples with a given predicate. Each vocabulary can include an RDF term for this purpose.
                    In the core vocabulary, the property <code>https://www.w3.org/2019/wot/td#name</code> is used.
                </li>
                <li>
                    <a href="https://github.com/w3c/json-ld-syntax/issues/19"><em>Indexing without a predicate</em></a>:
                    in a TD, the security definitions container is mostly syntactic sugar to avoid redundancy
                    in the <code>security</code> definitions. JSON-LD 1.1 includes another indexing mechanism for
                    that purpose. In the above example, <code>securityDefinitions</code> does not produce any
                    triple.
                </li>
            </ul>

            <p class="ednote">
                The last two JSON-LD features (property-based data indexing and indexing without a
                predicate) are still experimental; they have not been published in any Editors'
                Draft yet.
            </p>
    
            <!-- <p class="issue">
                An experimental JSON-LD 1.1 context for the TD model is provided in the
                repository: <code>td-context-1.1.jsonld</code>. Currently, it is not the
                context served at <code>https://www.w3.org/2019/wot/td/v1</code>, though.
            </p> -->
        </section>

        <section>
            <h3>Thing Description Ontology</h3>

            <p>
                As presented in the previous section, all <a>Vocabulary Terms</a> (including those
                denoting <a>Classes</a>) follow the RDF convention of belonging to a <a>Vocabulary</a>
                identified by a namespace IRI.
                As a result, the TD information model can be reformulated in the Web Ontology Language
                (OWL) [[owl2-overview]]. <a>Class</a> definitions become OWL axioms defined on the
                <a>Vocabulary Terms</a> of the TD model. The axioms that are particularly
                of interest in the present document are those of the TD ontology available under the
                TD namespace IRI, both as an RDF file and as a human-readable HTML documentation.
                <a>Default Values</a> cannot be directly translated to OWL, they are therefore ignored
                in the TD ontology.
            </p>

            <p>
                The axioms included in the TD ontology may be used to validate a TD but its primary
                purpose is to serve as an entry point for a deeper semantic description of WoT Things
                that would make clients behave in a more autonomous way, as desired in WoT
                [[wot-architecture]]. A semantic description is nothing more than a description of the
                physical world, in which WoT systems may have tangible effects. OWL should be the
                preferred language for this purpose. OWL is indeed a language to specify <em>ontologies</em>,
                that is, conceptualizations of the physical world. To this end, an ontology does not cover
                one possible model of the physical world by constructing abstract data structures. Instead,
                it provides necessary constraints on all possible models of the world for these models to
                be sound. This principle, at the basis of <em>model theory</em>, is what the semantics of RDF
                (and OWL) is based on [[rdf11-mt]]. In the following diagram, because the only fact
                we know about <code>urn:dev:ops:32473-WoTLamp-1234</code> is that it is a light
                switch with generic affordances, it could be any light switch, be it mechanical,
                digital or even virtual.
            </p>
            
            <figure>
                <img src="images/model-theory-explainer.png">
                <figcaption><a>TD Serialization</a>, <a>TD</a> and <a>Thing</a> on a light switch example</figcaption>
            </figure>

            <p>
                As a consequence, the TD ontology is meant to be integrated into a larger ontology,
                as it would not suffice to describe physical world objects alone. An ontology is
                generally designed for a specific domain of application, like transportation or home
                automation. For the latter domain, the TD ontology can e.g. be
                integrated with SAREF, as illustrated in several examples in this document.
            </p>

            <p>
                An intelligent WoT client can be assigned the task of turning a light off
                in ontological terms, using SAREF. For instance, the task could be expressed as
                a post-condition on the <code>saref:OnOffState</code> of some <code>saref:LightSwitch</code>.
                Assuming a server exposes the TD of <a href="#thing-description-full-serialization"></a>,
                the client has two possibilities to perform this task: it can either write
                the <code>status</code> property as <code>off</code> or it can invoke the action
                <code>toggle</code> and see if the resulting <code>status</code> is indeed
                equal to <code>off</code>.
            </p>

            <p>
                Yet, in the TD example, the switch state is not directly exposed. Assuming
                the client has no prior knowledge of the meaning of <code>status</code>,
                it must infer possible operations from the semantic annotations available in the TD
                and its domain-specific ontology, that includes SAREF. The following ontological
                axioms can be formulated for SAREF, in the OWL Manchester syntax
                [[owl2-manchester-syntax]]:
            </p>

            <aside class="example">
<pre class="nohighlight">
Class: LightSwitch
SubClassOf: hasState some OnOffState

Class: ToggleCommand
SubClassOf: actsUpon some OnOffState</pre>
            </aside>

            <p>
                They respectively state that a light switch must have an on/off state and that
                a toggle command must act on some on/off state. They may seem intuitive
                to humans but it is only possible for the client to know what to do from such
                axioms. If we assume that a <code>saref:GetCommand</code>
                always exposes the state of the <code>Thing</code>, the client can then
                automatically infer what form(s) to submit to change the switch state: a
                <code>writeproperty</code> on the <code>saref:GetCommand</code> or an
                <code>invokeaction</code> on the <code>saref:ToggleCommand</code>. Note that the
                result of the operation cannot be known for certain, as the TD does not expose
                its internal state. However, by selecting certain models of the physical world,
                either by statistical means or by further axiomatization, clients can still
                reach a certain level of autonomy with an ontological approach.
            </p>

            <!-- <p class="issue">
                Currently, the ontology documentation is available
                <a href="https://w3c.github.io/wot-thing-description/ontology/td.html">on w3c.github.io</a>
                but it should eventually be put under the TD namespace, on w3.org.
            </p> -->
        </section>

    </section>

  <section id="changes" class="appendix">
  <h1>Recent Specification Changes</h1>
  <h2 id="changes3">Changes from Third Public Working Draft</h2>
  <ul>
    <li>General</li>
    <ul>
    <li>Added <a href="#multilanguage">multi-language</a> support for human-readable metadata (<code>descriptions</code> and <code>titles</code> <a>Vocabulary Terms</a>).</li>
    <li>Added <code>@language</code> to declare a default language and specified how to infer text direction in human-readable metadata.</li>
    <li>Renamed the <code>InteractionPattern</code> <a>Class</a> to <a href="#interactionaffordance"><code>InteractionAffordance</code></a>.</li>
    <li>Added a <a href="#behavior">section</a> to describe behavioral constraints of a WoT system.</li>
    <li>Added a <a href="#sec-security-consideration">section</a> with security and privacy considerations.</li>
    <li>Added a <a href="#iana-section">section</a> with IANA considerations to register media type and CoAP Content Format.</li>
    <li>Added an <a href="#thing-templates">appendix section</a> describing the concept of Thing Templates for describing classes of <a>Things</a>.</li>
    <li>Added an <a href="#note-jsonld11-processing">appendix section</a> explaining the RDF representation of Thing Descriptions; it replaces the former subsection "Implementation Notes".</li>
    <li>Moved the full examples of Thing Description instances to the <a href="#example-serialization">appendix</a>.</li>
    </ul>

    <li>Thing</li>
    <ul>
    <li>Added mandatory <code>@context</code> and optional <code>@type</code> <a>Vocabulary Terms</a> to the <a href="#thing">Thing</a> <a>Class</a>.</li>
    <li>Added optional <code>created</code> and <code>modified</code> <a>Vocabulary Terms</a> to the <a href="#thing">Thing</a> <a>Class</a> to provide information as to when the TD instance was created or last modified, resp.</li>
    <li>Added optional <code>version</code> <a>vocabulary term</a> to the <a href="#thing">Thing</a> <a>Class</a> to provide version information.</li>
    <li>Added support for <a href="#meta-interactions-of-thing">meta interactions</a> through the operation types <code>readallproperties</code>, <code>writeallproperties</code>, <code>readmultipleproperties</code>, and <code>writemultipleproperties</code>.</li>
    </ul>

    <li>InteractionAffordance</li>
    <ul>
    <li>Added optional <code>@type</code> <a>Vocabulary Term</a> to the <a href="#interactionaffordance">InteractionAffordance</a> <a>Class</a> to make semantic annotations part of the Information Model.</li>
    <li>Added optional <code>uriVariables</code> <a>Vocabulary Terms</a> to <a href="#interactionaffordance">InteractionAffordance</a> <a>Class</a> to describe URI Template variables.</li>
    <li>Added optional <code>safe</code> and <code>idempotent</code> <a>Vocabulary Terms</a> to the <a href="#actionaffordance">ActionAffordance</a> <a>Class</a> to provide information about the safeness and idempotency of the Action.</li>
    <li>Added optional <code>subscription</code> and <code>cancellation</code> <a>Vocabulary Terms</a> to the <a href="#eventaffordance">EventAffordance</a> <a>Class</a> to describe data that needs to be passed upon subscription and cancellation, resp.</li>
    <li>Renamed <code>label</code> to <code>title</code> in the <a href="#interactionaffordance">InteractionAffordance</a> <a>Class</a> to be consistent with JSON Schema.</li>
    <li>Removed <code>security</code> and <code>scopes</code> <a>Vocabulary Terms</a> from the <a href="#interactionaffordance">InteractionAffordance</a> <a>Class</a> to simplify mechanism.</li>
    <li>Removed the <code>writable</code> <a>vocabulary term</a> from the <a href="#propertyaffordance">PropertyAffordance</a> <a>Class</a> and made Property affordances both readable and writable by default; this can be overridden using the <code>op</code> <a>vocabulary term</a> of the <a href="#form">Form</a> <a>Class</a>.</li>
    </ul>

    <li>Link and Form</li>
    <ul>
    <li>Renamed <code>mediaType</code> to <code>type</code> in the <a href="#link">Link</a> <a>Class</a> to align with RFC 8288.</li>
    <li>Added optional <code>response</code> <a>vocabulary term</a> to the <a href="#form">Form</a> <a>Class</a> to describe possible response messages.</li>
    <li>Renamed <code>mediaType</code> to <code>contentType</code> in the <a href="#form">Form</a> <a>Class</a> to reflect that request might need to set also media type parameters.</li>
    <li>Renamed <code>rel</code> to <code>op</code> in the <a href="#form">Form</a> <a>Class</a> to resolve perceived conflicts with link relations.</li>
    <li>Added <code>unobserveproperty</code> to the enumerated values for the <code>op</code> <a>vocabulary term</a>.</li>
    </ul>

    <li>DataSchema</li>
    <ul>
    <li>Added missing <a href="#nullschema">NullSchema</a> <a>Class</a>.</li>
    <li>Added optional <code>@type</code> <a>vocabulary term</a> to the <a href="#dataschema">DataSchema</a> <a>Class</a> to make semantic annotations part of the Information Model.</li>
    <li>Added optional <code>unit</code> <a>vocabulary term</a> to the <a href="#dataschema">DataSchema</a> <a>Class</a> to provide unit metadata.</li>
    <li>Added optional <code>oneOf</code> <a>vocabulary term</a> to the <a href="#dataschema">DataSchema</a> <a>Class</a> to allow for alternative schemas.</li>
    <li>Added optional <code>format</code> <a>vocabulary term</a> to the <a href="#dataschema">DataSchema</a> <a>Class</a> to allow for pattern validation.</li>
    </ul>

    <li>Security Scheme</li>
    <ul>
    <li>Added optional <code>@type</code> <a>vocabulary term</a> to the <a href="#securityscheme">SecurityScheme</a> <a>Class</a> to make semantic annotations part of the Information Model.</li>
    <li>Added <code>securityDefinitions</code> <a>vocabulary term</a> to the <a href="#thing">Thing</a> <a>Class</a> to declare security definitions.</li>
    <li>Redefined <code>security</code> <a>vocabulary term</a> in the <a href="#thing">Thing</a> and <a href="#form">Form</a> <a>Classes</a> to be used to activate declared security definitions.</li>
    <li>Clarified that the top-level <a href="#security-serialization-json"><code>securityDefinitions</code> and <code>security</code></a> configuration is mandatory.</li>
    <li>Removed all <code>Url</code> postfixes from security scheme <a>Vocabulary Terms</a>.</li>
    </ul>
  </ul>

  <h2 id="changes2">Changes from Second Public Working Draft</h2>
  <p>Changes from Second Public Working Draft are described in the 
  <a href="https://www.w3.org/TR/2018/WD-wot-thing-description-20181021/#changes">Third Public Working Draft</a>
  </p>

  </section>

  <section id="acknowledgements" class="appendix normative">
  <h1>Acknowledgements</h1>
  <p>The editors would like to thank Matthias Kovatsch, Michael Koster, Michael Lagally, Kazuyuki Ashimura, Ege Korkan,  Daniel Peintner, Kawaguchi Toru, María Poveda, Dave Raggett, Kunihiko Toumura, Takeshi Yamada, Ben Francis, Manu Sporny, Klaus Hartke, Addison Phillips and Jose M. Cantera for providing contributions, guidance and expertise.</p>
  <p>Also, many thanks to the W3C staff and all other active Participants of the W3C Web of Things Interest Group (WoT IG) and Working Group (WoT WG) for their support, technical input and suggestions that led to improvements to this document.</p>
  </section>

</body>
</html>
