<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Web of Things (WoT) Thing Description 1.1</title>
    <script src="https://www.w3.org/Tools/respec/respec-w3c" class="remove"></script>
    <script class='remove'>
          var respecConfig = {
              specStatus:     "ED"
            , crEnd: "2019-06-13"
            , previousMaturity: "FPWD"
            , previousPublishDate: "2020-11-24"
            , implementationReportURI:      "https://w3c.github.io/wot-thing-description/testing/report.html"
            //, processVersion: 2020
            //, wgPatentPolicy: "PP2017" // deprecated, "group" option sets this automatically
            , shortName:      "wot-thing-description11"
            , copyrightStart: 2017
            , noLegacyStyle:  true
            , inlineCSS:      true
            , noIDLIn:        true
            , group:          "wg/wot"
            , charterDisclosureURI : "https://www.w3.org/2004/01/pp-impl/95969/status"
            , wgPublicList:   "public-wot-wg"
            , edDraftURI:     "https://w3c.github.io/wot-thing-description/"
            , github:         "https://github.com/w3c/wot-thing-description"
            , issueBase:      "https://www.github.com/w3c/wot-thing-description/issues"
            , editors: [
                {
                  name:       "Sebastian Kaebisch"
                , w3cid:      "43064"
                , company:    "Siemens AG"
                , companyURL: "https://www.siemens.com/"
                }
              , {
                  name:       "Takuki Kamiya"
                , w3cid:      "29376"
                , company:    "Fujitsu Laboratories of America"
                , companyURL: "https://www.fujitsu.com/"
                }
                , {
                  name:       "Michael McCool"
                , w3cid:      "93137"
                , company:    "Intel"
                , companyURL: "https://www.intel.com/"
                }
                , {
                  name:       "Victor Charpenay"
                , w3cid:      "84448"
                , company:    "Siemens AG"
                , companyURL: "https://www.siemens.com/"
                }
              ]
            , localBiblio: {
                "JSON-SCHEMA": {
                  title:    "JSON Schema Validation: A Vocabulary for Structural Validation of JSON"
                , href:     "https://tools.ietf.org/html/draft-handrews-json-schema-validation-01"
                , authors: [
                    "Austin Wright"
                  , "Henry Andrews"
                  , "Geraint Luff"
                  ]
                , status:   "Internet-Draft"
                , date: "19 March 2018"
                , publisher:  "IETF"
                }
              , "OPENAPI": {
                  title:    "OpenAPI Specification: Version 3.0.1"
                , href:     "https://swagger.io/specification/"
                , authors:  [
		                "Darrel Miller"
                  , "Jason Harmon"
                  , "Jeremy Whitlock"
                  , "Kris Hahn"
                  , "Marsh Gardiner"
                  , "Mike Ralphson"
                  , "Rob Dolin"
                  , "Ron Ratovsky"
                  , "Tony Tam"
                  ]
                , publisher: "OpenAPI Initiative, Linux Foundation"
                , date: "7 December 2017"
                }
              , "SEMVER": {
                  title:    "Semantic Versioning 2.0.0"
                , href:     "https://semver.org/"
                , authors:  ["Tom Preston-Werner"]
                , date: "26 December 2017"
                }
              , "WOT-ARCHITECTURE": {
                  title: "Web of Things (WoT) Architecture 1.1"
                , href: "https://www.w3.org/TR/wot-architecture11/"
                , authors:  [
                    "Michael Lagally"
                  , "Ryuichi Matsukura"
                  , "Toru Kawaguchi"
                  , "Kunihiko Toumura"
                  , "Kazuo Kajimoto"
                  ]
                , publisher: "W3C"
                , date: "November 2020"
                }
              , "WOT-SECURITY-GUIDELINES": {
                title: "Web of Things (WoT) Security and Privacy Guidelines"
                //, href: "https://www.w3.org/TR/wot-security/"
                , href: "https://w3c.github.io/wot-security/"
                , authors:  [
                  , "Michael McCool"
                  , "Elena Reshetova"
                  ]
                , publisher: "W3C"
                , date: "March 2019"
                }
	            , "MQTT": {
                  title: "MQTT Version 3.1.1"
                , href: "http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/mqtt-v3.1.1.html"
                , authors:  [
                    "Andrew Banks",
                    "Rahul Gupta"
                  ]
                , publisher: "OASIS"
                , date: "10 December 2015"
                , status: "OASIS Standard Incorporating Approved Errata 01"
                }
	            , "ACE": {
                  title: "Authentication and Authorization for Constrained Environments (ACE) using the OAuth 2.0 Framework (ACE-OAuth)"
                , href: "https://tools.ietf.org/html/draft-ietf-ace-oauth-authz-24"
                , authors:  [
                    "L. Seitz",
                    "G. Selander",
                    "E. Wahlstroem",
                    "S. Erdtman",
                    "H. Tschofenig"
                  ]
                , publisher: "IETF"
                , date: "27 March 2019"
                , status: "Internet-Draft"
                },
                "RIJGERSBERG": {
                    "href": "http://www.semantic-web-journal.net/content/ontology-units-measure-and-related-concepts",
                    "authors": [
                        "Hajo Rijgersberg",
                        "Mark van Assem",
                        "Jan Top"
                    ],
                    "title": "Ontology of Units of Measure and Related Concepts",
                    "publisher": "Semantic Web journal, IOS Press",
                    "date": "2013"
                },
                "LDML": {
                    "title": "Unicode Technical Standard #35: Unicode Locale Data Markup Language (LDML)",
                    "href": "https://unicode.org/reports/tr35/",
                    "authors": [
                        "Mark Davis",
                        "CLDR Contributors"
                    ]
                },
                "JSON-SCHEMA-ONTOLOGY": {
                  "title": "JSON Schema in RDF"
                , "href": "https://www.w3.org/2019/wot/json-schema"
                , "authors": [
                        "Victor Charpenay",
                        "Maxime Lefrançois",
                        "María Poveda Villalón"
                  ]
                , publisher: "W3C"
                }
              }
            , otherLinks: [
                {
                  key: "Contributors"
                , data: [
                    {
                      value: "In the GitHub repository"
                    , href: "https://github.com/w3c/wot-thing-description/graphs/contributors"
                    }
                  ]
                }
              , {
                  key: "Repository",
                  data: [
                    {
                      value: "We are on GitHub"
                    , href: "https://github.com/w3c/wot-thing-description/"
                    }
                  , {
                      value: "File a bug"
                    , href: "https://github.com/w3c/wot-thing-description/issues"
                    }
                  ]
                }
              ]
            };
    </script>
<style>
a[href].internalDFN {
    color: inherit;
    border-bottom: 1px solid #99c;
    text-decoration: none;
}

.example {
		border-color: #EA1252;
		background: #FEF11E;
		counter-increment: example;
		overflow: auto;
		clear: both;
}

.with-default .with-default-control {
    margin-top: 1em;
    margin-bottom: 1em;
}

.with-default pre.selected {
    margin-top: 0;
    margin-bottom: 1em;
    height: auto;
}

.with-default pre {
    margin-top: 0;
    margin-bottom: 0;
    height: 0;
}
</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // let ReSpec do syntax highlighting first
        document.respec.ready.then(() => {
            document.querySelectorAll('.with-default').forEach(n => {
                let wo = n.querySelector('pre:nth-of-type(1)');
                let w = n.querySelector('pre:nth-of-type(2)');
                let cbox = n.querySelector('.with-default-control input[type="checkbox"]');

                w.classList.add('selected');
                cbox.checked = true;

                cbox.addEventListener('change', e => {
                    if (e.target.checked) {
                        // with default
                        w.classList.add('selected');
                        wo.classList.remove('selected');
                    } else {
                        // without
                        w.classList.remove('selected');
                        wo.classList.add('selected');
                    }
                });
            });
        });
    });
</script>
<script>
	function openTab(example, tabClass) {
	  var i;
	  var x = document.getElementsByClassName(example);
	  for (i = 0; i < x.length; i++) {
		x[i].classList.remove("selected");
		if ( x[i].classList.contains(tabClass) ) {
			x[i].classList.add("selected");
		}
	  }
	}
</script>
<style>
  /* example tab selection */
  .ds-selector-tabs {
    padding-bottom: 2em;
  }
  .ds-selector-tabs .selectors {
    padding: 0;
    border-bottom: 1px solid #ccc;
    height: 28px;
  }
  .ds-selector-tabs .selectors button {
    display: inline-block;
    min-width: 54px;
    text-align: center;
    font-size: 11px;
    font-weight: bold;
    height: 27px;
    padding: 0 8px;
    line-height: 27px;
    transition: all,0.218s;
    border-top-right-radius: 2px;
    border-top-left-radius: 2px;
    color: #666;
    border: 1px solid transparent;
  }
  .ds-selector-tabs .selectors button:first-child {
    margin-left: 2px;
  }
  .ds-selector-tabs .selectors button.selected {
    color: #202020 !important;
    border: 1px solid #ccc;
    border-bottom: 1px solid #fff !important;
  }
  .ds-selector-tabs .selectors button:hover {
    background-color: transparent;
    color: #202020;
    cursor: pointer;
  }
  .ds-selector-tabs pre, .ds-selector-tabs table {
    display: none;
  }
  .ds-selector-tabs pre.selected, .ds-selector-tabs table.selected {
    display: block;
  }
  a.playground {
    display: inline-block;
    width: 150px;
    border: 1px solid transparent;
    border-top-right-radius: 2px;
    border-top-left-radius: 2px;
    background-color: rgb(192, 192, 192);
    text-decoration: none;
    font-size: 13px;
    margin-bottom: 10px;
  }
  a[href].playground {
    padding: 4px 0 3px 8px;
    border-bottom: none;
    text-decoration: none;
    color: #666;
  }
</style>
<!-- END EXTRA TABS -->
<!-- ASSERTION HIGHLIGHTING -->
<style>
.rfc2119-assertion {
  background-color: rgb(230,230,230)
}
.at-risk {
  background-color: yellow;
}

</style>
<!-- END ASSERTION HIGHLIGHTING -->

</head>
<body>

  

  <section id="abstract">
  <p>
  This document describes a formal model and a common representation 
  for a Web of Things (WoT) Thing Description 1.1. 
  A Thing Description describes the metadata and interfaces of <a>Things</a>,
  where a <a>Thing</a> is an abstraction of a physical or virtual entity that
  provides interactions to and participates in the Web of Things. 
  Thing Descriptions provide a set of interactions based on a small vocabulary 
  that makes it possible both to integrate diverse devices and 
  to allow diverse applications to interoperate. 
  Thing Descriptions, by default, are encoded in a JSON format that also allows
  JSON-LD processing. The latter provides a powerful foundation to represent
  knowledge about <a>Things</a> in a machine-understandable way.
  A Thing Description instance can be hosted by the <a>Thing</a> itself or hosted
  externally when a <a>Thing</a> has resource restrictions (e.g., limited memory space)
  or when a Web of Things-compatible legacy device is retrofitted 
  with a Thing Description.
  </p>

  <p>
    This specification describes a superset of the features defined in Thing Description 1.0 [[WOT-THING-DESCRIPTION]]. 
    Unless otherwise specified, documents created with version 1.0 of this specification remain 
    compatible with Thing Description 1.1.
  </p>
  </section>

  <section id="sotd">
<!-- AT-RISK
    <p>
      The following <span class="at-risk">at-risk features</span> (marked in yellow throughout this specification)
      may be removed due to insufficient implementation experience
      <a href="https://w3c.github.io/wot-thing-description/testing/report.html">reported</a>
      and/or comments received during the CR period:
    </p>
    <ul>
      <li>
        Whole sections related to the security schemes described in
        <a href="#certsecurityscheme"></a>,
        <a href="#publicsecurityscheme"></a>, and
        <a href="#popsecurityscheme"></a>.
      </li>
      <li>
        Vocabulary terms and assertions related to the
        <code>implicit</code>, <code>password</code>, and <code>client</code> flows in <a href="#oauth2securityscheme"></a>.
      </li>
      <li>All default values related to the above in <a href="#sec-default-values"></a>.</li>
      <li>A <a href="#td-writeall-consumer">behavioral assertion</a> for <code>writeallproperties</code> that allows rejection of incomplete writes.</li>
    </ul>
-->
  </section>

  <section id="introduction" class="informative">
  <h1>Introduction</h1>
  <p>
  The WoT Thing Description (TD) is a central building block in the W3C Web of
  Things (WoT) and can be considered as the entry point of a <a>Thing</a>
  (much like the <i>index.html</i> of a Web site). A TD instance has four main
  components: textual metadata about the <a href="#thing">Thing</a> itself,
  a set of <a href="#interactionaffordance">Interaction Affordances</a>
  that indicate how the <a>Thing</a> can be used,
  <a href="#sec-data-schema-vocabulary-definition">schemas</a> for the data
  exchanged with the <a>Thing</a> for machine-understandability,
  and, finally, <a href="#sec-hypermedia-vocabulary-definition">Web links</a> to 
  express any formal or informal relation to other <a>Things</a> or documents on the Web.
  </p>
  <p>
  The <a>Interaction Model</a> of W3C WoT defines three types of <a>Interaction Affordances</a>:
  Properties (<a href="#propertyaffordance"><code>PropertyAffordance</code></a> class)
  can be used for sensing and controlling parameters, such as getting the current value or 
  setting an operation state.
  Actions (<a href="#actionaffordance"><code>ActionAffordance</code></a> class) model
  invocation of physical (and hence time-consuming) processes, but can also be used to 
  abstract RPC-like calls of existing platforms. 
  Events (<a href="#eventaffordance"><code>EventAffordance</code></a> class) are used
  for the push model of communication where notifications,
  discrete events, or streams of values are sent asynchronously to the receiver.
  See [[?WOT-ARCHITECTURE]] for details.
  </p>
  <p>
  In general, the TD provides metadata for different <a>Protocol Bindings</a>
  identified by URI schemes [[RFC3986]] (e.g., <code>http</code>, <code>coap</code>, etc. [[?IANA-URI-SCHEMES]]),
  content types based on media types [[RFC2046]]
  (e.g., <code>application/json</code>, <code>application/xml</code>, <code>application/cbor</code>, <code>application/exi</code>, etc. [[?IANA-MEDIA-TYPES]]),
  and security mechanisms (for authentication, authorization, confidentiality, etc.).
  Serialization of TD instances is based on JSON [[RFC8259]], where JSON names refer to terms of
  the TD vocabulary, as defined in this specification document. In addition the JSON serialization of TDs
  follows the syntax of JSON-LD 1.1 [[?JSON-LD11]] to enable extensions and rich semantic processing.
  </p>
  <p>
  <a href="#simple-thing-description-sample">Example 1</a> shows a TD instance and
  illustrates the <a>Interaction Model</a> with Properties, Actions, and Events
  by describing a lamp <a>Thing</a> with the title <i>MyLampThing</i>.
  </p>
<aside class="example" id="simple-thing-description-sample" title="Thing Description Sample">
    <pre>{
    "@context": "http://www.w3.org/ns/td",
    "id": "urn:dev:ops:32473-WoTLamp-1234",
    "title": "MyLampThing",
    "securityDefinitions": {
        "basic_sc": {"scheme": "basic", "in": "header"}
    },
    "security": "basic_sc",
    "properties": {
        "status": {
            "type": "string",
            "forms": [{"href": "https://mylamp.example.com/status"}]
        }
    },
    "actions": {
        "toggle": {
            "forms": [{"href": "https://mylamp.example.com/toggle"}]
        }
    },
    "events":{
        "overheating":{
            "data": {"type": "string"},
            "forms": [{
                "href": "https://mylamp.example.com/oh",
                "subprotocol": "longpoll"
            }]
        }
    }
}</pre>
</aside>


  <p>
  From this TD example, 
  we know there exists one <a href="#propertyaffordance">Property affordance</a>
  with the title <i>status</i>. 
  In addition, 
  information is provided to indicate that this Property is accessible via 
  (the secure form of) the HTTP protocol with a GET method 
  at the URI <code>https://mylamp.example.com/status</code> 
  (announced within the <code>forms</code> structure by the 
  <code>href</code> member), and will return a string-based status value.
  The use of the GET method is not stated explicitly,
  but is one of the default assumptions defined by this document.
  </p>
  <p>
  In a similar manner, an <a href="#actionaffordance">Action affordance</a> is specified to toggle the
  switch status using the POST method on the
  <code>https://mylamp.example.com/toggle</code> resource,
  where POST is again a default assumption for invoking Actions.
  </p>
  <p>
  The <a href="#eventaffordance">Event affordance</a> enables a mechanism for asynchronous messages
  to be sent by a <a>Thing</a>.
  Here, a subscription to be notified upon a possible overheating event 
  of the lamp can be obtained by using HTTP with its long polling
  subprotocol on <code>https://mylamp.example.com/oh</code>.
  </p>
 
  <p>
  This example also specifies the <code>basic</code> security scheme, 
  requiring a username and password for access.
  Note that a security scheme is first given a name in 
  <code>securityDefinitions</code> and then activated by specifying
  that name in a <code>security</code> section.
  In combination with the use of the HTTP protocol this example
  demonstrates the use of HTTP Basic Authentication.
  Specification of at least one security scheme at the top level is mandatory,
  and gives the default access requirements for every resource.
  However, security schemes can also be specified per-form,
  with configurations given at the form level overriding configurations given at the <code>Thing</code> level,
  allowing for the specification of fine-grained access control.
  It is also possible to use a special <code>nosec</code> security scheme to
  indicate that no access control mechanisms are used.
  Additional examples will be provided later.
  </p>

  <p>
        The Thing Description offers the possibility to add contextual definitions
        in some namespace. This mechanism can be used to integrate additional semantics
        to the content of the Thing Description instance, provided that formal knowledge,
        e.g., logic rules for a specific domain of application, can be found under the
        given namespace. Contextual information can also help specify some configurations and 
        behavior of the underlying communication protocols declared in the <code>forms</code> field.
        <a href="#thing-description-full-serialization">Example 2</a> extends the TD sample from
        Example 1 by introducing a second definition in the <code>@context</code> to declare the
        prefix <code>saref</code> as referring to <a href="https://w3id.org/saref">SAREF</a>, the
        Smart Appliance Reference Ontology [[SMARTM2M]]. This IoT ontology includes terms interpreted
        as semantic labels that can be set as values of the
        <code>@type</code> field, giving the semantics of <a>Things</a> and their
        <a>Interaction Affordances</a>. In the example below, the <a>Thing</a> is labelled with
        <code>saref:LightSwitch</code>, the <code>status</code> <a>Property</a> is labelled with
        <code>saref:OnOffState</code> and the <code>toggle</code> <a>Action</a> with
        <code>saref:ToggleCommand</code>.
  </p>


 
 <aside class="example" id="thing-description-full-serialization" title="Thing Description with TD Context Extension for semantic annotations">
              <pre>
    {
        "@context": [
            "http://www.w3.org/ns/td",
            { "saref": "https://w3id.org/saref#" }
        ],
        "id": "urn:dev:ops:32473-WoTLamp-1234",
        "title": "MyLampThing",
        "@type": "saref:LightSwitch",
        "securityDefinitions": {
            "basic_sc": {"scheme": "basic", "in": "header"}
        },
        "security": "basic_sc",
        "properties": {
            "status": {
                "@type": "saref:OnOffState",
                "type": "string",
                "forms": [{
                    "href": "https://mylamp.example.com/status"
                }]
            }
        },
        "actions": {
            "toggle": {
                "@type": "saref:ToggleCommand",
                "forms": [{
                    "href": "https://mylamp.example.com/toggle"
                }]
            }
        },
        "events": {
            "overheating": {
                "data": {"type": "string"},
                "forms": [{
                    "href": "https://mylamp.example.com/oh"
                }]
            }
        }
    }</pre>
</aside>

<p>
    The declaration mechanism inside some
    <code>@context</code> is specified by JSON-LD. A TD instance complies to version 1.1 of
    that specification [[?json-ld11]]. Hence, a TD instance can be also processed as an RDF
    document (for details about semantic processing, please refer to Appendix
    <a href="#json-ld-ctx-usage"></a> and the documentation under the namespace IRIs, e.g.,
    <a href="https://www.w3.org/2019/wot/td">https://www.w3.org/2019/wot/td</a>).
</p>

</section>

<section id="conformance">
<p>
A Thing Description instance complies with this specification if it follows 
the normative statements in
<a href="#sec-vocabulary-definition"></a>
and
<a href="#sec-td-serialization"></a> 
regarding Thing Description serialization.
</p>
<p>
A JSON Schema [[?JSON-SCHEMA]] to validate Thing Description instances
is provided in Appendix <a href="#json-schema-for-validation"></a>.
</p>

</section>

<section id="terminology" class="informative"> 
<h2>Terminology</h2>

  <p>The fundamental WoT terminology such as
  <dfn>Thing</dfn>,
  <dfn>Consumer</dfn>,
  <dfn>Thing Description</dfn> (<dfn>TD</dfn>),
  <dfn>Interaction Model</dfn>,
  <dfn>Interaction Affordance</dfn>,
  <dfn>Property</dfn>,
  <dfn>Action</dfn>,
  <dfn>Event</dfn>,
  <dfn>Protocol Binding</dfn>,
  <dfn>Servient</dfn>,
  <dfn>WoT Interface</dfn>,
  <dfn>WoT Runtime</dfn>,
  etc. is defined in <a href="https://www.w3.org/TR/wot-architecture/#terminology">Section 3</a>
  of the WoT Architecture specification [[?WOT-ARCHITECTURE]].
  </p>

  <p>
      In addition, this specification introduces the following definitions:
  </p>

  <dl>
    <dt>
        <dfn id="dfn-canonical-td">Canonical TD</dfn>
    </dt>
    <dd>
        A unique serialization of the information in a <a>Thing Description</a> 
        to support operations where TDs are compared as strings, such as
        differencing or signing.
    </dd>
    <dt>
        <dfn id="dfn-context-ext">TD Context Extension</dfn>
    </dt>
    <dd>
        A mechanism to extend <a>Thing Descriptions</a> with additional <a>Vocabulary
        Terms</a>. It is the basis for semantic annotations and extensions to core
        mechanisms such as Protocol Bindings, Security Schemes, and Data Schemas.
    </dd>
    <dt>
        <dfn id="dfn-inf-model">TD Information Model</dfn>
    </dt>
    <dd>
        Set of <a>Class</a> definitions constructed from pre-defined <a>Vocabularies</a>
        on which constraints apply, thus defining the semantics of these <a>Vocabularies</a>.
        Class definitions are typically expressed in terms of a <a>Signature</a> (a set of
        <a>Vocabulary Terms</a>) and functions over that <a>Signature</a>. The <a>TD
        Information Model</a> also includes <a>Default Values</a>, defined as a global
        function over <a>Classes</a>.
    </dd>
    <dt>
    <dfn id="dfn-td-processor">TD Processor</dfn>
    </dt>
    <dd>
        A system that can serialize some internal representation of a <a>Thing Description</a>
        in a given format and/or deserialize it from that format. A <a>TD Processor</a> must detect
        semantically inconsistent <a>Thing Descriptions</a>, that is, <a>Thing Descriptions</a>
        that cannot satisfy constraints on the <a>Instance Relation</a> of the <code>Thing</code>
        class. For that purpose, a <a>TD Processor</a> may compute forms of <a>Thing
        Descriptions</a> in which all possible <a>Default Values</a> are assigned. A <a>TD Processor</a>
        is typically a sub-system of a <a>WoT Runtime</a>.
        Implementations of a TD Processor may be a TD producer only (able to serialize to TD Documents)
        or a TD consumer only (able to deserialize from TD Documents).
    </dd>
    <dt>
        <dfn id="dfn-td-serialization">TD Serialization</dfn>
        or
        <dfn id="dfn-td-document">TD Document</dfn>
    </dt>
    <dd>
        Textual or binary representation of <a>Thing Descriptions</a> that can be stored and
        exchanged between <a>Servients</a>. A <a>TD Serialization</a> follows a given representation
        format,  identified by a media type when exchanged over the network.
        The default representation format for <a>Thing Descriptions</a> is JSON-based as defined by
        this specification.
    </dd>
    <dt>
    <dfn id="dfn-thing-model">Thing Model</dfn>
    </dt>
    <dd>
        A <a>Thing Model</a> is a description for a class of Things that have the same 
        capabilities. It describes the <a>Properties</a>, <a>Actions</a>, and <a>Events</a> and common metadata that are 
        shared for an entire group of <a>Things</a>. Compared to a Thing Description, a Thing Model does not contain enough 
        information to identify or interact with a Thing instance.
    </dd>
    <dt>
        <dfn id="dfn-vocab">Vocabulary</dfn>
    </dt>
    <dd>
        A collection of <a>Vocabulary Terms</a>, identified by a namespace IRI.
    </dd>
    <dt>
        <dfn id="dfn-term">Term</dfn>
        and
        <dfn id="dfn-vocab-term">Vocabulary Term</dfn>
    </dt>
    <dd>
        A character string. When a <a>Term</a> is part of a <a>Vocabulary</a>, i.e., prefixed by
        a namespace IRI, it is called a <a>Vocabulary Term</a>. For the sake of readability,
        <a>Vocabulary Terms</a> present in this document are always written in a compact
        form and not as full IRIs.
    </dd>
  </dl>

  <p>
      These definitions are further developed in <a href="#preliminary-definitions"></a>.
  </p>
</section>

<section class="normative">
  <h1>Namespaces</h1>

  <p class="note">
    The following introduced namespaces for Thing Description 1.1 are placeholders for the time the specification has the <i>Draft</i> status. 
  Final namespaces are introduced at the time of the <i>Candidate Recommendation</i>status.  
  </p>

  <p>
      The version of the <a>TD Information Model</a>
      defined in <a href="#sec-vocabulary-definition"></a> of this specification
      is identified by the following IRI:
  </p>
  <p>
    <code>https://www.w3.org/ns/td</code>
  </p>
  <p>
      This IRI [[RFC3987]], which is also a URI [[!RFC3986]], can be dereferenced to obtain a
      <a href="https://www.w3.org/ns/td">JSON-LD context file</a> [[?json-ld11]],
      allowing the compact strings in <a>TD Documents</a> to be expanded to full IRI-based
      <a>Vocabulary Terms</a>. However, this processing is only required when transforming
      JSON-based <a>TD Documents</a> to RDF, an optional feature of <a>TD Processor</a>
      implementations.
  </p>



    <p>
        In the present specification, <a>Vocabulary Terms</a> are always presented in their compact form.
        Their expanded form can be accessed under the namespace IRI of the <a>Vocabulary</a> they
        belong to. These namespaces follow the structure of <a href="#class-definitions"></a>.
        Each <a>Vocabulary</a> used in the <a>TD Information Model</a> has its own namespace IRI,
        as follows:
    </p>
  
    <table class="def">
    <thead>
        <tr>
            <th>Vocabulary</th>
            <th>Namespace IRI</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Core</td>
            <td><code>http://www.w3.org/ns/td</code></td>
        </tr>
        <tr>
            <td>Data Schema</td>
            <td><code>https://www.w3.org/ns/json-schema</code></td>
        </tr>
        <tr>
            <td>Security</td>
            <td><code>https://www.w3.org/ns/security</code></td>
        </tr>
        <tr>
            <td>Hypermedia Controls</td>
            <td><code>https://www.w3.org/ns/hypermedia</code></td>
        </tr>
    </tbody>
    </table>
  
    <p>
        The <a>Vocabularies</a> are independent from each other.
        They may be reused and extended in other W3C specifications.
        Every breaking change in the design of a <a>Vocabulary</a>
        will require the assignment of a new year-based namespace URI.
        Note that to maintain the general coherence of the <a>TD Information Model</a>,
        the associated JSON-LD context file is versioned such that every version has its own URI
        (<code>v1</code>, <code>v1.1</code>, <code>v2</code>, ...)
        to also identify non-breaking changes, in particular the addition of new <a>Terms</a>.
    </p>

    <p>
        Because a <a>Vocabulary</a> under some namespace IRI can only undergo non-breaking
        changes, its content can be safely cached or embedded in applications. One 
        advantage of exposing relatively static content under a namespace IRI is to
        optimize payload sizes of messages exchanged between constrained devices. It
        also avoids any privacy leakage resulting from devices accessing publicly
        available vocabularies from private networks (see also
        <a href="#sec-security-consideration-context"></a>).
    </p>

  </section>
  

  <section id="sec-vocabulary-definition" class="normative">
    <h1>TD Information Model</h1>

    <p>
      This section introduces the <a>TD Information Model</a>.
      The <a>TD Information Model</a> serves as the conceptual basis
      for the processing of Thing Descriptions and their serialization,
      which is described separately in <a href="#sec-td-serialization"></a>.
    <p>

      <section>
      <h2>Overview</h2>
    
      <p>
        The <a>TD Information Model</a> is built upon the following, independent <a>Vocabularies</a>:
        <ul>
            <li>
                the <em>core</em> TD <a>Vocabulary</a>, which reflects the
                <a>Interaction Model</a> with the <a>Properties</a>, <a>Actions</a>, and <a>Events</a>
                <a>Interaction Affordances</a> [[?WOT-ARCHITECTURE]]
            </li>
            <li>
                the <em>Data Schema</em> <a>Vocabulary</a>, including (a subset of)
                the terms defined by JSON Schema [[?JSON-SCHEMA]]
            </li>
            <li>
                the <em>WoT Security</em> <a>Vocabulary</a>, identifying security mechanisms
                and requirements for their configuration
            </li>
            <li>
                the <em>Hypermedia Controls</em> <a>Vocabulary</a>, encoding the main principles of RESTful
                communication using Web links and forms
            </li>
        </ul>
      </p>

      <p>
          Each of these <a>Vocabularies</a> is essentially a set of <a>Terms</a> that can
          be used to build data structures, interpreted as objects in the
          traditional object-oriented sense. Objects are instances of classes
          and have properties. In the context of W3C WoT, they denote <a>Things</a> and
          their <a>Interaction Affordances</a>. A formal definition of objects is given in
          <a href="#preliminary-definitions"></a>. The main elements of
          the <a>TD Information Model</a> are then presented in
          <a href="#class-definitions"></a>. Certain object properties may be
          omitted in a TD when <a>Default Values</a> exist. A list of defaults
          is given in <a href="#sec-default-values"></a>.
      </p>

      <p>
          The UML diagram shown next gives an overview of the <a>TD Information Model</a>.
          It represents all classes as tables and the associations that exist between
          classes, starting from the class <a href="#thing"><code>Thing</code></a>,
          as directed arrows. For the sake of readability, the diagram was split in
          four parts, one for each of the four base <a>Vocabularies</a>.
      </p>
      
      <!--<p><a href="http://visualdataweb.de/webvowl/#iri=https://rawgit.com/w3c/wot-thing-description/TD-JSON-LD-1.1/ontology/td.ttl">Click here for the visualization</a></p>-->

      <p class="note">
        The following figures are automatically generated based on the underlying ontology definitions. 
      </p>

    <figure id="td-core-model">
      <img src="visualization/td.svg" alt="UML diagram of the TD information model for the TD core vocabulary"/>
      <figcaption>TD core vocabulary (<a href="visualization/td.svg">SVG file</a>)</figcaption>
    </figure>
    
    <hr>

    <figure id="td-data-schema-model">
      <img src="visualization/jsonschema.svg" alt="UML diagram of the TD information model for the Data schema vocabulary"/>
      <figcaption>Data schema vocabulary (<a href="visualization/jsonschema.svg">SVG file</a>)</figcaption>
    </figure>
    
    <hr>
    
    <figure id="td-security-model">
      <img src="visualization/wotsec.svg" alt="UML diagram of the TD information model for the WoT security vocabulary"/>
      <figcaption>WoT security vocabulary (<a href="visualization/wotsec.svg">SVG file</a>)</figcaption>
    </figure>
    
    <hr>
    
    <figure id="hypermedia-model">
      <img src="visualization/hctl.svg" alt="UML diagram of the TD information model for the hypermedia controls vocabulary"/>
      <figcaption>Hypermedia controls vocabulary (<a href="visualization/hctl.svg">SVG file</a>)</figcaption>
    </figure>

    </section>

    <section id="preliminary-definitions">

        <h2>Preliminaries</h2>

        <p>
            To provide a model that can be easily processed by both,
            simple rules on a tree-based document (i.e., raw JSON processing)
            and rich Semantic Web tooling (i.e., JSON-LD processing),
            this document defines the following formal preliminaries
            to construct the <a>TD Information Model</a> accordingly.
        </p>

        <p>
            All definitions in this section refer to <em>sets</em>, which
            intuitively are collections of elements that can themselves be sets.
            All arbitrarily complex data structures can be defined in terms
            of sets. In particular, an <dfn>Object</dfn> is a data structure
            recursively defined as follows:
        </p>

        <ul>
            <li>
                a <a>Term</a>, which may or may not belong to a <a>Vocabulary</a>,
                is an <a>Object</a>.
            </li>
            <li>
                a set of name-value pairs where the name is a <a>Term</a> and the
                value is another <a>Object</a>, is also an <a>Object</a>.
            </li>
        </ul>

        <p>
            Though this definition does not prevent <a>Objects</a> to include multiple
            name-value pairs with the same name, they are generally not considered
            in this specification. An <a>Object</a> whose elements only have numbers
            as names is called an <dfn>Array</dfn>. Similarly, an <a>Object</a> whose
            elements only have <a>Term</a>s (that do not belong to any <a>Vocabulary</a>)
            as names is called a <dfn>Map</dfn>. All names appearing in some name-value pair
            in a <a>Map</a> are assumed to be <em>unique</em> within the scope of the
            <a>Map</a>.
        </p>

        <p>
            Moreover, <a>Object</a>s can be instances of some <dfn>Class</dfn>.
            A <a>Class</a>, which is denoted by a <a>Vocabulary Term</a>, is
            first defined by a set of <a>Vocabulary Terms</a> called a <dfn>Signature</dfn>. A
            <a>Class</a> whose <a>Signature</a> is empty is called a <dfn>Simple Type</dfn>.
        </p>

        <p>
            The <a>Signature</a> of a <a>Class</a> allows to construct two functions that further
            define <a>Classes</a>: an <dfn>Assignment Function</dfn> and a <dfn>Type Function</dfn>.
            The <a>Assignment Function</a> of a <a>Class</a> takes a <a>Vocabulary Term</a> of the
            <a>Class</a>'s <a>Signature</a> as input and returns either <code>true</code> or
            <code>false</code> as output. Intuitively, the <a>Assignment Function</a> indicates
            whether an element of the <a>Signature</a> is mandatory or optional when instantiating
            the <a>Class</a>. The <a>Type Function</a> of a <a>Class</a> also takes a <a>Vocabulary
            Term</a> of the <a>Class</a>'s <a>Signature</a> as input and returns another <a>Class</a>
            as output. These functions are <em>partial</em>: their domain is limited to the
            <a>Signature</a> of the <a>Class</a> being defined.
        </p>

        <p>
            On the basis of these two functions, an <dfn>Instance Relation</dfn> can be defined
            for a pair composed of an <a>Object</a> and a <a>Class</a>. This relation is defined as
            constraints to be satisfied. That is, an <a>Object</a> is an instance of a <a>Class</a>
            if the two following constraints are <em>both</em> satisfied:
            <ul>
                <li>
                    if for every <a>Term</a> for which the <a>Assignment Function</a> of the <a>Class</a>
                    returns <code>true</code>, the <a>Object</a> includes a name-value pair with the
                    <a>Vocabulary Term</a> as name.
                </li>
                <li>
                    if for every <a>Vocabulary Term</a> in the <a>Signature</a> of the <a>Class</a>
                    used as name in some name-value pair of the <a>Object</a>, the value of that pair
                    is an instance of the <a>Class</a> returned by the <a>Type Function</a> of the
                    <a>Class</a> for the given <a>Vocabulary Term</a>.
                </li>
            </ul>
        </p>

        <p>
            According to the definition above, an <a>Object</a> would be an instance of every <a>Simple
            Type</a>, regardless of its structure. Instead, another definition for the <a>Instance
            Relation</a> is introduced for <a>Simple Types</a>: an <a>Object</a> is an instance
            of a <a>Simple Type</a> if it is a <a>Term</a> with a given lexical form (e.g., <code>true</code>,
            <code>false</code> for the <code>boolean</code> type, <code>1</code>, <code>2</code>,
            <code>3</code>, ... for the <code>unsignedInt</code> type, etc.).
        </p>

        <p>
            Moreover, additional <a>Classes</a>, called <dfn>Parameterized Classes</dfn>, can be derived
            from the generic <a>Map</a> and <a>Array</a> structures. An <a>Object</a> is a <a>Map</a> of some
            <a>Class</a>, that is, an instance of the <a>Map</a> type <em>parameterized</em> with some
            <a>Class</a>, if it is a <a>Map</a> such that the value in all the name-value pairs it contains is
            an instance of this <a>Class</a>. The same applies to <a>Arrays</a>.
        </p>

        <p>
            Finally, a <a>Class</a> is a <dfn>Subclass</dfn> of some other <a>Class</a> if every instance of
            the former is also an instance of the latter.
        </p>

        <p>
            Given all definitions above, the <a>TD Information Model</a> is to be understood
            as a set of <a>Class</a> definitions,
            which include a <a>Class</a> name (a <a>Vocabulary Term</a>),
            a <a>Signature</a> (a set of <a>Vocabulary Terms</a>),
            an <a>Assignment Function</a>,
            and a <a>Type Function</a>.
            These <a>Class</a> definitions are provided as tables in <a href="#class-definitions"></a>.
            For each table, the values "mandatory" (respectively, "optional") in the assignment column
            indicates that the <a>Assignment Function</a> returns <code>true</code>
            (respectively, <code>false</code>) for the corresponding <a>Vocabulary Term</a>.
        </p>

        <p>
            By convention, <a>Simple Types</a> are denoted by names starting with lowercase.
            The <a>TD Information Model</a> references the following <a>Simple Types</a> 
            defined in XML Schema [[XMLSCHEMA11-2-20120405]]:
            <code>string</code>,
            <code>anyURI</code>,
            <code>dateTime</code>,
            <code>integer</code>,
            <code>unsignedInt</code>,
            <code>double</code>, and
            <code>boolean</code>.
            Their definition (i.e., the specification of their lexical form) is outside of the
            scope of the <a>TD Information Model</a>.</p>
        <p>
            In addition, the <a>TD Information Model</a> defines a global function on
            pairs of <a>Vocabulary Terms</a>. The function takes a <a>Class</a> name and
            another <a>Vocabulary Term</a> as input and
            returns an <a>Object</a>. If the returned <a>Object</a> is different from
            <code>null</code>, it represents the <dfn>Default Value</dfn> for some
            assignment on the input <a>Vocabulary Term</a> in an instance of the input
            <a>Class</a>. This function allows to relax the constraint
            defined above on the <a>Assignment Function</a>:
            an <a>Object</a> is an instance of a <a>Class</a> if it includes all mandatory
            assignments <em>or</em> if <a>Default Value</a> exist for the missing
            assignments. All <a>Default Values</a> are given in the table of
            <a href="#sec-default-values"></a>. In each table of
            <a href="#class-definitions"></a>, the assignment column contains the value
            "with default" if a <a>Default Value</a> is available for the corresponding
            combination of <a>Class</a> and <a>Vocabulary Term</a> in the <a>TD
            Information Model</a>.
        </p>

        <p>
            The formalization introduced here does not consider the possible relation
            between <a>Objects</a> as abstract data structures and physical world objects
            such as <a>Things</a>. However, care was given to the possibility of re-interpreting
            all <a>Vocabulary Terms</a> involved in the <a>TD Information Model</a> as RDF
            resources, so as to integrate them in a larger model of the physical world
            (an ontology).
            For details about semantic processing, please refer to 
            <a href="#json-ld-ctx-usage"></a> and the documentation under the namespace IRIs, e.g.,
            <a href="https://www.w3.org/2019/wot/td">https://www.w3.org/2019/wot/td</a>.
        </p>

    </section>
    
      <section>

        <h2>Class Definitions</h2>

        <p>
            <span class="rfc2119-assertion" id="td-processor">
                A <a>TD Processor</a> MUST satisfy the
                <a>Class</a> instantiation constraints on all <a>Classes</a> defined in
                <a href="#sec-core-vocabulary-definition"></a>,
                <a href="#sec-data-schema-vocabulary-definition"></a>,
                <a href="#sec-security-vocabulary-definition"></a>,
                and <a href="#sec-hypermedia-vocabulary-definition"></a>.
            </span>
        </p>

      <section id="sec-core-vocabulary-definition">
      <h2>Core Vocabulary Definitions</h2>

      <!-- rendered from RDF definitions -->
      <section><h3><code>Thing</code></h3><p>An abstraction of a physical or a virtual entity whose
          metadata and interfaces are described by a WoT Thing
          Description, whereas a virtual entity is the composition
          of one or more Things.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-at-context--Thing"><td><code>@context</code></td><td>JSON-LD keyword to define short-hand names called terms that are used throughout a TD document.</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a> or <a>Array</a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-at-type--Thing"><td><code>@type</code></td><td>JSON-LD keyword to label the object with semantic tags (or types).</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-id--Thing"><td><code>id</code></td><td>Identifier of the Thing in form of a URI [[RFC3986]] (e.g., stable URI, temporary and mutable URI, URI with local IP address, URN, etc.).</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-title--Thing"><td><code>title</code></td><td>Provides a human-readable title (e.g., display
                a text for UI representation) based on a default
                language.</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-titles--Thing"><td><code>titles</code></td><td>Provides multi-language human-readable titles
                (e.g., display a text for UI representation in
                different languages). Also see <cite><a href='#multilanguage'>MultiLanguage</a></cite>.</td><td>optional</td><td><a>Map</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-description--Thing"><td><code>description</code></td><td>Provides additional (human-readable)
                      information based on a default language.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-descriptions--Thing"><td><code>descriptions</code></td><td>Can be used to support (human-readable)
                       information in different languages. Also see <cite><a href='#multilanguage'>MultiLanguage</a></cite>.</td><td>optional</td><td><a>Map</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-version--Thing"><td><code>version</code></td><td>Provides version information.</td><td>optional</td><td><a href="#versioninfo"><code>VersionInfo</code></a> or <a>Array</a> of <a href="#versioninfo"><code>VersionInfo</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-created--Thing"><td><code>created</code></td><td>Provides information when the TD instance was
                created.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#dateTime"><code>dateTime</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-modified--Thing"><td><code>modified</code></td><td>Provides information when the TD instance was
                last modified.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#dateTime"><code>dateTime</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-support--Thing"><td><code>support</code></td><td>Provides information about the TD maintainer as
                URI scheme (e.g., <code>mailto</code>
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6068" title="The 'mailto' URI Scheme">RFC6068</a></cite>],
                <code>tel</code> [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc3966" title="The tel URI for Telephone Numbers">RFC3966</a></cite>],
                <code>https</code>).</td><td>optional</td><td>any type</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-properties--Thing"><td><code>properties</code></td><td>All Property-based <a href="#dfn-interaction-affordance" class="internalDFN" data-link-type="dfn">Interaction Affordances</a>
                  of the Thing.</td><td>optional</td><td><a>Map</a> of <a href="#propertyaffordance"><code>PropertyAffordance</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-actions--Thing"><td><code>actions</code></td><td>All Action-based <a href="#dfn-interaction-affordance" class="internalDFN" data-link-type="dfn">Interaction Affordances</a>
                  of the Thing.</td><td>optional</td><td><a>Map</a> of <a href="#actionaffordance"><code>ActionAffordance</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-events--Thing"><td><code>events</code></td><td>All Event-based <a href="#dfn-interaction-affordance" class="internalDFN" data-link-type="dfn">Interaction Affordances</a>
                  of the Thing.</td><td>optional</td><td><a>Map</a> of <a href="#eventaffordance"><code>EventAffordance</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-links--Thing"><td><code>links</code></td><td>Provides Web links to arbitrary resources that
                relate to the specified Thing Description.</td><td>optional</td><td><a>Array</a> of <a href="#link"><code>Link</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-forms--Thing"><td><code>forms</code></td><td>Set of form hypermedia controls that describe how
                  an operation can be performed. Forms are
                  serializations of Protocol Bindings. In this
                  version of TD, all operations that can be
                  described at the Thing level are concerning how
                  to interact with the Thing's <a href="#propertyaffordance">Properties</a> collectively
                  at once.</td><td>optional</td><td><a>Array</a> of <a href="#form"><code>Form</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-security--Thing"><td><code>security</code></td><td>Set of security definition names, chosen from
                those defined in <code>securityDefinitions</code>.
                These must all be satisfied for access to
                resources.</td><td>mandatory</td><td><a href="#securityscheme"><code>SecurityScheme</code></a> or <a>Array</a> of <a href="#securityscheme"><code>SecurityScheme</code></a></td></tr></tbody></table><p><span class="rfc2119-assertion" id=
          "td-context-ns-thing-mandatory">The <code>@context</code>
          name-value pair <em class="rfc2119" title=
          "MUST">MUST</em> contain the anyURI
          <code>https://www.w3.org/2019/wot/td/v1</code> either
          directly when of type <code>anyURI</code> or as first
          element when of type <a href="#dfn-array" class=
          "internalDFN" data-link-type="dfn">Array</a>.</span>
          <span class="rfc2119-assertion" id=
          "td-context-ns-thing-optional">When <code>@context</code>
          is an <a href="#dfn-array" class="internalDFN"
          data-link-type="dfn">Array</a>, the anyURI
          <code>https://www.w3.org/2019/wot/td/v1</code> <em class=
          "rfc2119" title="MAY">MAY</em> be followed by elements of
          type <code>anyURI</code> or type <a href="#dfn-map"
          class="internalDFN" data-link-type="dfn">Map</a> in any
          order, while it is <em class="rfc2119" title=
          "RECOMMENDED">RECOMMENDED</em> to include only one
          <a href="#dfn-map" class="internalDFN" data-link-type=
          "dfn">Map</a> with all the name-value pairs in the
          <code>@context</code> <a href="#dfn-array" class=
          "internalDFN" data-link-type="dfn">Array</a>.</span>
          <span class="rfc2119-assertion" id=
          "td-context-ns-thing-map-of-namespaces"><a href=
          "#dfn-map" class="internalDFN" data-link-type=
          "dfn">Maps</a> contained in an <code>@context</code>
          <a href="#dfn-array" class="internalDFN" data-link-type=
          "dfn">Array</a> <em class="rfc2119" title="MAY">MAY</em>
          contain name-value pairs, where the value is a namespace
          identifier of type <code>anyURI</code> and the name a
          <a href="#dfn-term" class="internalDFN" data-link-type=
          "dfn">Term</a> or prefix denoting that namespace.</span>
          <span class="rfc2119-assertion" id=
          "td-context-default-language">One <a href="#dfn-map"
          class="internalDFN" data-link-type="dfn">Map</a>
          contained in an <code>@context</code> <a href=
          "#dfn-array" class="internalDFN" data-link-type=
          "dfn">Array</a> <em class="rfc2119" title=
          "SHOULD">SHOULD</em> contain a name-value pair that
          defines the default language for the Thing Description,
          where the name is the <a href="#dfn-term" class=
          "internalDFN" data-link-type="dfn">Term</a>
          <code>@language</code> and the value is a well-formed
          language tag as defined by [<cite><a class="bibref"
          data-link-type="biblio" href="#bib-bcp47" title=
          "Tags for Identifying Languages">BCP47</a></cite>] (e.g.,
          <code>en</code>, <code>de-AT</code>, <code>gsw-CH</code>,
          <code>zh-Hans</code>, <code>zh-Hant-HK</code>,
          <code>sl-nedis</code>).</span></p>
          <p>The computation of the base direction of all
          human-readable text strings is defined by the following
          set of rules:</p>
          <ul>
            <li><span class="rfc2119-assertion" id=
            "td-context-default-language-direction-heuristic">If no
            language tag is given, the base direction <em class=
            "rfc2119" title="SHOULD">SHOULD</em> be inferred
            through first-strong heuristics or detection algorithms
            such as the CLDR Likely Subtags [<cite><a class=
            "bibref" data-link-type="biblio" href="#bib-ldml"
            title="Unicode Technical Standard #35: Unicode Locale Data Markup Language (LDML)">LDML</a></cite>].</span></li>
            <li><span class="rfc2119-assertion" id=
            "td-context-default-language-direction-inference">Outside
            of <code>MultiLanguage</code> <a href="#dfn-map" class=
            "internalDFN" data-link-type="dfn">Maps</a>, the base
            direction <em class="rfc2119" title="MAY">MAY</em> be
            inferred from the language tag of the default
            language.</span></li>
            <li><span class="rfc2119-assertion" id=
            "td-context-ns-multilanguage-text-direction-infer">Inside
            of <code>MultiLanguage</code> <a href="#dfn-map" class=
            "internalDFN" data-link-type="dfn">Maps</a>, the base
            direction of each value of the name-value pairs
            <em class="rfc2119" title="MAY">MAY</em> be inferred
            from the language tag given in the corresponding
            name.</span></li>
            <li><span class="rfc2119-assertion" id=
            "td-context-default-language-direction-script">In cases
            where a language can be written in more than one script
            with different base directions, the corresponding
            language tag given in <code>@language</code> or
            <code>MultiLanguage</code> <a href="#dfn-map" class=
            "internalDFN" data-link-type="dfn">Maps</a> <em class=
            "rfc2119" title="MUST">MUST</em> include a script
            subtag, so that an appropriate base direction can be
            inferred.</span> An example is Azeri, which is written
            LTR when Latin script is used (specified using
            <code>az-Latn</code>) and RTL when Arabic script is
            used (specified using <code>az-Arab</code>).</li>
          </ul>
          <p><a href="#dfn-td-processor" class="internalDFN"
          data-link-type="dfn">TD Processors</a> should be aware of
          certain special cases when processing bidirectional text.
          They should take care to use bidi isolation when
          presenting strings to users, particularly when embedding
          in surrounding text (e.g., for Web user interface). Mixed
          direction text can occur in any language, even when the
          language is properly identified.</p>
          <p>TD producers should attempt to provide mixed direction
          strings in a way that can be displayed successfully by a
          naive user agent. For example, if an RTL string begins
          with an LTR run (such as a number or a brand or trade
          name in Latin script), including an RLM character at the
          start of the string or wrapping opposite direction runs
          in bidi controls can assist in proper display.</p>
          <p><em>Strings on the Web: Language and Direction
          Metadata</em> [<cite><a class="bibref" data-link-type=
          "biblio" href="#bib-string-meta" title=
          "Strings on the Web: Language and Direction Metadata">string-meta</a></cite>]
          provides some guidance and illustrates a number of
          pitfalls when using bidirectional text.</p>
          <p id="meta-interactions-of-thing">In addition to the
          explicitly provided <a href="#dfn-interaction-affordance"
          class="internalDFN" data-link-type="dfn">Interaction
          Affordances</a> in the <code>properties</code>,
          <code>actions</code>, and <code>events</code> <a href=
          "#dfn-array" class="internalDFN" data-link-type=
          "dfn">Arrays</a>, a <a href="#dfn-thing" class=
          "internalDFN" data-link-type="dfn">Thing</a> can also
          provide meta-interactions, which are indicated by
          <code>Form</code> instances in its optional
          <code>forms</code> <a href="#dfn-array" class=
          "internalDFN" data-link-type="dfn">Array</a>.
          <span class="rfc2119-assertion" id="td-op-for-thing">When
          the <code>forms</code> <a href="#dfn-array" class=
          "internalDFN" data-link-type="dfn">Array</a> of a
          <a href="#dfn-thing" class="internalDFN" data-link-type=
          "dfn">Thing</a> instance contains <code>Form</code>
          instances, the string values assigned to the name
          <code>op</code>, either directly or within an <a href=
          "#dfn-array" class="internalDFN" data-link-type=
          "dfn">Array</a>, <em class="rfc2119" title=
          "MUST">MUST</em> be one of the following <em>operation
          types</em>: <code>readallproperties</code>,
          <code>writeallproperties</code>,
          <code>readmultipleproperties</code>,
          <code>writemultipleproperties</code>, <code>observeallproperties</code>, or
          <code>unobserveallproperties</code>.</span> (See
          <a href="#td-forms-readall-example">an example</a> for an
          usage of <code>form</code> in a Thing instance.)</p>
          <p>The data schema for each of these meta-interactions is
          constructed by combining the data schemas of each
          <code>PropertyAffordance</code> instance in a single
          <code>ObjectSchema</code> instance, where the
          <code>properties</code> <a href="#dfn-map" class=
          "internalDFN" data-link-type="dfn">Map</a> of the
          <code>ObjectSchema</code> instance contains each data
          schema of the <code>PropertyAffordances</code> identified
          by the name of the corresponding
          <code>PropertyAffordances</code> instance.</p>
          <p>If not specified otherwise (e.g., through a <a href=
          "#dfn-context-ext" class="internalDFN" data-link-type=
          "dfn">TD Context Extension</a>), the request data of the
          <code>readmultipleproperties</code> operation is an
          <a href="#dfn-array" class="internalDFN" data-link-type=
          "dfn">Array</a> that contains the intended
          <code>PropertyAffordances</code> instance names, which is
          serialized to the content type specified by the
          <code>Form</code> instance.</p></section>
<section><h3><code>InteractionAffordance</code></h3><p>Metadata of a Thing that shows the possible choices to
          <a href="#dfn-consumer" class="internalDFN" data-link-type="dfn">Consumers</a>, thereby suggesting
          how <a href="#dfn-consumer" class="internalDFN" data-link-type="dfn">Consumers</a> may interact with the
          Thing. There are many types of potential affordances, but
          <abbr title="World Wide Web Consortium">W3C</abbr> WoT
          defines three types of Interaction Affordances:
          Properties, Actions, and Events.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-at-type--InteractionAffordance"><td><code>@type</code></td><td>JSON-LD keyword to label the object with semantic tags (or types).</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-title--InteractionAffordance"><td><code>title</code></td><td>Provides a human-readable title (e.g., display
                a text for UI representation) based on a default
                language.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-titles--InteractionAffordance"><td><code>titles</code></td><td>Provides multi-language human-readable titles
                (e.g., display a text for UI representation in
                different languages). Also see <cite><a href='#multilanguage'>MultiLanguage</a></cite>.</td><td>optional</td><td><a>Map</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-description--InteractionAffordance"><td><code>description</code></td><td>Provides additional (human-readable)
                      information based on a default language.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-descriptions--InteractionAffordance"><td><code>descriptions</code></td><td>Can be used to support (human-readable)
                       information in different languages. Also see <cite><a href='#multilanguage'>MultiLanguage</a></cite>.</td><td>optional</td><td><a>Map</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-forms--InteractionAffordance"><td><code>forms</code></td><td>Set of form hypermedia controls that describe
                how an operation can be performed. Forms are
                serializations of Protocol Bindings.</td><td>mandatory</td><td><a>Array</a> of <a href="#form"><code>Form</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-uriVariables--InteractionAffordance"><td><code>uriVariables</code></td><td>Define URI query template variables as collection
                based on DataSchema declarations.</td><td>optional</td><td><a>Map</a> of <a href="#dataschema"><code>DataSchema</code></a></td></tr></tbody></table><p>The class <code>InteractionAffordance</code> has the following subclasses:</p><ul><li><a href="#propertyaffordance"><code>PropertyAffordance</code></a></li>
<li><a href="#actionaffordance"><code>ActionAffordance</code></a></li>
<li><a href="#eventaffordance"><code>EventAffordance</code></a></li></ul></section>
<section><h3><code>PropertyAffordance</code></h3><p>An Interaction Affordance that exposes state of the
          Thing. This state can then be retrieved (read) and
          optionally updated (write). Things can also choose to
          make Properties observable by pushing the new state after
          a change.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-observable--PropertyAffordance"><td><code>observable</code></td><td>A hint that indicates whether Servients hosting
                the Thing and Intermediaries should provide a
                Protocol Binding that supports the <code>observeproperty</code> and <code>unobserveproperty</code> operations 
                for this Property.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#boolean"><code>boolean</code></a></td></tr></tbody></table><p class="note">Property instances are also instances of
            the class <a href="#dataschema" class="sec-ref">DataSchema</a>. Therefore, it can contain the
            <code>type</code>, <code>unit</code>,
            <code>readOnly</code> and <code>writeOnly</code>
            members, among others.</p><p><code>PropertyAffordance</code> is a <a href="#dfn-subclass" class="internalDFN" data-link-type="dfn">Subclass</a> of the
          <code>InteractionAffordance</code> <a href="#dfn-class" class="internalDFN" data-link-type="dfn">Class</a> and
          the <code>DataSchema</code> <a href="#dfn-class" class="internalDFN" data-link-type="dfn">Class</a>.
          <span class="rfc2119-assertion" id="td-op-for-property">When a Form instance is within a
          <code>PropertyAffordance</code> instance, the value
          assigned to <code>op</code> <em class="rfc2119" title="MUST">MUST</em> be one of <code>readproperty</code>,
          <code>writeproperty</code>, <code>observeproperty</code>,
          <code>unobserveproperty</code> or an <a href="#dfn-array" class="internalDFN" data-link-type="dfn">Array</a>
          containing a combination of these terms.</span></p><p class="note">
		  It is considered to be good practice that each <code>observeproperty</code> has a corresponding
		  <code>unobserveproperty</code> unless the protocol supports implicit unsubscription mechanisms
		  (e.g., heartbeat to detect connection loss).</p></section>
<section><h3><code>ActionAffordance</code></h3><p>An Interaction Affordance that allows to invoke a
          function of the Thing, which manipulates state (e.g.,
          toggling a lamp on or off) or triggers a process on the
          Thing (e.g., dim a lamp over time).</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-input--ActionAffordance"><td><code>input</code></td><td>Used to define the input data schema of the
                Action.</td><td>optional</td><td><a href="#dataschema"><code>DataSchema</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-output--ActionAffordance"><td><code>output</code></td><td>Used to define the output data schema of the
                Action.</td><td>optional</td><td><a href="#dataschema"><code>DataSchema</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-safe--ActionAffordance"><td><code>safe</code></td><td>Signals if the Action is safe (=true) or not.
                Used to signal if there is no internal state (cf.
                resource state) is changed when invoking an Action.
                In that case responses can be cached as
                example.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#boolean"><code>boolean</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-idempotent--ActionAffordance"><td><code>idempotent</code></td><td>Indicates whether the Action is idempotent
                (=true) or not. Informs whether the Action can be
                called repeatedly with the same result, if present,
                based on the same input.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#boolean"><code>boolean</code></a></td></tr></tbody></table><p><code>ActionAffordance</code> is a <a href="#dfn-subclass" class="internalDFN" data-link-type="dfn">Subclass</a> of the
          <code>InteractionAffordance</code> <a href="#dfn-class" class="internalDFN" data-link-type="dfn">Class</a>.
          <span class="rfc2119-assertion" id="td-op-for-action">When a Form instance is within an
          <code>ActionAffordance</code> instance, the value
          assigned to op <em class="rfc2119" title="MUST">MUST</em>
          be <code>invokeaction</code>.</span></p></section>
<section><h3><code>EventAffordance</code></h3><p>An Interaction Affordance that describes an event
          source, which asynchronously pushes event data to
          <a href="#dfn-consumer" class="internalDFN" data-link-type="dfn">Consumers</a> (e.g., overheating
          alerts).</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-subscription--EventAffordance"><td><code>subscription</code></td><td>Defines data that needs to be passed upon
                subscription, e.g., filters or message format for
                setting up Webhooks.</td><td>optional</td><td><a href="#dataschema"><code>DataSchema</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-data--EventAffordance"><td><code>data</code></td><td>Defines the data schema of the Event instance
                messages pushed by the Thing.</td><td>optional</td><td><a href="#dataschema"><code>DataSchema</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-cancellation--EventAffordance"><td><code>cancellation</code></td><td>Defines any data that needs to be passed to
                cancel a subscription, e.g., a specific message to
                remove a Webhook.</td><td>optional</td><td><a href="#dataschema"><code>DataSchema</code></a></td></tr></tbody></table><p><code>EventAffordance</code> is a <a href="#dfn-subclass" class="internalDFN" data-link-type="dfn">Subclass</a> of the
          <code>InteractionAffordance</code> <a href="#dfn-class" class="internalDFN" data-link-type="dfn">Class</a>.
          <span class="rfc2119-assertion" id="td-op-for-event">When
          a Form instance is within an <code>EventAffordance</code>
          instance, the value assigned to <code>op</code>
          <em class="rfc2119" title="MUST">MUST</em> be either
          <code>subscribeevent</code>,
          <code>unsubscribeevent</code>, or both terms within an
          <a href="#dfn-array" class="internalDFN" data-link-type="dfn">Array</a>.</span></p><p class="note">
		  It is considered to be good practice that each <code>subscribeevent</code> has a corresponding <code>unsubscribeevent</code> unless the protocol
		  supports implicit unsubscription mechanisms (e.g., heartbeat to detect connection loss).</p></section>
<section><h3><code>VersionInfo</code></h3><p>Metadata of a Thing that provides version information
          about the TD document. If required, additional version
          information such as firmware and hardware version (term
          definitions outside of the TD namespace) can be extended
          via the <a href="#dfn-context-ext" class="internalDFN" data-link-type="dfn">TD Context Extension</a>
          mechanism.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-instance--VersionInfo"><td><code>instance</code></td><td>Provides a version indicator of this TD.
                instance.</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-model--VersionInfo"><td><code>model</code></td><td>Provides a version indicator of the underlying TM.
                instance.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table><p>It is recommended that the values within <code>instances</code> and <code>model</code> of
          the <code>VersionInfo</code> <a href="#dfn-class" class="internalDFN" data-link-type="dfn">Class</a> follow the
          semantic versioning pattern, where a sequence of three
          numbers separated by a dot indicates the major version,
          minor version, and patch version, respectively. See
          [<cite><a class="bibref" data-link-type="biblio" href="#bib-semver" title="Semantic Versioning 2.0.0">SEMVER</a></cite>] for
          details.</p></section>


        <section><h3><code>MultiLanguage</code></h3><p>A <a>Map</a> providing a set of human-readable texts in different languages identified by language tags described in [[BCP47]]. See <a href="#titles-descriptions-serialization-json"></a> for example usages of this container in a Thing Description instance.</p>
        <p>
        <span class="rfc2119-assertion" id="td-multilanguage-language-tag"> 
            Each name of the <code>MultiLanguage</code> <a>Map</a>
            MUST be a language tag as defined in [[!BCP47]].
        </span>
        <span class="rfc2119-assertion" id="td-multilanguage-value"> 
            Each value of the <code>MultiLanguage</code> <a>Map</a>
            MUST be of type <code>string</code>.
        </span>
        </p>
        </section>
      </section>
    
      <section id="sec-data-schema-vocabulary-definition">
      <h2>Data Schema Vocabulary Definitions</h2>
	  <p>A data schema is an abstract notation for data contained in data formats.</p>
      <p>
        The data schema vocabulary definition is reflecting a very common subset of the terms defined by JSON Schema [[?JSON-SCHEMA]]. It is noted
        that data schema definitions within Thing Description instances are not limited to this defined subset and may use additional terms
        found in JSON Schema using a <a>TD Context Extension</a> for the additional terms as described in
        <a href="#sec-context-extensions"></a>, otherwise these terms are semantically ignored by <a>TD Processors</a>
        (for details about semantic processing, please refer to 
        <a href="#json-ld-ctx-usage"></a> and the documentation under the namespace IRIs, e.g.,
        <a href="https://www.w3.org/2019/wot/td">https://www.w3.org/2019/wot/td</a>).
      </p>
      <p>In a TD, concrete data formats are specified in Forms (see <a href="#form"></a>) using content types.
         When the value of a content type in an instance of the Form is <code>application/json</code>, 
         the data schema can be processed directly by JSON Schema processors.
         Otherwise, Web of Things (WoT) Binding Templates [[?WOT-BINDING-TEMPLATES]] defines data schema's 
         available mappings to other content types such as XML [[?xml]]. 
         If the content type in an instance of the Form is not <code>application/json</code> and 
         if no mapping is defined for the content type, specifying a data schema does not make sense 
         for the content type.
      </p>
	  <p><span class="at-risk">The following table is at risk but contains content types which MAY use data schema.</span></p>
	  <p>
         <table class="def">
            <thead>
               <tr>
                  <th>Format</th>
                  <th>Content Type</th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <td>JSON</td>
                  <td>
                     <code>application/json</code> <br />
                     <code>application/ld+json</code> <br />
                     <code>application/senml+json</code> <br />
                     <code>application/cbor</code> <br />
                     <code>application/senml+cbor</code> <br />
                  </td>
               </tr>
               <tr>
                  <td>XML</td>
                  <td>
                     <code>application/xml</code> <br />
                     <code>application/senml+xml</code> <br />
                     <code>application/exi</code> <br />
                  </td>
               </tr>
            </tbody>
         </table>
      </p>

      <!-- rendered from RDF definitions -->
      <section><h3><code>DataSchema</code></h3><p>Metadata that describes the data format used. It can
          be used for validation.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-at-type--DataSchema"><td><code>@type</code></td><td>JSON-LD keyword to label the object with semantic tags (or types)</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-title--DataSchema"><td><code>title</code></td><td>Provides a human-readable title (e.g., display
                a text for UI representation) based on a default
                language.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-titles--DataSchema"><td><code>titles</code></td><td>Provides multi-language human-readable titles
                (e.g., display a text for UI representation in
                different languages). Also see <cite><a href='#multilanguage'>MultiLanguage</a></cite>.</td><td>optional</td><td><a>Map</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-description--DataSchema"><td><code>description</code></td><td>Provides additional (human-readable)
                      information based on a default language.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-descriptions--DataSchema"><td><code>descriptions</code></td><td>Can be used to support (human-readable)
                       information in different languages. Also see <cite><a href='#multilanguage'>MultiLanguage</a></cite>.</td><td>optional</td><td><a>Map</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-unit--DataSchema"><td><code>unit</code></td><td>Provides unit information that is used, e.g.,
                in international science, engineering, and
                business.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-const--DataSchema"><td><code>const</code></td><td>Provides a constant value.</td><td>optional</td><td>any type</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-oneOf--DataSchema"><td><code>oneOf</code></td><td>Used to ensure that the data is valid against
                one of the specified schemas in the array.</td><td>optional</td><td><a>Array</a> of <a href="#dataschema"><code>DataSchema</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-enum--DataSchema"><td><code>enum</code></td><td>Restricted set of values provided as an
                array.</td><td>optional</td><td><a>Array</a> of any type</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-readOnly--DataSchema"><td><code>readOnly</code></td><td>Boolean value that is a hint to indicate
                whether a property interaction / value is read only
                (=true) or not (=false).</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#boolean"><code>boolean</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-writeOnly--DataSchema"><td><code>writeOnly</code></td><td>Boolean value that is a hint to indicate
                whether a property interaction / value is write
                only (=true) or not (=false).</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#boolean"><code>boolean</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-format--DataSchema"><td><code>format</code></td><td>Allows validation based on a format pattern
                such as "date-time", "email", "uri", etc. (Also see
                below.)</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-contentEncoding--DataSchema"><td><code>contentEncoding</code></td><td>Specifies the encoding used to store the contents, as specified in RFC 2054. The values that are accepted: "7bit", "8bit", "binary", "quoted-printable" and "base64".</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-contentMediaType--DataSchema"><td><code>contentMediaType</code></td><td>Specifies the MIME type (e.g., image/png, audio/mpeg) of the contents of a string value, as described in RFC 2046.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-type--DataSchema"><td><code>type</code></td><td>Assignment of JSON-based data types compatible
                with JSON Schema (one of boolean, integer, number,
                string, object, array, or null).</td><td>optional</td><td>any type (one of <code>object</code>, <code>array</code>, <code>string</code>, <code>number</code>, <code>integer</code>, <code>boolean</code>, or <code>null</code>)</td></tr></tbody></table><p>The class <code>DataSchema</code> has the following subclasses:</p><ul><li><a href="#arrayschema"><code>ArraySchema</code></a></li>
<li><a href="#booleanschema"><code>BooleanSchema</code></a></li>
<li><a href="#numberschema"><code>NumberSchema</code></a></li>
<li><a href="#integerschema"><code>IntegerSchema</code></a></li>
<li><a href="#objectschema"><code>ObjectSchema</code></a></li>
<li><a href="#stringschema"><code>StringSchema</code></a></li>
<li><a href="#nullschema"><code>NullSchema</code></a></li></ul><p>The <code>format</code> string values are known from a
          fixed set of values and their corresponding format rules
          defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-json-schema" title="JSON Schema Validation: A Vocabulary for Structural Validation of JSON">JSON-SCHEMA</a></cite>]
          (Section 7.3 Defined Formats in particular). <span class="rfc2119-assertion" id="td-format-validation-known-values">Servients <em class="rfc2119" title="MAY">MAY</em> use the
          <code>format</code> value to perform additional
          validation accordingly.</span> <span class="rfc2119-assertion" id="td-format-validation-other-values">When a value that is
          not found in the known set of values is assigned to
          <code>format</code>, such a validation <em class="rfc2119" title="SHOULD">SHOULD</em> succeed.</span></p></section>
<section><h3><code>ArraySchema</code></h3><p>Metadata describing data of type <a href="#dfn-array" class="internalDFN" data-link-type="dfn">Array</a>. This
          <a href="#dfn-subclass" class="internalDFN" data-link-type="dfn">Subclass</a> is indicated by the
          value <code>array</code> assigned to <code>type</code> in
          <code>DataSchema</code> instances.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-items--ArraySchema"><td><code>items</code></td><td>Used to define the characteristics of an
                array.</td><td>optional</td><td><a href="#dataschema"><code>DataSchema</code></a> or <a>Array</a> of <a href="#dataschema"><code>DataSchema</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-minItems--ArraySchema"><td><code>minItems</code></td><td>Defines the minimum number of items that have
                to be in the array.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#unsignedInt"><code>unsignedInt</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-maxItems--ArraySchema"><td><code>maxItems</code></td><td>Defines the maximum number of items that have
                to be in the array.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#unsignedInt"><code>unsignedInt</code></a></td></tr></tbody></table></section>
<section><h3><code>BooleanSchema</code></h3><p>Metadata describing data of type <code>boolean</code>.
          This <a href="#dfn-subclass" class="internalDFN" data-link-type="dfn">Subclass</a> is indicated by the
          value <code>boolean</code> assigned to <code>type</code>
          in <code>DataSchema</code> instances.</p></section>
<section><h3><code>NumberSchema</code></h3><p>Metadata describing data of type <code>number</code>.
          This <a href="#dfn-subclass" class="internalDFN" data-link-type="dfn">Subclass</a> is indicated by the
          value <code>number</code> assigned to <code>type</code>
          in <code>DataSchema</code> instances.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-minimum--NumberSchema"><td><code>minimum</code></td><td>Specifies a minimum numeric value, representing an inclusive lower limit. Only
                applicable for associated number or integer
                types.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#double"><code>double</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-exclusiveMinimum--NumberSchema"><td><code>exclusiveMinimum</code></td><td>Specifies a minimum numeric value, representing an exclusive lower limit. Only
                applicable for associated number or integer
                types.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#double"><code>double</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-maximum--NumberSchema"><td><code>maximum</code></td><td>Specifies a maximum numeric value, representing an inclusive upper limit. Only
                applicable for associated number or integer
                types.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#double"><code>double</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-exclusiveMaximum--NumberSchema"><td><code>exclusiveMaximum</code></td><td>Specifies a maximum numeric value, representing an exclusive upper limit. Only
                applicable for associated number or integer
                types.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#double"><code>double</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-multipleOf--NumberSchema"><td><code>multipleOf</code></td><td>Specifies the multipleOf value number. The value must strictly greater than 0. Only applicable for associated number or integer types.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#double"><code>double</code></a></td></tr></tbody></table></section>
<section><h3><code>IntegerSchema</code></h3><p>Metadata describing data of type <code>integer</code>.
          This <a href="#dfn-subclass" class="internalDFN" data-link-type="dfn">Subclass</a> is indicated by the
          value <code>integer</code> assigned to <code>type</code>
          in <code>DataSchema</code> instances.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-minimum--IntegerSchema"><td><code>minimum</code></td><td>Specifies a minimum numeric value, representing an inclusive lower limit. Only
                applicable for associated number or integer
                types.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#integer"><code>integer</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-exclusiveMinimum--IntegerSchema"><td><code>exclusiveMinimum</code></td><td>Specifies a minimum numeric value, representing an exclusive lower limit. Only
                applicable for associated number or integer
                types.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#integer"><code>integer</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-maximum--IntegerSchema"><td><code>maximum</code></td><td>Specifies a maximum numeric value, representing an inclusive upper limit. Only
                applicable for associated number or integer
                types.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#integer"><code>integer</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-exclusiveMaximum--IntegerSchema"><td><code>exclusiveMaximum</code></td><td>Specifies a maximum numeric value, representing an exclusive upper limit. Only
                applicable for associated number or integer
                types.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#integer"><code>integer</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-multipleOf--IntegerSchema"><td><code>multipleOf</code></td><td>Specifies the multipleOf value number. The value must strictly greater than 0. Only applicable for associated number or integer types.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#integer"><code>integer</code></a></td></tr></tbody></table></section>
<section><h3><code>ObjectSchema</code></h3><p>Metadata describing data of type <code>object</code>.
          This <a href="#dfn-subclass" class="internalDFN" data-link-type="dfn">Subclass</a> is indicated by the
          value <code>object</code> assigned to <code>type</code>
          in <code>DataSchema</code> instances.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-properties--ObjectSchema"><td><code>properties</code></td><td>Data schema nested definitions.</td><td>optional</td><td><a>Map</a> of <a href="#dataschema"><code>DataSchema</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-required--ObjectSchema"><td><code>required</code></td><td>Defines which members of the object type are
                mandatory.</td><td>optional</td><td><a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table></section>
<section><h3><code>StringSchema</code></h3><p>Metadata describing data of type <code>string</code>.
          This <a href="#dfn-subclass" class="internalDFN" data-link-type="dfn">Subclass</a> is indicated by the
          value <code>string</code> assigned to <code>type</code>
          in <code>DataSchema</code> instances.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-minLength--StringSchema"><td><code>minLength</code></td><td>Specifies the minimum length of a string. Only applicable for associated string types.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#unsignedInt"><code>unsignedInt</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-maxLength--StringSchema"><td><code>maxLength</code></td><td>Specifies the maximum length of a string. Only applicable for associated string types.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#unsignedInt"><code>unsignedInt</code></a></td></tr></tbody></table></section>
<section><h3><code>NullSchema</code></h3><p>Metadata describing data of type <code>null</code>.
          This <a href="#dfn-subclass" class="internalDFN" data-link-type="dfn">Subclass</a> is indicated by the
          value <code>null</code> assigned to <code>type</code> in
          <code>DataSchema</code> instances. This Subclass
          describes only one acceptable value, namely
          <code>null</code>. It can be used as part of a
          <code>oneOf</code> declaration, where it is used to
          indicate, that the data can also be
          <code>null</code>.</p></section>
        
      </section>
    
      <section id="sec-security-vocabulary-definition">
      <h2>Security Vocabulary Definitions</h2>

      <p>
      This specification provides a selection of well-established security mechanisms
      that are directly built into protocols eligible as <a>Protocol Bindings</a> for W3C WoT
      or are widely in use with those protocols.
      The current set of HTTP security schemes is partly based on 
      <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.1.md#securitySchemeObject">OpenAPI 3.0.1</a> (see also [[?OPENAPI]]). 
      However while the HTTP security schemes, <a>Vocabulary</a>, and syntax
      given in this specification share many similarities with OpenAPI, they are not compatible.
      </p>

      <!-- rendered from RDF definitions -->
      <section><h3><code>SecurityScheme</code></h3><p><p>Metadata describing the configuration of a security
          mechanism. <span class="rfc2119-assertion" id="td-security-scheme-name">The value assigned to the name
          <code>scheme</code> <em class="rfc2119" title="MUST">MUST</em> be defined within a 
          <a href="#dfn-vocab" class="internalDFN" data-link-type="dfn">Vocabulary</a>
          included in the <a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">Thing Description</a>,
          either in the standard <a href="#dfn-vocab" class="internalDFN" data-link-type="dfn">Vocabulary</a> defined
          in <a href="#sec-vocabulary-definition" class="sec-ref">§&nbsp;<bdi class="secno">5.</bdi> TD
          Information Model</a> or in a <a href="#dfn-context-ext" class="internalDFN" data-link-type="dfn">TD Context
          Extension</a>.</span>
          </p><p>
          <span class="rfc2119-assertion" id="td-security-no-secrets">For all security schemes,
          any private keys, passwords, or other sensitive information directly providing access 
          should be shared and stored out-of-band and <em class="rfc2119" title="MUST NOT">MUST NOT</em> be stored in the TD.</span> 
          The purpose of a TD is to describe how to access a Thing if and only if a Consumer 
          already has authorization, and is not meant be used to grant that authorization.
          </p><p>
          Security schemes generally may require additional authentication
          parameters, such as a password or key.
          The location of this information is indicated by the
          value associated with the name <code>in</code>, often in combination with the value associated with <code>name</code>.
          The value associated with <code>in</code> can take one of the following values:
          <dl>
          <dt><code>header</code>:</dt>
          <dd>The parameter will be given
            in a header provided by the protocol, with the name of the header
            provided by the value of <code>name</code>.</dd>
          <dt><code>query</code>:</dt>
          <dd>The parameter will be appended to the URI as a query parameter, with the name of the 
            query parameter provided by <code>name</code>.</dd>
          <dt><code>body</code>:</dt>
          <dd>The parameter will be provided in the body of the request payload, with the data schema element  
            used provided by <code>name</code>.
            <span class="rfc2119-assertion" id="sec-body-name-json-pointer">When used in the context of a 
            <code>body</code> security information location, the value of <code>name</code> 
            <em class="rfc2119" title="MUST">MUST</em> be in the form of a JSON pointer [[!RFC6901]] relative to 
            the root of the input <code>DataSchema</code> for each interaction it is used with.</span> 
            Since this value is not a fragment identifier, and is not relative to the root of the TD but
            to whichever data schemas the security scheme is bound to, this value should not start with <code>#</code>;
            it is a "pure" JSON pointer.
            Since this value is not a fragment identifier, it also does not
            need to URL-encode special characters.
            The targeted element may or may not already exist at the specified location in the referenced data schema.
            If it does not, it will be inserted. This avoids having to duplicate definitions in the data schemas of
            every interaction.
            <span class="rfc2119-assertion" id="sec-body-name-json-pointer-creatable">When an element
            of a data schema indicated by a JSON pointer indicated in a <code>body</code> locator
            does not already exist in the indicated schema, it
            <em class="rfc2119" title="MUST">MUST</em> 
            be possible to insert the indicated element
            at the location indicated by the pointer.</span>
            <span class="rfc2119-assertion" id="sec-body-name-json-pointer-array">The JSON pointer
            used in the <code>body</code> locator 
            <em class="rfc2119" title="MAY">MAY</em> 
            use the "<code>-</code>" character to indicate a non-existent array element when 
            it is necessary to insert an element after the last element of an existing array.
            </span>
            <span class="rfc2119-assertion" id="sec-body-name-json-pointer-type">The element referenced
            (or created) by a 
            <code>body</code> security information location
            <em class="rfc2119" title="MUST">MUST</em> be required and of type "<code>string</code>".</span> 
            If <code>name</code> is not given, it is assumed the entire body
            is to be used as the security parameter.
          </dd>
          <dt><code>cookie</code>:</dt>
          <dd>The parameter is stored in a cookie identified by the value of   
            <code>name</code>.
          </dd>
          <dt><code>uri</code>:</dt>
          <dd>The parameter is embedded in the URI itself, which is encoded in the
          relevant interaction using a URI template variable defined by the value of <code>name</code>.
          This is more general than the <code>query</code> mechanism but more complex. 
          <span class="rfc2119-assertion" id="td-security-in-query-over-uri">The value <code>uri</code> 
          <em class="rfc2119" title="SHOULD">SHOULD</em> be specified 
          for the name <code>in</code> in a security scheme only if
          <code>query</code> is not applicable.</span>  
          <span class="rfc2119-assertion" id="td-security-in-uri-variable">The URIs provided
          in interactions where a security scheme using <code>uri</code> as the value for <code>in</code>
          <em class="rfc2119" title="MUST">MUST</em> be a URI template including the defined variable.
          </span>  
          </dd>
          </dl>
          If multiple parameters are needed for a security scheme, repeat the security scheme definition for
          each parameter and combine them using a <code>combo</code> security scheme and <code>allOf</code>.
          In some cases parameters may not actually be secret but a user may wish to leave them
          out of the TD to help protect privacy.  As an example of this, some security mechanisms
          require both a client identifier and a secret key.  In theory, the client identifier is 
          public however it may be hard to update and pose a tracking risk.  In such a case it can
          be provided as an additional security parameter so it does not appear in the TD.
          </p><p>
          <span class="rfc2119-assertion" id="td-security-uri-variables-distinct">The names of URI variables 
          declared in a <code>SecurityScheme</code> 
          <em class="rfc2119" title="MUST">MUST</em> be distinct from all other URI variables 
          declared in the TD.</span></p></p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-at-type--SecurityScheme"><td><code>@type</code></td><td>JSON-LD keyword to label the object with semantic tags (or types).</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr><tr class="rfc2119-table-assertion" id="td-vocab-description--SecurityScheme"><td><code>description</code></td><td>Provides additional (human-readable)
                      information based on a default language.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-descriptions--SecurityScheme"><td><code>descriptions</code></td><td>Can be used to support (human-readable)
                       information in different languages. Also see <cite><a href='#multilanguage'>MultiLanguage</a></cite>.</td><td>optional</td><td><a>Map</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-proxy--SecurityScheme"><td><code>proxy</code></td><td>URI of the proxy server this security
                configuration provides access to. If not given, the
                corresponding security configuration is for the
                endpoint.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-scheme--SecurityScheme"><td><code>scheme</code></td><td>Identification of the security mechanism being
                configured.</td><td>optional</td><td>any type (one of <code>nosec</code>, <code>combo</code>, <code>basic</code>, <code>digest</code>, <code>bearer</code>, <code>psk</code>, <code>oauth2</code>, or <code>apikey</code>)</td></tr></tbody></table><p>The class <code>SecurityScheme</code> has the following subclasses:</p><ul><li><a href="#nosecurityscheme"><code>NoSecurityScheme</code></a></li>
<li><a href="#combosecurityscheme"><code>ComboSecurityScheme</code></a></li>
<li><a href="#basicsecurityscheme"><code>BasicSecurityScheme</code></a></li>
<li><a href="#digestsecurityscheme"><code>DigestSecurityScheme</code></a></li>
<li><a href="#apikeysecurityscheme"><code>APIKeySecurityScheme</code></a></li>
<li><a href="#bearersecurityscheme"><code>BearerSecurityScheme</code></a></li>
<li><a href="#psksecurityscheme"><code>PSKSecurityScheme</code></a></li>
<li><a href="#oauth2securityscheme"><code>OAuth2SecurityScheme</code></a></li></ul></section>
<section><h3><code>NoSecurityScheme</code></h3><p>A security configuration corresponding to identified
          by the <a href="#dfn-vocab-term" class="internalDFN" data-link-type="dfn">Vocabulary Term</a>
          <code>nosec</code> (i.e., <code>"scheme":
          "nosec"</code>), indicating there is no authentication or
          other mechanism required to access the resource.</p></section>
<section><h3><code>ComboSecurityScheme</code></h3><p><span class="at-risk">This section is at risk.</span></p><p>A combination of other security schemes identified by the <a>Vocabulary Term</a> <code>combo</code> (i.e., <code>"scheme": "combo"</code>).  Elements of this scheme define various ways in which other named schemes defined in <code>securityDefinitions</code>, including other <a href="#combosecurityscheme"><code>ComboSecurityScheme</code></a> definitions, are to be combined to create a new scheme definition.  <scan class="rfc2119-assertion">Exactly one of either <code>oneOf</code> or <code>allOf</code> MUST be included.</scan> <!-- Redundant, table states "two or more" already <scan class="rfc2119-assertion">The array given as a value associated with either <code>oneOf</code> or <code>allOf</code> MUST have at least two elements.</scan> --> Only security scheme definitions which can be used together can be combined with <code>allOf</code>.  For example, it is not possible in general to combine different OAuth 2.0 flows together using <code>allOf</code> unless one applies to a proxy and one to the endpoint.  Note that when multiple named security scheme definitions are listed in a <code>security</code> field the same semantics apply as in an <code>allOf</code> combination (and the same limitations on allowable combinations).  The <code>oneOf</code> combination is equivalent to using different security schemes on forms that are otherwise identical.  In this sense a <code>oneOf</code> scheme is not an essential feature but it does avoid redundancy in such cases.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-oneOf--ComboSecurityScheme"><td><code>oneOf</code></td><td>Array of two or more strings identifying other named security scheme definitions, any one of which, when satisfied, will allow access.  Only one may be chosen for use.</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-allOf--ComboSecurityScheme"><td><code>allOf</code></td><td>Array of two or more strings identifying other named security scheme definitions, all of which must be satisfied for access.</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table><p class="ednote" title="Recursive Use">The 
<a href="#combosecurityscheme">ComboSecurityScheme</a> may be applied recursively to generate Boolean expressions for combinations of security schemes. One use case for this is when multiple security schemes are needed for a proxy in combination with multiple security schemes for an endpoint.  Suppose for example a proxy accepts either schemes A or B, and then the endpoint accepts either C or D.  Then the possible combinations are AC, AD, BC, and BD.  These could be expressed directly at the <code>Form</code> level but would require four-fold redundancy.  Instead, three <code>combo</code> nodes can be used to combine the four leaf schemes in the correct way into a single scheme.  It is not clear however if other use cases exist for deeper expression trees and if not, we may consider limiting the recursion depth to two.</p></section>
<section><h3><code>BasicSecurityScheme</code></h3><p>Basic Authentication [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7617" title="The 'Basic' HTTP Authentication Scheme">RFC7617</a></cite>]
          security configuration identified by the <a href="#dfn-vocab-term" class="internalDFN" data-link-type="dfn">Vocabulary Term</a> <code>basic</code> (i.e.,
          <code>"scheme": "basic"</code>), using an unencrypted
          username and password. This scheme should be used with
          some other security mechanism providing confidentiality,
          for example, TLS.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-name--BasicSecurityScheme"><td><code>name</code></td><td>Name for query, header, cookie, or uri
               parameters.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-in--BasicSecurityScheme"><td><code>in</code></td><td>Specifies the location of security
            authentication information.  </td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (one of <code>header</code>, <code>query</code>, <code>body</code>, <code>cookie</code>, or <code>uri</code>)</td></tr></tbody></table></section>
<section><h3><code>DigestSecurityScheme</code></h3><p>Digest Access Authentication [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7616" title="HTTP Digest Access Authentication">RFC7616</a></cite>]
          security configuration identified by the <a href="#dfn-vocab-term" class="internalDFN" data-link-type="dfn">Vocabulary Term</a> <code>digest</code> (i.e.,
          <code>"scheme": "digest"</code>). This scheme is similar
          to basic authentication but with added features to avoid
          man-in-the-middle attacks.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-name--DigestSecurityScheme"><td><code>name</code></td><td>Name for query, header, cookie, or uri
               parameters.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-qop--DigestSecurityScheme"><td><code>qop</code></td><td>Quality of protection.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (one of <code>auth</code>, or <code>auth-int</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-in--DigestSecurityScheme"><td><code>in</code></td><td>Specifies the location of security
            authentication information.  </td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (one of <code>header</code>, <code>query</code>, <code>body</code>, <code>cookie</code>, or <code>uri</code>)</td></tr></tbody></table></section>
<section><h3><code>APIKeySecurityScheme</code></h3><p>API key authentication security configuration
          identified by the <a href="#dfn-vocab-term" class="internalDFN" data-link-type="dfn">Vocabulary Term</a>
          <code>apikey</code> (i.e., <code>"scheme":
          "apikey"</code>). 
          This scheme is to be used when the access token is opaque,
          for example when a key in an unknown or proprietary format is provided by a cloud service provider.
          In this case the key may not be using a standard token format.
          This scheme indicates that the key provided by the service provider 
          needs to be supplied as part 
          of service requests using the mechanism indicated by the <code>"in"</code> field.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-name--APIKeySecurityScheme"><td><code>name</code></td><td>Name for query, header, cookie, or uri
               parameters.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-in--APIKeySecurityScheme"><td><code>in</code></td><td>Specifies the location of security
            authentication information.  </td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (one of <code>header</code>, <code>query</code>, <code>body</code>, <code>cookie</code>, or <code>uri</code>)</td></tr></tbody></table></section>
<section><h3><code>BearerSecurityScheme</code></h3><p>Bearer Token [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6750" title="The OAuth 2.0 Authorization Framework: Bearer Token Usage">RFC6750</a></cite>]
          security configuration identified by the <a href="#dfn-vocab-term" class="internalDFN" data-link-type="dfn">Vocabulary Term</a> <code>bearer</code> (i.e.,
          <code>"scheme": "bearer"</code>) for situations where
          bearer tokens are used independently of OAuth2. If the
          <code>oauth2</code> scheme is specified it is not
          generally necessary to specify this scheme as well as it
          is implied. For <code>format</code>, the value
          <code>jwt</code> indicates conformance with
          [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7519" title="JSON Web Token (JWT)">RFC7519</a></cite>],
          <code>jws</code> indicates conformance with
          [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7797" title="JSON Web Signature (JWS) Unencoded Payload Option">RFC7797</a></cite>],
          <code>cwt</code> indicates conformance with
          [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8392" title="CBOR Web Token (CWT)">RFC8392</a></cite>], and
          <code>jwe</code> indicates conformance with
          [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7516" title="JSON Web Encryption (JWE)">RFC7516</a></cite>], with
          values for <code>alg</code> interpreted consistently with
          those standards. <span class="rfc2119-assertion" id="td-security-bearer-format-extensions">Other formats and
          algorithms for bearer tokens <em class="rfc2119" title="MAY">MAY</em> be specified in vocabulary
          extensions</span>.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-authorization--BearerSecurityScheme"><td><code>authorization</code></td><td>URI of the authorization server.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-name--BearerSecurityScheme"><td><code>name</code></td><td>Name for query, header, cookie, or uri
               parameters.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-alg--BearerSecurityScheme"><td><code>alg</code></td><td>Encoding, encryption, or digest algorithm.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (e.g., <code>MD5</code>, <code>ES256</code>, or <code>ES512-256</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-format--BearerSecurityScheme"><td><code>format</code></td><td>Specifies format of security authentication
                 information.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (e.g., <code>jwt</code>, <code>cwt</code>, <code>jwe</code>, or <code>jws</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-in--BearerSecurityScheme"><td><code>in</code></td><td>Specifies the location of security
            authentication information.  </td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (one of <code>header</code>, <code>query</code>, <code>body</code>, <code>cookie</code>, or <code>uri</code>)</td></tr></tbody></table></section>
<section><h3><code>PSKSecurityScheme</code></h3><p>Pre-shared key authentication security configuration
          identified by the <a href="#dfn-vocab-term" class="internalDFN" data-link-type="dfn">Vocabulary Term</a>
          <code>psk</code> (i.e., <code>"scheme":
          "psk"</code>).
          This is meant to identify that a standard is used for pre-shared keys such as TLS-PSK [[rfc4279]], 
          and that the ciphersuite used for keys will be established during protocol negotiation.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-identity--PSKSecurityScheme"><td><code>identity</code></td><td>Identifier providing information which can be
                   used for selection or confirmation.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table></section>
<section><h3><code>OAuth2SecurityScheme</code></h3><p>OAuth 2.0 authentication security configuration
            for systems conformant with [[!RFC6749]], [[!RFC8252]] and
            (for the <code>device</code> flow) [[!RFC8628]], identified
            by the <a>Vocabulary Term</a> <code>oauth2</code> (i.e.,
            <code>"scheme": "oauth2"</code>).</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-authorization--OAuth2SecurityScheme"><td><code>authorization</code></td><td>URI of the authorization server. In the case of the <code>device</code> flow, the URI provided for the <code>authorization</code> value refers to the device authorization endpoint [[!RFC8628]].</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-token--OAuth2SecurityScheme"><td><code>token</code></td><td>URI of the token server.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-refresh--OAuth2SecurityScheme"><td><code>refresh</code></td><td>URI of the refresh server.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-scopes--OAuth2SecurityScheme"><td><code>scopes</code></td><td>Set of authorization scope identifiers provided
                as an array. These are provided in tokens returned
                by an authorization server and associated with
                forms in order to identify what resources a client
                may access and how. The values associated with a
                form should be chosen from those defined in an
                <code>OAuth2SecurityScheme</code> active on that
                form.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-flow--OAuth2SecurityScheme"><td><code>flow</code></td><td>Authorization flow.</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (e.g., <code>code</code>, <code>client</code>, or <code>device</code>)</td></tr></tbody></table><p><span class="rfc2119-assertion" id="td-security-oauth2-code-flow">For
            the <code>code</code> flow both <code>authorization</code> and <code>token</code>
            MUST be included.</span> <span class="rfc2119-assertion" id="td-security-oauth2-client-flow">For
            the <code>client</code> flow <code>token</code> MUST be included.</span>
            <span class="rfc2119-assertion" id="td-security-oauth2-client-flow-no-auth">For the
            <code>client</code> flow <code>authorization</code> MUST NOT be included.</span>
            <span class="rfc2119-assertion" id="td-security-oauth2-device-flow">For the
            <code>device</code> flow both <code>authorization</code> and <code>token</code>
            MUST be included.</span> In the case of the <code>device</code> flow the value
            provided for <code>authorization</code> refers to the device authorization endpoint
            defined in [[!RFC8628]]. The mandatory elements for each flow are summarized in the
            following table:
            <table class="def"> <tr><th>Element</th><th><code>code</code></th><th><code>client</code></th><th><code>device</code></th></tr> <tr><td><code>authorization</code></td><td>mandatory</td><td>omit</td><td>mandatory; refers to device authorization endpoint</td></tr> <tr><td><code>token</code></td><td>mandatory</td><td>mandatory</td><td>mandatory</td></tr> <tr><td><code>refresh</code></td><td>optional</td><td>optional</td><td>optional</td></tr> </table>
            </p><p class="ednote"> Note that the <code>OAuth2SecurityScheme</code> class definition lists these elements as "optional". 
            In fact whether they are mandatory or not depends on the flow.  The <code>token</code>
            element is listed as optional even though it is mandatory for all predefined flows
            since it might not be mandatory for some flows defined in an extension.  We should
            investigate whether there is a better way to express these "variant record"
            constraints.</p><p>If multiple flows are available (for example, multiple OAuth 2.0
            security schemes with different flows are given for a <code>Form</code>) then only
            one may be selected for use by a <a>Consumer</a>. <span class="rfc2119-assertion"
            id="td-security-oauth2-other-flows">If an OAuth 2.0 flow other than <code>code</code>,
            <code>client</code> or <code>device</code> needs to be specified an extension vocabulary
            MUST be used.</span> This includes the <code>password</code> and <code>implicit</code>
            flows, which are no longer considered best practice [[WOT-SECURITY-GUIDELINES]]. This
            also applies to flows that are similar at the protocol level but do not exactly follow
            the OAuth 2.0 specification, for example by automating grants rather than invoking a
            user agent to interact with a human resource owner.  If no <code>scopes</code> are
            defined in the <code>SecurityScheme</code> then they are considered to be empty.</p>
            <p class="ednote">The device authorization endpoint technically uses a different protocol
            than the authorization endpoint used by other flows, and it might be possible for a
            developer to confuse the two.  However, since the <code>device</code> flow does not use
            the regular authorization endpoint there should be no ambiguity.  We are considering
            however an alternative design where there is a separate element,
            <code>device_authorization</code>, which MUST be included for the <code>device</code>
            flow (and then the regular authorization endpoint then MUST NOT be used).</p></section>
      
      </section>

      <section id="sec-hypermedia-vocabulary-definition">
      <h2>Hypermedia Controls Vocabulary Definitions</h2>

      <p>
        The present model provides a representation for (typed) Web links and Web forms exposed by
        a <a>Thing</a>. The <code>Link</code> class definition is reflecting a very common subset of the terms defined in
        Web Linking [[!RFC8288]]. The defined terms can be used, e.g., to describe the relation to another <a>Thing</a> such
        as a <i>Lamp Thing</i> is controlled by a <i>Switch Thing</i>. The <code>Form</code> class corresponds to a newly
        introduced form of hypermedia control to manipulate the state of <a>Things</a> (and other Web resources).
      </p>

      <!-- rendered from RDF definitions -->
      <section><h3><code>Link</code></h3><p>A link can be viewed as a statement of the form
          "<b><em>link context</em></b> has a <b><em>relation
          type</em></b> resource at <b><em>link target</em></b>",
          where the optional <b><em>target attributes</em></b> may
          further describe the resource.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-href--Link"><td><code>href</code></td><td>Target IRI of a link or submission target of a
                form.</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-type--Link"><td><code>type</code></td><td>Target attribute providing a hint indicating
                what the media type [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2046" title="Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types">RFC2046</a></cite>]
                of the result of dereferencing the link should
                be.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-rel--Link"><td><code>rel</code></td><td>A link relation type identifies the semantics
                of a link.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-anchor--Link"><td><code>anchor</code></td><td>Overrides the link context (by default the
                Thing itself identified by its <code>id</code>)
                with the given URI or IRI.</td><td>optional</td><td>any type</td></tr></tbody></table> <p>Link relations can be used to describe relations such as to other Things (e.g., a Switch Thing controls a Lamp Thing), to a specific kind of Thing Models (e.g., a Thing Description
    is an instance of a specific Thing Model), or to further documentations information (e.g., device manuel of a Thing). It is recommended to reuse existing and established 
    <a href="https://www.iana.org/assignments/link-relations">Link Relation definitions from IANA.</a>
    </p>
        <p>In the following a best practice relation type table is introduced that is recommended to use within WoT <a>Thing Description</a>
    or <a>Thing Model</a> instances.      
    </p>
    <table class="def">
        <thead>
            <tr>
                <th>Value</th>                
                <th>Occurrence</th>
                <th>Explanation</th>
                <th>Source of value origin</th>
            </tr>
        </thead>
        <tbody>
            <tr >
                <td>
                    <code>service-doc</code>
                </td>
                <td>
                    0..*
                </td>
                <td>Relation to a resource that provide (human-readable) documentation or descriptions.</td>
                <td>
                    <a href="https://www.iana.org/assignments/link-relations">IANA Link Relation</a>
                </td>
            </tr>
            <tr >
                <td>
                    <code>alternate</code>
                </td>
                <td>
                    0..*
                </td>
                <td>Point to alternative representation of the <a>Thing</a> (i.e. RDF-Turtle, human-readable HTML document, ...).</td>
                <td>
                    <a href="https://www.iana.org/assignments/link-relations">IANA Link Relation</a>
                </td>
            </tr>
            <tr >
                <td>
                    <code>type</code>
                </td>
                <td>
                    0..1
                </td>
                <td>Indicate that the <a>Thing</a> is an instance of the target resource such as to a <a>Thing Model</a>.</td>
                <td>
                    <a href="https://www.iana.org/assignments/link-relations">IANA Link Relation</a>
                </td>
            </tr>
            <tr >
                <td>
                    <code>extends</code>
                </td>
                <td>
                    0..1
                </td>
                <td>Extends an existing definition of the targed resource such as a <a>Thing Model</a>.</td>
                <td>
                    W3C WoT Thing Model
                </td>
            </tr>            
            <tr >
                <td>
                    <code>manifest</code>
                </td>
                <td>
                    0..*
                </td>
                <td>Point to a software implementation of the TD.</td>
                <td>
                    <a href="https://www.iana.org/assignments/link-relations">IANA Link Relation</a>
                </td>
            </tr>
            <tr>
                <td>
                    <code>proxy-to</code>
                </td>
                <td>
                    0..*
                </td>
                <td>Target resource provide the address of a proxy.</td>
                <td>
                    W3C WoT Security and WoT Binding Template
                </td>
            </tr>
            <tr>
                <td>
                    <code>collection</code>
                </td>
                <td>
                    0..1
                </td>
                <td>Points to a collections of <a>Things</a>.</td>
                <td>
                    <a href="https://www.iana.org/assignments/link-relations">IANA Link Relation</a>
                </td>
            </tr>
            <tr>
                <td>
                    <code>item</code>
                </td>
                <td>
                    0..*
                </td>
                <td>Points to a <a>Thing</a> that is member of the current <a>Thing</a> collections.</td>
                <td>
                    <a href="https://www.iana.org/assignments/link-relations">IANA Link Relation</a>
                </td>
            </tr>
            <tr>
                <td>
                    <code>predecessor-version</code>
                </td>
                <td>
                    0..1
                </td>
                <td>Points to a previous <a>Thing Description</a> or <a>Thing Model</a> version.</td>
                <td>
                    <a href="https://www.iana.org/assignments/link-relations">IANA Link Relation</a>
                </td>
            </tr>
            <tr>
                <td>
                    <code>controlledBy</code>
                </td>
                <td>
                    0..*
                </td>
                <td>Refers to a <a>Thing</a> that controlls the context <a>Thing</a>.</td>
                <td>
                    W3C Thing Description
                </td>
            </tr>
        </tbody>
    </table>
    </section>
<section><h3><code>Form</code></h3><p>A form can be viewed as a statement of "To perform an
          <b><em>operation type</em></b> operation on <b><em>form
          context</em></b>, make a <b><em>request method</em></b>
          request to <b><em>submission target</em></b>" where the
          optional <b><em>form fields</em></b> may further describe
          the required request. In Thing Descriptions, the
          <b><em>form context</em></b> is the surrounding Object,
          such as Properties, Actions, and Events or the Thing
          itself for meta-interactions.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-href--Form"><td><code>href</code></td><td>Target IRI of a link or submission target of a
                form.</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyURI"><code>anyURI</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-contentType--Form"><td><code>contentType</code></td><td>Assign a content type based on a media type
                (e.g., <code>text/plain</code>) and potential
                parameters (e.g., <code>charset=utf-8</code>) for
                the media type [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2046" title="Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types">RFC2046</a></cite>].</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-contentCoding--Form"><td><code>contentCoding</code></td><td>Content coding values indicate an encoding
                transformation that has been or can be applied to a
                representation. Content codings are primarily used
                to allow a representation to be compressed or
                otherwise usefully transformed without losing the
                identity of its underlying media type and without
                loss of information. Examples of content coding
                include "gzip", "deflate", etc. .</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-security--Form"><td><code>security</code></td><td>Set of security definition names, chosen from
                those defined in <code>securityDefinitions</code>.
                These must all be satisfied for access to
                resources.</td><td>optional</td><td><a href="#securityscheme"><code>SecurityScheme</code></a> or <a>Array</a> of <a href="#securityscheme"><code>SecurityScheme</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-scopes--Form"><td><code>scopes</code></td><td>Set of authorization scope identifiers provided
                as an array. These are provided in tokens returned
                by an authorization server and associated with
                forms in order to identify what resources a client
                may access and how. The values associated with a
                form should be chosen from those defined in an
                <code>OAuth2SecurityScheme</code> active on that
                form.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-response--Form"><td><code>response</code></td><td>This optional term can be used if, e.g., the
                output communication metadata differ from input
                metadata (e.g., output contentType differ from the
                input contentType). The response name contains
                metadata that is only valid for the primary response
                messages.</td><td>optional</td><td><a href="#expectedresponse"><code>ExpectedResponse</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-additionalResponses--Form"><td><code>additionalResponses</code></td><td>This optional term can be used if additional expected responses
                are possible, e.g. for error reporting.  Each additional response needs to be 
                distinguished from others in some way (for example, by specifying
                a protocol-specific error code), and may also have its own data schema.</td><td>optional</td><td><a href="#additionalexpectedresponse"><code>AdditionalExpectedResponse</code></a> or <a>Array</a> of <a href="#additionalexpectedresponse"><code>AdditionalExpectedResponse</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-subprotocol--Form"><td><code>subprotocol</code></td><td>Indicates the exact mechanism by which an
                interaction will be accomplished for a given
                protocol when there are multiple options. For
                example, for HTTP and Events, it indicates which of
                several available mechanisms should be used for
                asynchronous notifications such as long polling
                (<code>longpoll</code>), WebSub [<cite><a class="bibref" data-link-type="biblio" href="#bib-websub" title="WebSub">websub</a></cite>]
                (<code>websub</code>), Server-Sent Events
                (<code>sse</code>) [<cite><a class="bibref" data-link-type="biblio" href="#bib-html" title="HTML Standard">html</a></cite>] (also known as
                EventSource). Please note that there is no
                restriction on the subprotocol selection and other
                mechanisms can also be announced by this
                subprotocol term.</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> (e.g., <code>longpoll</code>, <code>websub</code>, or <code>sse</code>)</td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-op--Form"><td><code>op</code></td><td>Indicates the semantic intention of performing
                the operation(s) described by the form. For
                example, the Property interaction allows get and
                set operations. The protocol binding may contain a
                form for the get operation and a different form for
                the set operation. The op attribute indicates which
                form is for which and allows the client to select
                the correct form for the operation required. op can
                be assigned one or more interaction verb(s) each
                representing a semantic intention of an
                operation.</td><td>optional</td><td>any type (one of <code>readproperty</code>, <code>writeproperty</code>, <code>observeproperty</code>, <code>unobserveproperty</code>, <code>invokeaction</code>, <code>subscribeevent</code>, <code>unsubscribeevent</code>, <code>readallproperties</code>, <code>writeallproperties</code>, <code>readmultipleproperties</code>, <code>writemultipleproperties</code>, <code>observeallproperties</code>, or <code>unobserveallproperties</code>)</td></tr></tbody></table><p>Possible values for the <code>contentCoding</code>
          property can be found, e.g., in the <a href=
          "https://www.iana.org/assignments/http-parameters/http-parameters.xhtml#content-coding">
          IANA HTTP content coding registry</a>.</p>
          <p>The list of possible operation types of a form is
          fixed. As of this version of the specification, it only
          includes the well-known types necessary to implement the
          WoT interaction model described in [<cite><a class=
          "bibref" data-link-type="biblio" href=
          "#bib-wot-architecture" title=
          "Web of Things (WoT) Architecture">WOT-ARCHITECTURE</a></cite>].
          Future versions of the standard may extend this list but
          <span class="rfc2119-assertion" id=
          "well-known-operation-types-only">operations types
          <em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em> be
          arbitrarily set by servients.</span></p>
          <p>The optional <code>response</code> name-value pair can
          be used to provide metadata for the expected response
          message. 
          With the core vocabulary, it only includes
          content type information, but TD Context Extensions could
          be applied. <span class="rfc2119-assertion" id=
          "td-expectedResponse-default-contentType">If no
          <code>response</code> name-value pair is provided, it
          <em class="rfc2119" title="MUST">MUST</em> be assumed
          that the content type of the response is equal to the
          content type assigned to the Form instance.</span> Note
          that <code>contentType</code> within an
          <code>ExpectedResponse</code> 
          <a href="#dfn-class" class=
          "internalDFN" data-link-type="dfn">Class</a> does not
          have a <a href="#dfn-default-value" class="internalDFN"
          data-link-type="dfn">Default Value</a>. For instance, if
          the value of the content type of the form is
          <code>application/xml</code> the assumed value of the
          content type of the response will be also
          <code>application/xml</code>.
          In some cases additional responses might be possible.
          One example of this is error responses but in some cases
          there might also be additional successful responses.
          In this case the <code>response</code> name-value pair
          is still used for the primary response but 
          <code>additionalResponses</code> may also be provided,
          whose value is an array of <code>AdditionalExpectedResponse</code>
          objects.
          Each additional response must be distinguished in some way from the primary
          response, either by <code>contentType</code> or by
          protocol-specific settings such as error code header values.
          Each additional response may also have a data schema
          which can differ from the normal output data schema for the
          interaction.  
          </p>
          <p>In some use cases, input and output data might be
          represented in a different form, for instance an Action
          that accepts JSON, but returns an image. In such a case,
          the optional <code>response</code> name-value pair can
          describe the content type of the expected response.
          <span class="rfc2119-assertion" id=
          "td-expectedResponse-contentType">If the content type of
          the expected response differs from the content type of
          the form, the <code>Form</code> instance <em class=
          "rfc2119" title="MUST">MUST</em> include a name-value
          pair with the name <code>response</code>.</span> 
          For instance, an <code>ActionAffordance</code> could only
          accept <code>application/json</code> for its input data,
          while it will respond with an <code>image/jpeg</code>
          content type for its output data. In that case the
          content types differ and the <code>response</code>
          name-value pair has to be used to provide response
          content type (<code>image/jpeg</code>) information to the
          <a href="#dfn-consumer" class="internalDFN"
          data-link-type="dfn">Consumer</a>.
          Similar considerations apply to additional responses,
          although in this case the <code>contentType</code> is optional
          if it is the same as the input content Type (e.g. JSON).
          <span class="rfc2119-assertion" id=
          "td-additionalExpectedResponse-contentType">If the content type of
          an additional expected response differs from the content type of
          the form, the <code>Form</code> instance <em class=
          "rfc2119" title="MUST">MUST</em> include an entry in the array
          associated with the name <code>additionalResponses</code>
          that includes a value for the name <code>contentType</code>.</span> 
          <span class="rfc2119-assertion" id=
          "td-additionalExpectedResponse-schema">If the data schema of
          an additional expected response differs from the output data schema of
          the interaction, the <code>Form</code> instance <em class=
          "rfc2119" title="MUST">MUST</em> include an entry in the array
          associated with the name <code>additionalResponses</code> that
          includes a value for the name <code>schema</code>.</span> 
          </p></section>
<section><h3><code>ExpectedResponse</code></h3><p>Communication metadata describing the expected
          response message for the primary response.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-contentType--ExpectedResponse"><td><code>contentType</code></td><td>Assign a content type based on a media type
                (e.g., <code>text/plain</code>) and potential
                parameters (e.g., <code>charset=utf-8</code>) for
                the media type [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2046" title="Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types">RFC2046</a></cite>].</td><td>mandatory</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table></section>
<section><h3><code>AdditionalExpectedResponse</code></h3><p>Communication metadata describing the expected
          response message for additional responses.</p><table class="def"><thead><tr><th><a>Vocabulary term</a></th><th>Description</th><th>Assignment</th><th>Type</th></tr></thead><tbody><tr class="rfc2119-table-assertion" id="td-vocab-success--AdditionalExpectedResponse"><td><code>success</code></td><td>Signals if an additional response should not be considered an error.</td><td><a href="#sec-default-values">with default</a></td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#boolean"><code>boolean</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-schema--AdditionalExpectedResponse"><td><code>schema</code></td><td>Used to define the output data schema of the Interaction
                for an additional response.</td><td>optional</td><td><a href="#dataschema"><code>DataSchema</code></a></td></tr>
<tr class="rfc2119-table-assertion" id="td-vocab-contentType--AdditionalExpectedResponse"><td><code>contentType</code></td><td>Assign a content type based on a media type
                (e.g., <code>text/plain</code>) and potential
                parameters (e.g., <code>charset=utf-8</code>) for
                the media type [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2046" title="Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types">RFC2046</a></cite>].</td><td>optional</td><td><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a> or <a>Array</a> of <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a></td></tr></tbody></table></section>


    </section>

   </section>
   <section id="sec-default-values">
      <h3>Default Value Definitions</h3>
      <p><span class="rfc2119-assertion" id=
      "td-vocabulary-defaults">When assignments in a TD are
      missing, a <a href="#dfn-td-processor" class="internalDFN"
      data-link-type="dfn">TD Processor</a> <em class="rfc2119"
      title="MUST">MUST</em> follow the <a href=
      "#dfn-default-value" class="internalDFN" data-link-type=
      "dfn">Default Value</a> assignments expressed in the table of
      <a href="#sec-default-values" class=
      "sec-ref">Default Value
      Definitions</a>.</span></p>
      <p>The following table gives all <a href="#dfn-default-value"
      class="internalDFN" data-link-type="dfn">Default Values</a>
      defined in the <a href="#dfn-inf-model" class="internalDFN"
      data-link-type="dfn">TD Information Model</a>.</p>
      <table class="def">
        <thead>
          <tr>
            <th>
              <a href="#dfn-class" class="internalDFN"
              data-link-type="dfn">Class</a>
            </th>
            <th>
              <a href="#dfn-vocab-term" class="internalDFN"
              data-link-type="dfn">Vocabulary Term</a>
            </th>
            <th>
              <a href="#dfn-default-value" class="internalDFN"
              data-link-type="dfn">Default Value</a>
            </th>
            <th>Comment</th>
          </tr>
        </thead>
        <tbody>
          <tr class="rfc2119-default-assertion" id=
          "td-default-contentType">
            <td><code>Form</code></td>
            <td><code>contentType</code></td>
            <td><code>application/json</code></td>
            <td></td>
          </tr>
          <tr class="rfc2119-default-assertion" id=
          "td-default-readOnly">
            <td><code>DataSchema</code></td>
            <td><code>readOnly</code></td>
            <td><code>false</code></td>
            <td></td>
          </tr>
          <tr class="rfc2119-default-assertion" id=
          "td-default-writeOnly">
            <td><code>DataSchema</code></td>
            <td><code>writeOnly</code></td>
            <td><code>false</code></td>
            <td></td>
          </tr>
          <tr class="rfc2119-default-assertion" id=
          "td-default-safe">
            <td><code>ActionAffordance</code></td>
            <td><code>safe</code></td>
            <td><code>false</code></td>
            <td></td>
          </tr>
          <tr class="rfc2119-default-assertion" id=
          "td-default-idempotent">
            <td><code>ActionAffordance</code></td>
            <td><code>idempotent</code></td>
            <td><code>false</code></td>
            <td></td>
          </tr>
          <tr class="rfc2119-default-assertion" id=
          "td-default-success">
            <td><code>AdditionalExpectedResponse</code></td>
            <td><code>success</code></td>
            <td><code>false</code></td>
            <td></td>
          </tr>
          <tr class="rfc2119-default-assertion" id=
          "td-default-op-properties">
            <td><code>Form</code></td>
            <td><code>op</code></td>
            <td>
              <a href="#dfn-array" class="internalDFN"
              data-link-type="dfn">Array</a> of <code>string</code>
              with the elements <code>readproperty</code> and
              <code>writeproperty</code> when <code>readOnly</code> and <code>writeOnly</code> are set to <code>false</code> or
              <a href="#dfn-array" class="internalDFN"
              data-link-type="dfn">Array</a> of <code>string</code>
              with the element <code>readproperty</code> when <code>readOnly</code> is set to <code>true</code> or
              <a href="#dfn-array" class="internalDFN"
              data-link-type="dfn">Array</a> of <code>string</code>
              with the element <code>writeproperty</code> when <code>writeOnly</code> is set to <code>true</code>.
              <br>
            </td>
            <td>If defined within an instance of
            <code>PropertyAffordance</code></td>
          </tr>
          <tr class="rfc2119-default-assertion" id=
          "td-default-op-actions">
            <td><code>Form</code></td>
            <td><code>op</code></td>
            <td><code>invokeaction</code></td>
            <td>If defined within an instance of
            <code>ActionAffordance</code></td>
          </tr>
          <tr class="rfc2119-default-assertion" id=
          "td-default-op-events">
            <td><code>Form</code></td>
            <td><code>op</code></td>
            <td><a>Array</a> of <code>string</code> with the elements <code>subscribeevent</code> and <code>unsubscribeevent</code></td>
            <td>If defined within an instance of
            <code>EventAffordance</code></td>
          </tr>
          <tr class="rfc2119-default-assertion" id=
          "td-default-in-basic">
            <td><code>BasicSecurityScheme</code></td>
            <td><code>in</code></td>
            <td><code>header</code></td>
            <td></td>
          </tr>
          <tr class="rfc2119-default-assertion" id=
          "td-default-in-digest">
            <td><code>DigestSecurityScheme</code></td>
            <td><code>in</code></td>
            <td><code>header</code></td>
            <td></td>
          </tr>
          <tr class="rfc2119-default-assertion" id=
          "td-default-in-bearer">
            <td><code>BearerSecurityScheme</code></td>
            <td><code>in</code></td>
            <td><code>header</code></td>
            <td></td>
          </tr>
          <tr class="rfc2119-default-assertion" id=
          "td-default-in-apikey">
            <td><code>APIKeySecurityScheme</code></td>
            <td><code>in</code></td>
            <td><code>query</code></td>
            <td></td>
          </tr>
          <tr class="rfc2119-default-assertion" id=
          "td-default-qop">
            <td><code>DigestSecurityScheme</code></td>
            <td><code>qop</code></td>
            <td><code>auth</code></td>
            <td></td>
          </tr>
          <tr class="rfc2119-default-assertion" id=
          "td-default-alg">
            <td><code>BearerSecurityScheme</code></td>
            <td><code>alg</code></td>
            <td><code>ES256</code></td>
            <td></td>
          </tr>
          <tr class="rfc2119-default-assertion" id=
          "td-default-format">
            <td><code>BearerSecurityScheme</code></td>
            <td><code>format</code></td>
            <td><code>jwt</code></td>
            <td></td>
          </tr>
        </tbody>
      </table>
    </section>
  </section>

  <section id="sec-td-serialization" class="normative">
  <h1>TD Representation Format</h1>

  <p>
    WoT Thing Descriptions represent Things and are modeled and structured based on
  <a href="#sec-vocabulary-definition"></a>.
  This section defines a JSON-based representation format for <a>Things</a>,
  a serialization of instances of the <a>Class</a> <code>Thing</code> defined by the <a>TD Information Model</a>.
  </p>

  <p>
    <span class="rfc2119-assertion" id="td-processor-serialization">
        A <a>TD Processor</a> MUST be able to serialize <a>Thing Descriptions</a>
        into the JSON format [[!RFC8259]] and/or deserialize <a>Thing Descriptions</a>
        from that format, according to the rules noted in
        <a href="#td-basic-types-mapping"></a> and
        <a href="#td-class-serialization"></a>.
    </span>
  </p>

  <p>
  The JSON serialization of the <a>TD Information Model</a> is aligned with
  the syntax of JSON-LD 1.1 [[?json-ld11]]
  in order to streamline semantic evaluation.
  Hence, the TD representation format can be processed either as raw JSON
  or with a JSON-LD 1.1 processor
  (for details about semantic processing, please refer to 
  <a href="#json-ld-ctx-usage"></a> and the documentation under the namespace IRIs, e.g.,
  <a href="https://www.w3.org/2019/wot/td">https://www.w3.org/2019/wot/td</a>).
  </p>

<p>
In order to support interoperable internationalization,
<span class="rfc2119-assertion" id="td-json-open">TDs MUST be serialized according to the 
requirements defined in Section 8.1 of RFC8259 [[!RFC8259]] for open ecosystems.</span>
In summary, this requires the following:
<ul>
<li><span class="rfc2119-assertion" id="td-json-open_utf-8">TDs MUST be encoded using UTF-8 [[!RFC3629]].</span</li>
<li><span class="rfc2119-assertion" id="td-json-open_no-byte-order">Implementations MUST NOT 
  add a byte order mark (U+FEFF) to the beginning of a TD document.</span></li>
<li><span class="rfc2119-assertion" id="td-json-open_accept-byte-order"><a>TD Processors</a> MAY ignore
  the presence of a byte order mark rather than treating it as an error.</span></li>
</ul>
</p>

<section id="td-basic-types-mapping">
<h2>Mapping to JSON Types</h2>

  <p>
    The <a>TD Information Model</a> is constructed,
    so that there is an easy mapping between model <a>Objects</a> and JSON types.
    Every <a>Class</a> instances maps to a JSON object,
    where each name-value pair of the <a>Class</a> instance
    is a member of the JSON object.
  </p>

  <p>
    Every <a>Simple Type</a> mentioned in
    <a href="#class-definitions"></a> (i.e., <code>string</code>, <code>anyURI</code>,
    <code>dateTime</code>, <code>integer</code>, <code>unsignedInt</code>,
    <code>double</code>, and <code>boolean</code>) maps to a primitive JSON 
    type (string, number, boolean), as per the rules listed below. These
    rules apply to values in name-value pairs:
  </p>
  <ul>
  <li><span class="rfc2119-assertion" id="td-string-type">
        Values that are of type <code>string</code> or
        <code>anyURI</code> MUST be serialized as JSON strings.
  </span></li>
  <li><span class="rfc2119-assertion" id="td-datetime-type">
        Values that are of type <code>dateTime</code>
        MUST be serialized as JSON strings  following the "date-time" format
        specified by [[RFC3339]].
    </span>
        Examples would include <code>2019-05-24T13:12:45Z</code> and
        <code>2015-07-11T09:32:26+08:00</code>.
    <span class="rfc2119-assertion" id="td-datetime-recommended-type">
        Values that are of type <code>dateTime</code>
        SHOULD use the literal <code>Z</code> 
        representing the UTC time zone instead 
        of an offset.
    </span>
  </li>
  <li><span class="rfc2119-assertion" id="td-integer-type">
        Values that are of type <code>integer</code> or <code>unsignedInt</code>
        MUST be serialized as JSON numbers without a fraction or exponent part.
  </span></li>
  <li><span class="rfc2119-assertion" id="td-number-type">
        Values that are of type <code>double</code>
        MUST be serialized as JSON number.
  </span></li>
  <li><span class="rfc2119-assertion" id="td-boolean-type">
        Values that are of type <code>boolean</code>
        MUST be serialized as JSON boolean.
  </span></li>
  </ul>
  
  <p>
    Every complex type of the <a>TD Information Model</a> (i.e., <a>Arrays</a>, <a>Maps</a>, and <a>Class</a> instances)
    maps to a structured JSON type (array and object), as per the rules listed below:
  </p>
  <ul>
  <li><span class="rfc2119-assertion" id="td-array-type">
        A value of type <a>Array</a> MUST be serialized as JSON array,
        with each value of the name-value pairs as element of the JSON array
        ordered by the numeric name of the pair.
  </span></li>
  <li><span class="rfc2119-assertion" id="td-map-type">
        A value of type <a>Map</a> MUST be serialized as JSON object,
        with each name-value pair as member of the JSON object.
  </span></li>
  <li><span class="rfc2119-assertion" id="td-class-type">
        A <a>Class</a> instance MUST be serialized as JSON object,
        following the detailed rules given individually in <a href="#td-class-serialization"></a>.
  </span></li>
  </ul>

</section>
  
<section id="omitting-default-values">
<h2>Omitting Default Values</h2>

  <p>
  A Thing Description serialization may omit <a>Vocabulary Term</a>
  for which <a>Default Values</a> are defined,
  as listed in the table given in <a href="#sec-default-values"></a>.
  </p>

  <p>
  The following example shows the TD instance from
  <a href="#simple-thing-description-sample">Example 1</a>
  with a checkbox to also include the members with <a>Default Values</a> (=checkbox checked).
  These members can be omitted (=checkbox unchecked) to simplify the TD serialization.
  Note that a <a>TD Processor</a> interprets these omitted members identically
  as if they were explicitly present with a given <a>Default Value</a>.
  </p>

  <aside class="example with-default">
    <div class="with-default-control">
      <input type="checkbox"/>
      <span><i>with Default Values</i></span>
    </div>
<pre>{
    "@context": "http://www.w3.org/ns/td",
    "id": "urn:dev:ops:32473-WoTLamp-1234",
    "title": "MyLampThing",
    "securityDefinitions": {
        "basic_sc": {
            "scheme": "basic"
        }
    },
    "security": "basic_sc",
    "properties": {
        "status": {
            "type": "string",
            "forms": [{
                "href": "https://mylamp.example.com/status"
            }]
        }
    },
    "actions": {
        "toggle": {
            "forms": [{
                "href": "https://mylamp.example.com/toggle"
            }]
        }
    },
    "events": {
        "overheating": {
            "data": {
                "type": "string"
            },
            "forms": [{
                "href": "https://mylamp.example.com/oh",
                "subprotocol": "longpoll"
            }]
        }
    }
}
</pre>
<pre>{
    "@context": "http://www.w3.org/ns/td",
    "id": "urn:dev:ops:32473-WoTLamp-1234",
    "title": "MyLampThing",
    "securityDefinitions": {
        "basic_sc": {
            "scheme": "basic",
            "in": "header"
        }
    },
    "security": "basic_sc",
    "properties": {
        "status": {
            "type": "string",
            "readOnly": false,
            "writeOnly": false,
            "forms": [{
                "op": [
                    "readproperty",
                    "writeproperty"
                ],
                "href": "https://mylamp.example.com/status",
                "contentType": "application/json"
            }]
        }
    },
    "actions": {
        "toggle": {
            "safe": false,
            "idempotent": false,
            "forms": [{
                "op": "invokeaction",
                "href": "https://mylamp.example.com/toggle",
                "contentType": "application/json"
            }]
        }
    },
    "events": {
        "overheating": {
            "data": {
                "type": "string",
                "readOnly": false,
                "writeOnly": false
            },
            "forms": [{
                "op": "subscribeevent",
                "href": "https://mylamp.example.com/oh",
                "contentType": "application/json",
                "subprotocol": "longpoll"
            }]
        }
    }
}
</pre>
    </aside>

    <p>
    Please note that, depending on the <a>Protocol Binding</a> used,
    additional protocol-specific <a>Vocabulary Terms</a> may apply.
    They may also have associated <a>Default Values</a>,
    and hence can also be omitted as explained in this subsection.
    Further information can be found in <a href="#protocol-bindings"></a>.
    </p>
  </section>

<section id="td-class-serialization">
<h2>Information Model Serialization</h2>

<section id="sec-thing-as-a-whole-json">
<h3>Thing Root Object</h3>

  <p>
    A Thing Description is a data structure rooted at an <a>Object</a>
    of type <a href="#thing"><code>Thing</code></a>.
    In turn, a JSON serialization of the Thing Description
    is a JSON object, which is the root of a syntax tree constructed
    from the <a>TD Information Model</a>.
  </p>

  <p><span class="rfc2119-assertion" id="td-context">
  The root element of a <a>TD Serialization</a> MUST be a JSON object that
  includes a member with the name <code>@context</code> and a value of type
  string or array that equals or respectively contains <code>http://www.w3.org/ns/td</code>.
  </span></p>
  
  <p>
  In general, this URI is used to identify the
  TD representation format version defined by this specification.
  For JSON-LD processing [[?json-ld11]], this URI specifies the Thing Description context file.
  An <code>@context</code> of type array indicates <a>TD Context Extensions</a> (see <a href="#sec-context-extensions"></a> for details).
  </p>

<pre class="example">
{  
    "@context": "http://www.w3.org/ns/td",
    ...
}
</pre>

  <p><span class="rfc2119-assertion" id="td-context-toplevel">
    All name-value pairs of an instance of <code>Thing</code>,
    where the name is a <a>Vocabulary Term</a> in the <a>Signature</a> of <code>Thing</code>,
    MUST be serialized as JSON members of the root object.
  </span></p>

  <p>
    A TD snippet for a serialized root object including all mandatory and optional members is given below:
  </p>

<pre class="example" id="thing-serialization-sample" title="Sample of Thing serializations">
{
    "@context": "http://www.w3.org/ns/td",
    "@type": "Thing",
    "id": "urn:dev:ops:32473-Thing-1234",
    "title": "MyThing",
    "titles": {...},
    "description": "Human readable information.",
    "descriptions": {...},
    "support": "mailto:support@example.com",
    "version": {...},
    "created": "2018-11-14T19:10:23.824Z",
    "modified": "2019-06-01T09:12:43.124Z",
    "securityDefinitions": {...},
    "security": ...,
    "base": "https://servient.example.com/",
    "properties": {...},
    "actions": {...},
    "events": {...},
    "links": [...],
    "forms": [...]
}
</pre>

  <p><span class="rfc2119-assertion" id="td-objects">
  All values assigned to
  <code>version</code>,
  <code>securityDefinitions</code>,
  <code>properties</code>,
  <code>actions</code>, and
  <code>events</code>
  in an instance of the <a>Class</a> <code>Thing</code>
  MUST be serialized as JSON objects.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-arrays">
  All values assigned to
  <code>links</code>, and
  <code>forms</code>
  in an instance of the <a>Class</a> <code>Thing</code>
  MUST be serialized as JSON arrays containing JSON objects
  as defined in <a href="#link-serialization-json"></a>
  and <a href="#form-serialization-json"></a>, respectively.
  </span></p>

  <p>
  <span class="rfc2119-assertion" id="td-security-activation">
  The value assigned to
  <code>security</code>
  in an instance of <a>Class</a> <code>Thing</code>
  MUST be serialized as JSON string or as JSON array whose elements are JSON strings.
  </span>
  </p>

</section> <!-- end of id="sec-thing-as-a-whole-json"-->

<section id="titles-descriptions-serialization-json">
<h3>Human-Readable Metadata</h3>

  <p>
    JSON members named <code>title</code> and <code>description</code> are 
    used within a TD document to provide human-readable metadata.
    They can be used as comments for developers inspecting a TD document
    or as display texts for user interface.
  </p>

  <p>
    As defined in <a href="#thing"></a>, the base text direction used to display human-readable metadata
    can either be estimated using heuristics such as the first-strong rule or inferred from language information.
    In TD documents the default language is defined by a value assigned to <code>@language</code> in the <code>@context</code>,
    and this, along with a script subtag if necessary, can be used to determine a base text direction.
    <span class="rfc2119-assertion" id="td-context-default-language-direction-independence">
      However, when interpreting human-readable text,
      each human-readable string value MUST be processed independently.
    </span>
    In other words, a <a>TD Processor</a> cannot carry forward changes in direction from one string to another,
    or infer direction for one string from another one elsewhere in the TD.
  </p>

  <p class="note">
    Strings on the Web [[?STRING-META]] suggests 
    both strong-first and language-based inferencing as means
    to determine the base text direction.
    Given that the Thing Description format is based on JSON-LD 1.1 
    [[?json-ld11]], which currently lacks explicit direction metadata,
    these approaches are currently considered appropriate 
    at the time of this publication. 
    However, if JSON-LD 1.1 adopts support for explicit
    base direction metadata as recommended by [[?STRING-META]],
    the Thing Description format should be updated to take advantage of 
    that feature.
  </p>
  
  <p>
  A TD snippet using <code>title</code> and <code>description</code> is 
  shown below. The default language is set to <code>en</code> through the
  definition of the <code>@language</code> member within a JSON object in the <code>@context</code> array.
  </p>

<pre class="example">
{
    "@context": [
        "http://www.w3.org/ns/td",
        { "@language" : "en" }
    ],
    "title": "MyThing",
    "description": "Human readable information.",
    ...
    "properties": {
        "on": {
            "title": "On/Off",
            "type": "boolean",
            "forms": [...]
        },
        "status": {
            "title": "Status",
            "type": "object",
            ...
            "forms": [...]
        }
    },
    ...
}
</pre>

  <p>
  The JSON members named <code>titles</code> and <code>descriptions</code> are 
  used within the TD document to provide human-readable metadata
  in multiple languages within a single TD document.
  <span class="rfc2119-assertion" id="td-multi-languages">
    All name-value pairs of a <code>MultiLanguage</code> <a>Map</a>
    MUST be serialized as members of a JSON object,
    where the name is a well-formed language tag as defined by [[!BCP47]]
    and the value is a human-readable string in the language indicated by the tag.
  </span>
  See <a href="#multilanguage"></a> for details.
  <span class="rfc2119-assertion" id="td-multi-languages-consistent">
    All <code>MultiLanguage</code> object within a TD document
    SHOULD contain the same set of language members.
  </span>
  </p>

  <p>A TD snippet using <code>titles</code> and <code>descriptions</code> at different levels is given below:</p>
    
<pre class="example">
{
    "@context": "http://www.w3.org/ns/td",
    "title": "MyThing",
    "titles": {
        "en":"MyThing",
        "de": "MeinDing",
        "ja": "私の物",
        "zh-Hans": "我的东西", 
        "zh-Hant": "我的東西"
    },
    "descriptions": {
        "en":"Human readable information.",
        "de": "Menschenlesbare Informationen.",
        "ja": "人間が読むことができる情報",
        "zh-Hans": "人们可阅读的信息", 
        "zh-Hant": "人們可閱讀的資訊"
    },
    ...
    "properties": {
        "on": {
            "titles": {
                "en": "On/Off",
                "de": "An/Aus",
                "ja": "オンオフ",
                "zh-Hans": "开关",
                "zh-Hant": "開關" },
            "type": "boolean",
            "forms": [...]
        },
        "status": {
            "titles": {
                "en": "Status",
                "de": "Zustand",
                "ja": "状態",
                "zh-Hans": "状态",
                "zh-Hant": "狀態" },
            "type": "object",
            ...
            "forms": [...]
        }
    },
    ...
}
</pre>
    
  <p>
  TD instances may also combine the use of <code>title</code> and <code>description</code>
  with <code>titles</code> and <code>descriptions</code>.
  <span class="rfc2119-assertion" id="td-title-description">
    When <code>title</code> and <code>titles</code> or
    <code>description</code> and <code>descriptions</code>
    are present within the same JSON object,
    the values of <code>title</code> and <code>description</code> MAY be seen as the default text.
  </span>
  <span class="rfc2119-assertion" id="td-titles-descriptions">
    When <code>title</code> and <code>titles</code> or
    <code>description</code> and <code>descriptions</code>
    are present in a TD document,
    each <code>title</code> and <code>description</code> member
    SHOULD have a corresponding <code>titles</code> and <code>descriptions</code> member, respectively.
  </span>
  The language of the default text is indicated by the default language,
  which is usually set by the creator of the Thing Description instance.
  </p>
    
<pre class="example">
{
    "@context": [
        "http://www.w3.org/ns/td",
        { "@language" : "de" }
    ],
    "title": "MeinDing",
    "titles": {
        "en":"MyThing",
        "de": "MeinDing",
        "ja": "私の物",
        "zh-Hans": "我的东西", 
        "zh-Hant": "我的東西"
    },
    "description": "Menschenlesbare Informationen.",
    "descriptions": {
        "en":"Human readable information.",
        "de": "Menschenlesbare Informationen.",
        "ja": "人間が読むことができる情報",
        "zh-Hans": "人们可阅读的信息", 
        "zh-Hant": "人們可閱讀的資訊"
    },
    ...
    "properties": {
        "on": {
            "title": "An/Aus",
            "titles": {
                "en": "On/Off",
                "de": "An/Aus",
                "ja": "オンオフ",
                "zh-Hans": "开关",
                "zh-Hant": "開關" },
            "type": "boolean",
            "forms": [...]
        },
        "status": {
            "title": "Zustand",
            "titles": {
                "en": "Status",
                "de": "Zustand",
                "ja": "状態",
                "zh-Hans": "状态",
                "zh-Hant": "狀態" },
            "type": "object",
            ...
            "forms": [...]
        }
    },
    ...
}
</pre>

<p>
  Another possibility to set the default language is through a language negotiation mechanism,
  such as the <code>Accept-Language</code> header field of HTTP.
  <span class="rfc2119-assertion" id="td-ns-multilanguage-content-negotiation">
    In cases where the default language has been negotiated,
    an <code>@language</code> member MUST be present to indicate the result of the negotiation and the corresponding default language of the returned content.
  </span>
  <span class="rfc2119-assertion" id="td-ns-multilanguage-content-negotiation-no-multi">
    When the default language has been negotiated successfully,
    TD documents SHOULD include the appropriate matching values for the members <code>title</code> and <code>description</code>
    in preference to <code>MultiLanguage</code> objects in <code>titles</code> and <code>descriptions</code> members.
  </span>
  <span class="rfc2119-assertion" id="td-ns-multilanguage-content-negotiation-optional">
    Note however that Things MAY choose to not support such dynamically-generated TDs
    nor to support language negotiation (e.g., because of resource constraints).
  </span>
  </p>

</section> <!-- end of id="human-readable-serialization-json"-->

<section id="version-serialization-json">
<h3><code>version</code></h3>

  <p><span class="rfc2119-assertion" id="td-version">
    All name-value pairs of an instance of <code>VersionInfo</code>,
    where the name is a <a>Vocabulary Term</a> included in the <a>Signature</a> of <code>VersionInfo</code>,
    MUST be serialized as JSON members with the <a>Vocabulary Term</a> as name.
  </span></p>

  
  <p>A TD snippet of a version information object is given below:</p>

<pre class="example">
{
    ...
    "version": { "instance": "1.2.1" },
    ...
}
</pre>

  <p>
        The <code>version</code> member is intended as container for additional application- and/or device-specific version information based 
        on <a>TD Context Extensions</a>. See <a href="#semantic-annotations"></a> for details.
  </p>

</section> <!-- end of id="version-json"-->

<section id="security-serialization-json">
<h3><code>securityDefinitions</code> and <code>security</code></h3>

  <p>
    In a <code>Thing</code> instance, the value assigned to
    <code>securityDefinitions</code> is a <a>Map</a> of instances of
    <code>SecurityScheme</code>.
    <span class="rfc2119-assertion" id="td-security">
    All name-value pairs of a <a>Map</a> of <code>SecurityScheme</code> instances
    MUST be serialized as members of the JSON object that results from serializing the <a>Map</a>;
    the name of a pair MUST be serialized as a JSON string and the value of the pair, an
    instance of <code>SecurityScheme</code>, MUST be serialized as a JSON object.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-security-schemes">
    All name-value pairs of an instance of one of the <a>Subclasses</a> of
    <code>SecurityScheme</code>,
    where the name is a <a>Vocabulary Term</a> included in the
    <a>Signature</a> of that <a>Subclass</a> or in the <a>Signature</a> of
    <code>SecurityScheme</code>, MUST be serialized as members of the JSON object
    that results from serializing the <code>SecurityScheme</code> <a>Subclass</a>'s
    instance, with the <a>Vocabulary Term</a> as name.
  </span></p>

  <p>
  The following TD snippet shows a simple security configuration specifying
  basic username/password authentication in the header.
  The value given for <code>in</code> is actually the <a>Default Value</a> (<code>header</code>)
  and could be omitted.
  A named security configuration must be given
  in the <code>securityDefinitions</code> map.
  That definition must be activated by including its JSON name in the
  <code>security</code> member, which can and should be of type string when only one definition is activated.
  </p>

<pre class="example" id="security-basic-example">
    ...
    "securityDefinitions": {
        "basic_sc": {
            "scheme": "basic",
            "in": "header"
        }
    },
    "security": "basic_sc",
    ...
</pre>

  <p>
  Here is a more complex example: a TD snippet showing digest authentication
  on a proxy combined with bearer token authentication on the <a>Thing</a>.
  In the <code>digest</code> scheme, the <a>Default Value</a> of <code>in</code>
  (i.e., <code>header</code>) is omitted, but still applies.
  Note that the corresponding private security configuration
  such as username/password and tokens must be configured in the <a>Consumer</a>
  to interact successfully.
  When activating multiple security definitions, 
  the <code>security</code> member becomes an array.
  </p>

<pre class="example" id="security-digest-example">
    ...
    "securityDefinitions": {
        "proxy_sc": {
            "scheme": "digest",
            "proxy": "https://portal.example.com/"
        },
        "bearer_sc": {
            "scheme": "bearer",
            "in":"header",
            "format": "jwt",
            "alg": "ES256",
            "authorization": "https://servient.example.com:8443/"
        }
    },
    "security": ["proxy_sc", "bearer_sc"],
    ...
</pre>
 
  <p>However, the use of an array with multiple elements to combine security schemes
  in a <code>security</code> element is now deprecated.
  A <a href="#combosecurityscheme"><code>ComboSecurityScheme</code></a> 
  should be used instead as in the following example, which is exactly equivalent to the one above:
  </p>

<pre class="example" id="security-digest-example2">
    ...
    "securityDefinitions": {
        "proxy_sc": {
            "scheme": "digest",
            "proxy": "https://portal.example.com/"
        },
        "bearer_sc": {
            "scheme": "bearer",
            "in":"header",
            "format": "jwt",
            "alg": "ES256",
            "authorization": "https://servient.example.com:8443/"
        },
        "combo_sc": {
            "scheme": "combo",
            "allOf": ["proxy_sc", "bearer_sc"],
        }
    },
    "security": "combo_sc",
    ...
</pre>

  <p>
  Security configuration in the TD is mandatory.
  <span class="rfc2119-assertion" id="td-security-mandatory">
  At least one security definition MUST be activated through the
  <code>security</code> member at the Thing level (i.e., in the TD root object).
  </span>
  This configuration can be seen as the default security mechanism required to interact with the <a>Thing</a>.
  <span class="rfc2119-assertion" id="td-security-overrides">
  Security definitions MAY also be activated at the form level by including a
  <code>security</code> member in form objects,
  which overrides (i.e., completely replace) all definitions activated at the Thing level.
  </span>
  </p>

  <p>
  The <code>nosec</code> security scheme is provided for the case that 
  no security is needed.
  The minimal security configuration for a <a>Thing</a> is activation
  of the <code>nosec</code> security scheme 
  at the Thing level, as shown in the following example:
  </p>

<pre class="example">
{
    "@context": "http://www.w3.org/ns/td",
    "id": "urn:dev:ops:32473-Thing-1234",
    "title": "MyThing",
    "description": "Human readable information.",
    "support": "https://servient.example.com/contact",
    "securityDefinitions": { "nosec_sc": { "scheme": "nosec" }},
    "security": "nosec_sc",
    "properties": {...},
    "actions": {...},
    "events": {...},
    "links": [...]
}
</pre> 

  <p>
  To give a more complex example, 
  suppose we have a <a>Thing</a> where all <a>Interaction Affordances</a>
  require basic authentication except for one, for which
  no authentication is required.
  For the <code>status</code> Property and the <code>toggle</code> Action,
  <code>basic</code> authentication is required and defined at the Thing level.
  For the <code>overheating</code> Event, however,
  no authentication is required, and hence the security configuration is
  overridden at the form level.
  </p>

<pre class="example">
{
    ...
    "securityDefinitions": {
        "basic_sc": {"scheme": "basic"},
        "nosec_sc": {"scheme": "nosec"}
    },
    "security": "basic_sc",
    ...
    "properties": {
        "status": {
            ...
            "forms": [{
                "href": "https://mylamp.example.com/status"
            }]
        }
    },
    "actions": {
        "toggle": {
            ...
            "forms": [{
                "href": "https://mylamp.example.com/toggle"
            }]
        }
    },
    "events": {
        "overheating": {
            ...
            "forms": [{
                "href": "https://mylamp.example.com/oh",
                "security": "nosec_sc"
            }]
        }
    }
}
</pre>

  <p>
  Security configurations can also can be specified for different forms
  within the same <a>Interaction Affordance</a>. This may be required for devices that support
  multiple protocols, for example HTTP and CoAP [[?RFC7252]], which support different
  security mechanisms.  This is also useful when alternative authentication
  mechanisms are allowed.  Here is a TD snippet demonstrating three possible
  ways to activate a Property affordance: via HTTPS with basic authentication,
  with digest authentication, with bearer token authentication.
  In other words, 
  the use of different security configurations within multiple forms
  provides a way to combine security mechanisms in an "OR" fashion.
  In contrast, putting multiple security configurations in the same
  <code>security</code> member combines them in an "AND" fashion, 
  since in that case they would all need to be satisfied to allow activation of the <a>Interaction Affordance</a>.
  Note that activating one (default) configuration at the Thing level is still mandatory.
  </p>

<pre class="example">
{
    ...
    "securityDefinitions": {
        "basic_sc": { "scheme": "basic" },
        "digest_sc": { "scheme": "digest" },
        "bearer_sc": { "scheme": "bearer" }
    },
    "security": "basic_sc",
    ...
    "properties": {
        "status": {
            ...
            "forms": [{
                "href": "https://mylamp.example.com/status"
            }, {
                "href": "https://mylamp.example.com/status",
                "security": "digest_sc"
            }, {
                "href": "https://mylamp.example.com/status",
                "security": "bearer_sc"
            }]
        }
    },
    ...
}
</pre>
  <p>To avoid redundancy in this case, e.g. repeating the details of the <code>form</code>
  elements, a <a href="#combosecurityscheme"><code>ComboSecurityScheme</code></a>
  with <code>oneOf</code> can be used instead.  
  </p>
<pre class="example">
{
    ...
    "securityDefinitions": {
        "basic_sc": { "scheme": "basic" },
        "digest_sc": { "scheme": "digest" },
        "bearer_sc": { "scheme": "bearer" },
        "combo_sc": { 
            "scheme": "combo", 
            "oneOf": [ "basic_sc", "digest_sc", "bearer_sc" ] 
        }
    },
    "security": "combo_sc",
    ...
    "properties": {
        "status": {
            ...
            "forms": [{
                "href": "https://mylamp.example.com/status"
            }]
        }
    },
    ...
}
</pre>

  <p>
  As another more complex example, OAuth 2.0 makes use of scopes. 
  These are identifiers that 
  may appear in tokens and must match with corresponding identifiers in a resource to allow 
  access to that resource (or <a>Interaction Affordance</a> in the case of W3C WoT).
  For example, in the following, the <code>status</code> Property can be
  read by <a>Consumers</a> using bearer tokens containing the scope <code>limited</code>,
  but the <code>configure</code> Action can only be invoked
  with a token containing the <code>special</code> scope.
  Scopes are not identical to roles, but are often associated with them;
  for example, perhaps only those in an administrative role are authorized to perform "special" interactions.
  Tokens can have more than one scope.  
  In this example, an administrator would
  probably be issued tokens with both the <code>limited</code> and <code>special</code> scopes,
  while ordinary users would only be issued tokens with the <code>limited</code> scope.
  </p>

<pre class="example">
{
    ...
    "securityDefinitions": {
        "oauth2_sc": {
            "scheme": "oauth2",
            ...
            "flow": "code",
            "authorization": "https://example.com/authorization",
            "token": "https://example.com/token",
            "scopes": ["limited", "special"]
        }
    },
    "security": "oauth2_sc",
    ...
    "properties": {
        "status": {
            ...
            "forms": [{
                "href": "https://scopes.example.com/status",
                "scopes": ["limited"]
            }]
        }
    },
    "actions": {
        "configure": {
            ...
            "forms": [{
                "href": "https://scopes.example.com/configure",
                "scopes": ["special"]
            }]
        }
    },
    ...
}
</pre>

  <p>To give another example of the use of
  the <a href="#combosecurityscheme"><code>ComboSecurityScheme</code></a> and the
  use of URI templates to embed security keys in URLs, suppose there is a security scheme
  where a client ID and a "secret" key provided by a cloud service provider must both be
  embedded in the URL.  Technically, only the key is actually secret and must be handled
  out-of-band, and the client ID, which is not secret, could be embedded in the TD.
  However, if the client ID cannot be easily rotated we may want to avoid embedding it in
  the TD to enhance privacy.
  In this case we can combine two instances of 
  <a href="#apikeysecurityscheme"><code>APIKeySecurityScheme</code></a>, both
  using the <code>uri</code> value for the <code>in</code> location specifier, to 
  declare two URI variables.  These can then (in fact, they must) be used in the 
  <code>href</code> in a <code>Form</code> where the security scheme is active.
  An example follows:
  </p>
<pre class="example">
{
    ...
    "securityDefinitions": {
        "apikey_key": {
            "scheme": "apikey",
            "in": "uri",
            "name": "secKey"
        },
        "apikey_id": {
            "scheme": "apikey",
            "in": "uri",
            "name": "secClientID"
        },
        "apikey_combo": {
            "scheme": "combo",
            "allOf": ["apikey_key","apikey_id"]
        }
    },
    "security": "apikey_combo",
    ...
    "properties": {
        "status": {
            ...
            "forms": [{
                "href": "https://example.com/{secClientID}/status/{secKey}",
                ...
            }]
        }
    },
    ...
}
</pre>
<p>While not shown in this example, it is legal to declare additional URI template
variables using <code>uriVariables</code> and include them in the same URI template,
although the names cannot conflict with those declared in security schemes.  
Using a specific prefix as in the above example
for URI variables declared in security schemes can make it easier to avoid name conflicts.
</p>
<p>Security parameters might also be included along with the payload in some
systems.  For example, suppose a system requires every payload to be a JSON
object including a member named <code>auth</code> whose value is an object
containing a member called <code>key</code> containing an access key.
Depending on the interaction, however, other elements of the JSON object might 
vary.  This situation can be dealt with using the <code>body</code> security
information location.
Note that for this location, the <code>name</code> parameter is actually a JSON pointer
evaluated relative to the root of the <code>DataSchema</code> for each interaction
it is bound with, which allows it to be used with payloads that vary in other respects.
As an example, here is a light that has a property to set its brightness and color
and two separate actions to turn it on and off.  Although the JSON payloads
are different for these actions the <code>/auth/key</code> element occurs in the same 
relative location so single JSON pointer can be used.
Note: if the security key occurs in different inconsistent locations, it will be
necessary to use multiple security scheme definitions.
<pre class="example">
{
    ...
    "securityDefinitions": {
        "apikey_body": {
            "scheme": "apikey",
            "in": "body",
            "name": "/auth/key"
        }
    },
    "security": "apikey_body",
    ...
    "properties": {
        "color": {
            ...
            "type": "object",
            "properties": {
                "brightness": {
                    "type": "number",
                    ...
                },
                "rgb": {
                    "type": "array",
                    ...
                },
                "auth": {
                    "type": "object",
                    "properties": {
                        "key": {
                           "type": "string"
                        }
                    },
                    "required": ["key"]
                }
            },
            "required": ["brightness", "rgb", "auth"],
            "forms": [{
                "href": "https://example.com/color",
                ...
            }]
        }
    },
    "action": {
        "on": {
            ...
            "input": {
                "auth": {
                    "type": "object",
                    "properties": {
                        "key": {
                           "type": "string"
                        }
                    },
                    "required": ["key"]
                }
            },
            "required": ["auth"],
            "forms": [{
                "href": "https://example.com/on",
                ...
            }]
        },
        "off": {
            ...
            "input": {
                "auth": {
                    "type": "object",
                    "properties": {
                        "key": {
                           "type": "string"
                        }
                    },
                    "required": ["key"]
                }
            },
            "required": ["auth"],
            "forms": [{
                "href": "https://example.com/off",
                ...
            }]
        }
    },
    ...
}
</pre>
However, it is rather annoying and redundant to add the security information
to every data schema.  It is possible to simplify this example by using
the feature that the location referenced by a JSON pointer in a <code>body</code>
location will be automatically inserted if it does not exist.  In this
case the above example can be simplified to the following.  Note that in fact
a data schema will effectively be <em>created</em> for the actions "<code>on</code>" and
"<code>off</code>" to hold just the security information.
<pre class="example">
{
    ...
    "securityDefinitions": {
        "apikey_body": {
            "scheme": "apikey",
            "in": "body",
            "name": "/auth/key"
        }
    },
    "security": "apikey_body",
    ...
    "properties": {
        "color": {
            ...
            "type": "object",
            "properties": {
                "brightness": {
                    "type": "number",
                    ...
                },
                "rgb": {
                    "type": "array",
                    ...
                }
            },
            "required": ["brightness", "rgb"],
            "forms": [{
                "href": "https://example.com/color",
                ...
            }]
        }
    },
    "action": {
        "on": {
            ...
            "required": ["auth"],
            "forms": [{
                "href": "https://example.com/on",
                ...
            }]
        },
        "off": {
            ...
            "forms": [{
                "href": "https://example.com/off",
                ...
            }]
        }
    },
    ...
}
</pre>

</section> <!-- end of id="security-serialization-json"-->    

<section id="property-serialization-json">
<h3><code>properties</code></h3>
  
  <p>
  The value assigned to <code>properties</code> in a <code>Thing</code> instance
  is a <a>Map</a> of instances of <code>PropertyAffordance</code>.
  <span class="rfc2119-assertion" id="td-properties">
    All name-value pairs of a <a>Map</a> of <code>PropertyAffordance</code> instances
    MUST be serialized as members of the JSON object that results from serializing the <a>Map</a>;
    the name of a pair MUST be serialized as a JSON string and the value of the pair, an
    instance of <code>PropertyAffordance</code>, MUST be serialized as a JSON object.
  </span></p>

  <p>
  <span class="rfc2119-assertion" id="td-property-names">
    All name-value pairs of an instance of <code>PropertyAffordance</code>,
    where the name is a <a>Vocabulary Term</a> included in (one of) the <a>Signatures</a> of
    <code>PropertyAffordance</code>, <code>InteractionAffordance</code>, or <code>DataSchema</code>,
    MUST be serialized as members of the JSON object that results from
    serializing the <code>PropertyAffordance</code> instance, with the
    <a>Vocabulary Term</a> as name.
  </span>
  See <a href="#data-schema-serialization-json" class="sec-ref"></a> for
  details on serializing <a href="#dataschema" class="sec-ref"><code>DataSchema</code></a> instances.
  </p>

  <p><span class="rfc2119-assertion" id="td-property-arrays">
    The value assigned to <code>forms</code> in an instance of <code>PropertyAffordance</code>
    MUST be serialized as a JSON array
    containing one or more JSON object serializations as defined in <a href="#form-serialization-json"></a>.
  </span></p>

  <p>
  A snippet for two <a>Property</a> affordances is given below:
  </p>

<aside class="example" id="property-serialization-sample" title="Sample of Property serializations">
<pre>
    ...
    "properties": {
        "on": {
            "type": "boolean",
            "forms": [...]
        },
        "status": {
            "type": "object",
            "properties": {
                "brightness": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 100.0
                },
                "rgb": {
                    "type": "array",
                    "items": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 255
                    },
                    "minItems": 3,
                    "maxItems": 3
                }
            },
            "required": ["brightness", "rgb"],
            "forms": [...]
        }
    },
    ...
</pre>
</aside>

</section> <!-- end of id="property-serialization-json"-->

<section id="action-serialization-json">
<h3><code>actions</code></h3>

  <p>
    In a <code>Thing</code> instance, the value assigned to <code>actions</code>
    is a <a>Map</a> of instances of <code>ActionAffordance</code>.
    <span class="rfc2119-assertion" id="td-actions">
    All name-value pairs of a <a>Map</a> of <code>ActionAffordance</code> instances
    MUST be serialized as members of the JSON object that results from serializing the <a>Map</a>;
    the name of a pair MUST be serialized as a JSON string and the value of the pair, an
    instance of <code>ActionAffordance</code>, MUST be serialized as a JSON object.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-action-names">
    All name-value pairs of an instance of <code>ActionAffordance</code>,
    where the name is a <a>Vocabulary Term</a> included in (one of) the <a>Signatures</a> of
    <code>ActionAffordance</code> or <code>InteractionAffordance</code>,
    MUST be serialized as members of the JSON object that results from
    serializing the <code>ActionAffordance</code> instance, with the
    <a>Vocabulary Term</a> as name.
  </span></p>

  <p>
  <span class="rfc2119-assertion" id="td-action-objects">
    The values assigned to <code>input</code> and <code>output</code> in an instance of
    <code>ActionAffordance</code>
    MUST be serialized as JSON objects.
  </span>
  They rely on the <a>Class</a> <a href="#dataschema" class="sec-ref"><code>DataSchema</code></a>,
  whose serialization is defined in <a href="#data-schema-serialization-json"></a>.
  </p>

  <p><span class="rfc2119-assertion" id="td-action-arrays">
    The value assigned to <code>forms</code> in an instance of <code>ActionAffordance</code>
    MUST be serialized as a JSON array
    containing one or more JSON object serializations as defined in <a href="#form-serialization-json"></a>.
  </span></p>

  <p>
  A TD snippet of an Action affordance is given below:
  </p>

<aside class="example" id="action-serialization-sample" title="Sample of an Action serialization">
<pre>
    ...
    "actions": {
        "fade": {
            "title": "Fade in/out",
            "description": "Smooth fade in and out animation.",
            "input": {
                "type": "object",
                "properties": {
                    "from": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 100
                    },
                    "to": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 100
                    },
                    "duration": {"type": "number"}
                },
                "required": ["to","duration"]
            },
            "output": {"type": "string"},
            "forms": [...]
        }
    },
    ...
</pre>
</aside>
 

</section> <!-- end of id="action-serialization-json"-->

<section id="event-serialization-json">
<h3><code>events</code></h3>

  <p>
    In a <code>Thing</code> instance, the value assigned to <code>events</code>
    is a map of instances of <code>EventAffordance</code>.
    <span class="rfc2119-assertion" id="td-events">
    All name-value pairs of a <a>Map</a> of <code>EventAffordance</code> instances
    MUST be serialized as members of the JSON object that results from serializing the <a>Map</a>;
    the name of a pair MUST be serialized as a JSON string and the value of the pair, an
    instance of <code>EventAffordance</code>, MUST be serialized as a JSON object.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-event-names">
    All name-value pairs of an instance of <code>EventAffordance</code>,
    where the name is a <a>Vocabulary Term</a> included in (one of) the <a>Signatures</a> of
    <code>EventAffordance</code> or <code>InteractionAffordance</code>,
    MUST be serialized as members of the JSON object that results from
    serializing the <code>EventAffordance</code> instance, with the
    <a>Vocabulary Term</a> as name.
  </span></p>

  <p>
  <span class="rfc2119-assertion" id="td-event-objects">
    The values assigned to <code>subscription</code>,
    <code>data</code>, and <code>cancellation</code>
    in an instance of <code>EventAffordance</code>
    MUST be serialized as JSON objects.
  </span>
  They rely on the <a>Class</a> <a href="#dataschema" class="sec-ref"><code>DataSchema</code></a>,
  whose serialization is defined in <a href="#data-schema-serialization-json"></a>.
  </p>

  <p><span class="rfc2119-assertion" id="td-event-arrays">
  The value assigned to <code>forms</code> in an instance of <code>EventAffordance</code>
  MUST be serialized as a JSON array
  containing one or more JSON object serializations as defined in <a href="#form-serialization-json"></a>.
  </span></p>

  <p>
  A TD snippet of an Event object is given below:
  </p>

<aside class="example" id="event-serialization-sample" title="Sample of an Event serialization">
<pre>
    ...
    "events": {
        "overheated": {
            "data": {
                "type": "string"
            },
            "forms": [...]
        }
    },
    ...
</pre>
</aside>

<p>
Event affordances have been defined in a flexible manner, 
in order to adopt existing (e.g., WebSub [[websub]]) or customer-oriented event mechanisms (e.g., Webhooks).
For this reason, <code>subscription</code> and <code>cancellation</code> can be defined according to the desired mechanism. Please find further details in [[?WOT-BINDING-TEMPLATES]].
Example <a href="#webhook-example-serialization"></a> illustrates how Events can use <code>subscription</code> and <code>cancellation</code> to describe Webhooks.
</p>

</section> <!-- end of id="event-serialization-json"-->

<section id="link-serialization-json">
<h3><code>links</code></h3>

  <p><span class="rfc2119-assertion" id="td-links">
    All name-value pairs of an instance of <code>Link</code>,
    where the name is a <a>Vocabulary Term</a> included in the <a>Signature</a> of <code>Link</code>,
    MUST be serialized as members of the JSON object that results from
    serializing the <code>Link</code> instance, with the
    <a>Vocabulary Term</a> as name.
  </span></p>

  <p>It is recommended to follow the link relation values as provided in Section <a href=#link></a>.
 In the following examples are provide that uses different link relation values.</p>

 <p>A reference can be provided that points to a <a>Thing</a> (e.g., a controller) that controlls the underlying
    unit (e.g., a lamp). For this <code>controlledBy</code> can be used:</p>
 

<aside class="example" id="link-serialization-sample" title="Sample of a Link serialization">
<pre>
    ...
    "links": [{
        "rel": "controlledBy",
        "href": "https://servient.example.com/things/lampController",
        "type": "application/td+json"
    }]
    ...
</pre>
</aside>

<p>To point to a developer documentation of a <a>Thing</a> the value <code>service-doc</code> can be used:</p>

    <pre class="example" title="Link to developer documentation">
        ...
        "links": [{
            "rel": "service-doc",
            "href": "https://example.com/howTo",
            "type": "application/pdf"
        }]
        ...
    </pre>

    <p>A superordinate Thing can collect a group of Things and refer to them by using the <code>item</code> value:</p>

    <pre class="example" title="An electric drive includes two motors.">
        "title" : "Electric Drive",
        ...
        "links": [{
            "rel": "item",
            "href": "coaps://motor1.example.com",
            "type": " application/td+json"
        },
        {
            "rel": "item",
            "href": "coaps://motor2.example.com",
            "type": " application/td+json"
        }
        ]
        ...
    </pre>

    <p>A Thing refers to a group in which it is collected with the <code>collection</code> value:</p>

    <pre class="example" title="An electric motor is member of the electric drive collection.">
        "title" : "Electric Motor 1",
        "base": "coaps://motor1.example.com",
        ...
        "links": [{
            "rel": "collection",
            "href": "coaps://drive.example.com",
            "type": " application/td+json"
        }]
        ...
    </pre>





</p>

</section> <!-- end of id="link-serialization-json"-->

<section id="form-serialization-json">
<h3><code>forms</code></h3>

  <p><span class="rfc2119-assertion" id="td-forms">
    All name-value pairs of an instance of <code>Form</code>,
    where the name is a <a>Vocabulary Term</a> included in the <a>Signature</a> of <code>Form</code>,
    MUST be serialized as members of the JSON object that results from
    serializing the <code>Form</code> instance, with the
    <a>Vocabulary Term</a> as name.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-form-protocolbindings">
  If required, form objects
  MAY be supplemented with protocol-specific <a>Vocabulary Terms</a>
  identified with a prefix.
  </span>
  See also <a href="#protocol-bindings"></a>.
  </p>

  <p>A TD snippet of a form object in the <code>forms</code> array is given below:</p>

<aside class="example" id="form-serialization-sample" title="Sample of a Form serialization">
<pre>
    ...
    "forms": [{
        "op": "writeproperty",
        "href": "http://mytemp.example.com:5683/temp",
        "contentType": "application/json",
        "htv:methodName": "POST"
    }]
    ...
</pre>
</aside>

  <p>
  <code>href</code> may also carry a URI that contains dynamic variables
  such as <code>lat</code> and <code>lon</code> in <code>http://example.org/weather/?lat=35&amp;lon=139</code>.
  In that case the URI can be defined as template as defined in [[RFC6570]]:
  <code>http://example.org/weather/{?lat,long}</code>.
  </p>

  <p><span class="rfc2119-assertion" id="td-uriVariables-names">
  In such a case, the URI Template variables MUST be collected
  in the JSON-object based <code>uriVariables</code> member
  with the associated (unique) variable names as JSON names.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-uriVariables-dataschema">
  The serialization of each value in the map assigned to <code>uriVariables</code>
  in an instance of <code>Form</code> MUST
  rely on the <a>Class</a> <a href="#dataschema" class="sec-ref"><code>DataSchema</code></a>,
  whose serialization is defined in <a href="#data-schema-serialization-json"></a>.
  </span></p>

  <p>A TD snippet using a URI Template and <code>uriVariables</code> is given below:</p>

<pre class="example">
{
    "@context": [
        "http://www.w3.org/ns/td",
        { "eg": "http://www.example.org/iot#" }
    ],
    ...
    "properties": {
        "weather": {
            ...
            "uriVariables": {
                "lat": { "type": "number", "minimum": 0, "maximum": 90, "description": "Latitude for the desired location in the world" },
                "long": { "type": "number", "minimum": -180, "maximum": 180, "description": "Longitude for the desired location in the world" }
            },
            "forms": [{
              "href": "http://example.org/weather/{?lat,long}",
              "htv:methodName": "GET"
            }]
        },
        ...
    },
    ...
}
</pre>

  <p>
  The <code>contentType</code> member is used to assign a media type [[!RFC2046]]
  including media type parameters as attribute-value pairs separated by a <code>;</code> character.
  Example:
  </p>

<pre class="example">
    ...
    "contentType": "text/plain; charset=utf-8",
    ...
</pre>

  <p>
  In some use cases, the form metadata of the <a>Interaction Affordance</a> not only
  describes the request, but also provides metadata for the expected response.
  For instance, an Action <code>takePhoto</code> defines an <code>input</code> schema
  to submit parameter settings of a camera (aperture priority, timer, etc.) using
  JSON for the request payload (i.e., <code>"contentType": "application/json"</code>).
  The output of this action is the photo taken, which is available in JPEG format, for example.
  In such cases, the <code>response</code> member is used to indicate the representation format
  of the response payload (e.g., <code>"contentType": "image/jpeg"</code>).
  Here no <code>output</code> schema is required, as the content type fully specifies
  the representation format.
  </p>

  <p>
  <span class="rfc2119-assertion" id="td-form-response-object">
  If present, the value assigned to <code>response</code> in an instance of
  <code>Form</code> MUST be a JSON object.
  </span>
  <span class="rfc2119-assertion" id="td-forms-response">
  If present, the response object MUST contain a <code>contentType</code> member as
  defined in the <a>Class</a> definition of
  <a href="#expectedresponse" class="sec-ref"><code>ExpectedResponse</code></a>.
  </span>
  </p>

  <p>
  A <code>form</code> snippet with the <code>response</code> member is shown
  below based on the <code>takePhoto</code> Action described above:
  </p>

<pre class="example">
{
    ...
    "actions": {
        "takePhoto": {
            ...
            "forms": [{
                "op": "invokeaction",
                "href": "http://camera.example.com/api/snapshot",
                "contentType": "application/json",
                "response": {
                    "contentType": "image/jpeg"
                }
            }]
        }
    },
    ...
}
</pre>

<p>
In some cases binary data is embedded in text-based values, e.g., a JSON string-based value embedds a base64 encoded image.
The terms <code>contentMediaType</code> and <code>contentEncoding</code> can be used to clearify the context and encoding 
format of such name-value pairs. A sample usage of <code>contentMediaType</code> and <code>contentEncoding</code>
is shown below:
</p>

<pre class="example">
{
    ...
    "properties": {
        "image": { 
	        "description": "Provides latest image", 
	        "type": "string",
	        "contentMediaType": "image/png",
	        "contentEncoding": "base64",
	        "forms": [{ 
			    "op": "readproperty", 
			    "href": "coaps://mylamp.example.com/lastPicture", 
			    "cov:methodName": "GET",
                "contentType": "application/json" 
		    }] 
        }
    },
    ...
}
</pre>

  <p>
  When <code>forms</code> is present at the top level, it can be used to describe meta interactions offered by a <a>Thing</a>.
  For example, the operation types "readallproperties" and "writeallproperties" are for meta
  interactions with a <a>Thing</a> by which <a>Consumers</a> can read and write all properties at once.
  In the example below, a <code>forms</code> member is included in the TD root object
  and the <a>Consumer</a> can use the submission target
  <code>https://mylamp.example.com/allproperties</code> both to read or write all
  Properties (i.e., <code>on</code>, <code>brightness</code>, and <code>timer</code>)
  of the <a>Thing</a> in a single protocol transaction.
  </p>

<pre class="example" id="td-forms-readall-example">
{
    ...
    "properties": {
        "on": {
            "type": "boolean",
            "forms": [...]
        },
        "brightness": {
            "type": "number",
            "forms": [...]
        },
        "timer": {
            "type": "integer",
            "forms": [...]
        }
    },
    ...
    "forms": [{
        "op": "readallproperties",
        "href": "https://mylamp.example.com/allproperties",
        "contentType": "application/json",
        "htv:methodName": "GET"
    }, {
        "op": "writeallproperties",
        "href": "https://mylamp.example.com/allproperties",
        "contentType": "application/json",
        "htv:methodName": "PUT"
    }]
}
</pre>

<p>
In the case of operation type <code>writeallproperties</code>, it is expected that the <a>Consumer</a> provides all writable (non <code>readOnly</code>) properties and the (new) assigned values (e.g., within payload).
Similarly, for the <code>writemultipleproperties</code> operation type, it is expected that the <a>Consumer</a> provides writable (non <code>readOnly</code>) properties.
On the <a>Thing</a> side, <a>Thing</a> is expected to return readable (non <code>writeOnly</code>) properties in the case of <code>readmultipleproperties</code> and <code>readallproperties</code> operation types.
</p>

</section> <!-- end of id="form-serialization-json"-->

<section id="data-schema-serialization-json">
<h3>Data Schemas</h3>

  <p>
  The data schemas of the WoT Thing Description defined through the
  <a href="#dataschema" class="sec-ref"><code>DataSchema</code></a> <a>Class</a>
  are based on a subset of the JSON Schema terms [[?JSON-SCHEMA]].
  Thus, serializations of the TD data schemas can be fed directly into JSON Schema
  validator implementations to validate the data exchanged with <a>Things</a>.
  </p>

  <p>
  Data schema serialization applies to <code>PropertyAffordance</code> instances,
  the values assigned to <code>input</code> and <code>output</code> in
  <code>ActionAffordance</code> instances,
  the values assigned to <code>subscription</code>, <code>data</code>, and <code>cancellation</code> in
  <code>EventAffordance</code> instances,
  and the value assigned to <code>uriVariables</code> in instances of <a>Subclasses</a> of <code>InteractionAffordance</code>
  (when a <a href="#form-serialization-json">form object</a> uses a URI Template).
  </p>

  <p><span class="rfc2119-assertion" id="td-data-schema">
    All name-value pairs of an instance of one of the <a>Subclasses</a> of
    <code>DataSchema</code>, where the name is a <a>Vocabulary Term</a> included in the
    <a>Signature</a> of that <a>Subclass</a> or in the <a>Signature</a> of
    <code>DataSchema</code>, MUST be serialized as members of the JSON object
    that results from serializing the <code>DataSchema</code> <a>Subclass</a>'s
    instance, with the <a>Vocabulary Term</a> as name.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-data-schema-objects">
  The value assigned to <code>properties</code> in an instance of
  <code>ObjectSchema</code> MUST be serialized as a JSON object.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-data-schema-arrays">
  The values assigned to <code>enum</code>,
  <code>required</code>,
  and <code>oneOf</code> in an instance of <code>DataSchema</code>
  MUST be serialized as a JSON array.
  </span></p>

  <p><span class="rfc2119-assertion" id="td-data-schema-objects-arrays">
  The value assigned to <code>items</code> in an instance of
  <code>ArraySchema</code> MUST be serialized as a JSON object or a JSON array containing JSON objects.
  </span></p>

  <p>
  A TD snippet data schema members is given below.
  Note that the surrounding object may be a data schema object
  (e.g., for <code>input</code> and <code>output</code>)
  or a Property object, which would contain additional members.
  </p>

<aside class="example" id="dataschema-serialization-sample" title="Sample of a DataSchema serialization">
<pre>
    ...
    "type": "object",
    "properties": {
        "status": {
            "title": "Status",
            "type": "string",
            "enum": ["On", "Off", "Error"]
        },
        "brightness": {
            "title": "Brightness value",
            "type": "number",
            "minimum": 0.0,
            "maximum": 100.0
        },
        "rgb": {
            "title": "RGB color value",
            "type": "array",
            "items": {
                "type": "number",
                "minimum": 0,
                "maximum": 255
            },
            "minItems": 3,
            "maxItems": 3
        }
    },
    ...
</pre>
</aside>

  <p>
  The terms <code>readOnly</code> and <code>writeOnly</code> can be used signal
  which data items are exchanged in read interactions (i.e., when reading a Property)
  and which in write interactions (i.e., when writing a Property).
  This can be used as workaround when Properties of an unconventional <a>Thing</a>
  exhibit different data for reading and writing, which can be the case when
  augmenting an existing device or service with a Thing Description.
  </p>

  <p>A TD snippet with the usage of <code>readOnly</code> and <code>writeOnly</code> is given below:</p>

<pre class="example">
    ...
    "properties": {
        "status": {
            "description": "Read or write On/Off status.",
            "type": "object",
            "properties": {
                "latestStatus": {
                    "type": "string",
                    "enum": ["On", "Off"],
                    "readOnly": true
                },
                "newStatusValue": {
                    "type": "string",
                    "enum": ["On", "Off"],
                    "writeOnly": true
                }
            },
            forms: [...]
        }
    }
    ...
</pre>

  <p>
  When the <code>status</code> Property is read,
  the status data is returned using a <code>latestStatus</code> member in the payload.
  To update the <code>status</code> Property,
  the new value must be provided through a <code>newStatusValue</code> member in the payload.
  </p>

  <p>
  As an additional feature,
  a Thing Description instance allows the usage of a <code>unit</code> member within data schemas.
  This can be used to associate a unit of measure to a data item.
  Its string value can be selected freely. However, it is recommended to select units defined in
  well-known <a>Vocabularies</a>. See <a href="#sec-context-extensions"></a> for an example.
</p>

</section> <!-- end of id="data-schema-serialization-json"-->

</section> <!-- end of id="serialization-json"-->

<section>
<h2>Identification</h2>

  <p>
  The JSON-based serialization of Thing Descriptions is identified by 
  the media type <code>application/td+json</code> or the
  CoAP Content-Format ID <code>432</code> (see <a href="#iana-section"></a>).
  </p>

</section>

<section id="canonicalization-serialization-json">
<h2>Canonicalization</h2>

  <p>
  Canonicalization is a process applied to the JSON serialization of a TD that
  removes variations between different expressions of the same information model,
  so that the same information always results in the same JSON serialization.
  This unique representation of the information in a TD is called a <a>Canonical TD</a>.
  Canonical TDs are important for applications that need to compare TDs as strings,
  for example, to compute signatures on TDs, or to compute differences between TDs.
  There are many places in which optional features are included in JSON,
  such as white space, or where different representation formats are possible, such as
  the number of digits in a number representation or the order of elements in an object.
  In addition to variation due to JSON serialization, 
  TDs have additional features that also permit different ways to express the
  same thing.
  However, whenever there is a choice of multiple ways to present information,
  canonicalization needs to select only one. 
  </p><p>
  Some of the choices leading to the efficient computation of a canonical form, 
  such as the suppression of white space and sorting of elements in objects 
  do make the representation less human readable.
  In general, the canonical form presented here is optimized for machine-to-machine
  use cases such as signing.
  </p>
  <p>The starting point for the process described here is 
  the JSON serialization of a TD.  
  The following sequence of transformations and constraints are then applied: 
  <ol>
  <li><span class="rfc2119-assertion" id="canonical-datetime">
  In the <a>Canonical TD</a>, 
  values that are of type <code>dateTime</code>
  MUST use the literal <code>Z</code> 
  representing the UTC time zone instead 
  of an offset.
  </li>
  <li><span class="rfc2119-assertion" id="canonical-defaults">
  In the <a>Canonical TD</a>,
  all required elements MUST be given explicitly, even if they have defaults
  and are assigned their default value.
  </span>
  For example, the default value of <code>observable</code>
  is <code>false</code>.  
  If an input TD omits <code>observable</code> where it is allowed,
  it must still explictly appear in the canonical form with the value of <code>false</code>.
  Note that this also applies to extension vocabularies, e.g. for protocol bindings.
  If any such extension defines default values they must be given explicitly in the canonical form.
  </li>
  <li><span class="rfc2119-assertion" id="canonical-singleton-arrays">
  In the <a>Canonical TD</a>,
  all values that can be expressed as either an array or as a single value 
  MUST be written as a single value if there is only one element.  
  </span>
  In other words, square brackets around
  arrays of single elements must be removed.
  </li>
  <li><span class="rfc2119-assertion" id="canonical-json">
  In the <a>Canonical TD</a>,
  all provisions of the JSON Canonicalization Scheme [[!RFC8785]] MUST be applied.
  </span>
  The JSON Canonicalization Scheme [[!RFC8785]], among other transformations,
  sorts object members by name, removes white space, and normalizes number representations.</li>
  </ol>
  Note that the JSON Canonicalization Scheme, and by extension the process defined here,
  preserves the order of elements in arrays.
  There are some array-valued elements in TDs where the order is not meaningful, such
  as the list of <code>scopes</code> in a <code>Form</code>.  
  <span class="rfc2119-assertion" id="processors-preserve-array-order">
  In order to support canonicalization, implementations 
  of TD Processors MUST preserve the order of elements in all arrays.</span>
  </p><p>
  If extension vocabularies are used, the prefixes need to be preserved
  as well.
  In theory for JSON-LD prefixes are just shorthand for URLs and can be changed without
  changing the meaning of a TD.
  However, doing so would result in a different serialization
  and would invalidate signatures.
  <span class="rfc2119-assertion" id="processors-preserve-prefixes">
  In order to support canonicalization, implementations 
  of TD Processors MUST preserve the prefixes used for extension vocabularies.</span>
  This includes preserving and expressing a vocabulary term as a URL if no prefix was used.
  </p><p>
  Some systems support different forms of URLs that are equivalent, for example,
  by mapping upper to lower case.  It is also legal to percent-encode
  unreserved characters, even though this is unnecessary and discouraged [[!RFC3986]]. 
  For canonicalization, however, such URL variants cannot be considered equivalent.
  <span class="rfc2119-assertion" id="processors-preserve-prefixes">
  In order to support canonicalization, implementations 
  of TD Processors MUST NOT modify input URLs.</span>
  Of course some applications will need to modify URLs in TDs, 
  i.e. to express the result of protocol translation
  or to add entry points to a proxy.
  The result should technically be considered a new TD related to the old one, but not equivalent.
  </p><p>
  TDs should be validated before being canonicalized.  
  TD validation requires that URLs
  be fully confomant with the standard [[!RFC3986]] and this in particular 
  requires (for example) that
  characters outside the basic set defined for URLs 
  be percent-encoded. 
  </p><p>
  Here is an example TD that is in canonical form, except that white space
  and newlines have been inserted to make it more readable:
<aside class="example" id="canonical-thing-description-sample" title="Canonical Thing Description Example - White Space Inserted">
<pre>{
    "@context": "http://www.w3.org/ns/td",
    "id": "urn:dev:ops:32473-WoTLamp-1234",
    "properties": {
        "status": {
            "forms": [
                {
                    "href": "https://mylamp.example.com/status",
                    "htv:methodName": "GET",
                    "op": "readproperty"
                },
                {
                    "href": "https://mylamp.example.com/status",
                    "htv:methodName": "PUT",
                    "op": "writeproperty"
                }
            ],
            "observable": false,
            "readOnly": false,
            "type": "string",
            "writeOnly": false
        }
    },
    "security": "basic_sc",
    "securityDefinitions": {
        "basic_sc": {
            "in": "header",
            "scheme": "basic"
        }
    },
    "title": "MyLampThing"
}</pre>
</aside>

However, the actual true <a>Canonical TD</a> has all extra whitespace removed, and looks like the following:
<aside class="example" id="canonical-thing-description-nows" title="Canonical Thing Description Example - No White Space">
<pre>{"@context":"http://www.w3.org/ns/td","id":"urn:dev:ops:32473-WoTLamp-1234","properties":{"status":{"forms":[{"href":"https://mylamp.example.com/status","htv:methodName":"GET","op":"readproperty"},{"href":"https://mylamp.example.com/status","htv:methodName":"PUT","op":"writeproperty"}],"observable":false,"readOnly":false,"type":"string","writeOnly":false}},"security":"basic_sc","securityDefinitions":{"basic_sc":{"in":"header","scheme":"basic"}},"title":"MyLampThing"}</pre>
</aside>

</section>
</section> <!-- end of id="sec-td-serialization"-->

<section id="sec-context-extensions" class="informative">
<h1>TD Context Extensions</h1>

  <p>
  In addition to the standard <a>Vocabulary</a> definitions in
  <a href="#sec-vocabulary-definition"></a>,
  the WoT Thing Description offers the possibility to add context knowledge
  from additional namespaces.
  This mechanism can be used to enrich the Thing Description
  instances with additional (e.g., domain-specific) semantics.
  It can also be used to import additional <a>Protocol Bindings</a>
  or new security schemes in the future.
  </p>

  <p>
  For such <a>TD Context Extensions</a>, the Thing Descriptions use the <code>@context</code>
  mechanism known from JSON-LD [[?json-ld11]].
  When using <a>TD Context Extensions</a>,
  the value of <code>@context</code> of the <a>Class</a> <code>Thing</code>
  is an Array with additional elements of type <code>anyURI</code> identifying JSON-LD context files
  or <a>Map</a> containing namespace IRIs as defined in <a href="#thing"></a>.
  </p>

  <p>
    The serialization rules for complex types in <a href="#td-basic-types-mapping"></a>
    define the serialization of an extended <code>@context</code> name-value pair.
    A snippet with <a>TD Context Extensions</a> is given below:
  </p>

<pre class="example">
{
    "@context": [
        "http://www.w3.org/ns/td",
        {
            "eg": "http://example.org/iot#",
            "cov": "http://www.example.org/coap-binding#"
        },
        "https://schema.org/"
    ],
    ...
}
</pre>

<section>
<h3>Semantic Annotations</h3>

    <p>
    <a>TD Context Extensions</a> allow for additional <a>Vocabulary Terms</a> to a Thing Description instance.
    If the included namespaces are based on <a>Class</a> definitions
    such as those provided by the RDF Schema or OWL,
    they can be used to annotate any <a>Class</a> instance of a Thing Description semantically
    by associating the instance to a such an external <a>Class</a> definition.
    This is done by assigning a <a>Class</a> name to the <code>@type</code> name-value pair or
    including <a>Class</a> name in its <a>Array</a> value for multiple associations/annotations.
    Following the serialization rules in <a href="#td-basic-types-mapping"></a>,
    <code>@type</code> is either serialized as JSON string or as JSON array.
    <code>@type</code> is the JSON-LD keyword [[?json-ld11]] used to set the type of a node.
    </p>

    <p>
    <a>TD Context Extensions</a> also allow the inclusion of additional name-value pairs
    and well-defined values within any <a>Class</a> instance of a Thing Description.
    These pairs and values are defined through the included <a>Vocabulary Terms</a>
    and are serialized as additional members in the corresponding JSON objects
    or values of existing members, respectively.
    Examples are additional version metadata for the <a>Thing</a>
    or units of measure for data items.
    </p>

    <p>
    Next subsections show some sample usage of different kind of ontologies in Thing Descriptions.
    </p>

    <section id="semantic-annotations-example-version-units">
    <h3>Example I: Version and Unit Annotations</h3>

    <p>
      The TD snippet given below extends the version information container
      by adding version numbers for the hardware and firmware of the <a>Thing</a>, and uses
      values from external <a>Vocabularies</a> for the <a>Thing</a> and for the
      data schema unit: <a href="https://w3id.org/saref">SAREF</a>,
      also used in <a href="#thing-description-full-serialization"></a>, and 
      <a href="http://www.ontology-of-units-of-measure.org/resource/om-2/">OM</a>, the
      Ontology of Units of Measure [[?RIJGERSBERG]]. These <a>Vocabularies</a>
      are used as examples—others may exist, in particular in the home automation domain.
    </p>

<pre class="example">
{
    "@context": [
        "http://www.w3.org/ns/td",
        {
            "v": "http://www.example.org/versioningTerms#",
            "saref": "https://w3id.org/saref#",
            "om": "http://www.ontology-of-units-of-measure.org/resource/om-2/"
        }
    ],
    "version": {
        "instance": "1.2.1",
        "v:firmware": "0.9.1",
        "v:hardware": "1.0"
    },
    ...
    "@type": "saref:TemperatureSensor",
    "properties": {
        "temperature": {
            "description": "Temperature value of the weather station",
            "type": "number",
            "minimum": -32.5,
            "maximum": 55.2,
            "unit": "om:degree_Celsius",
            "forms": [...]
        },
        ...
    },
    ...
}
</pre>

</section>
<section id="semantic-annotations-example-state">
    <h3>Example II: State Annotations</h3>

    <p>
        In many cases, <a>TD Context Extensions</a> may be used to annotate pieces of a data schema,
        to be able to semantically process the state information of the physical world object,
        which is represented by the data exchanged during an interaction (e.g., in the payload of a response).
        For example, a semantic description of this state information in RDF
        can be embedded in the <a>TD Document</a> and pieces of a data schema can be individually annotated
        as referring to specific parts of that RDF-modeled state of the physical world object.
    </p>

    <p>
        The TD snippet below uses SAREF to describe the state of a lamp. The external <a>Vocabulary
        Term</a> <code>ssn:forProperty</code>, taken from <a href="https://www.w3.org/TR/vocab-ssn/">SSN</a>,
        the Semantic Sensor Network Ontology [[VOCAB-SSN]], is being used to link the data schema of
        the <code>status</code> <a>Property</a> with the actual on/off state of the physical
        world object.
    </p>

<pre class="example" id="saref-state-annotation-example">
{
    "@context": [
        "http://www.w3.org/ns/td",
        {
            "saref": "https://w3id.org/saref#",
            "ssn": "http://www.w3.org/ns/ssn/"
        }
    ],
    "id": "urn:dev:ops:32473-WoTLamp-1234",
    "@type": "saref:LightSwitch",
    "saref:hasState": {
        "@id": "urn:dev:ops:32473-WoTLamp-1234/state",
        "@type": "saref:OnOffState"
    },
    ...
    "properties": {
        "status": {
            "ssn:forProperty": "urn:dev:ops:32473-WoTLamp-1234/state",
            "type": "string",
            "forms": [{"href": "https://mylamp.example.com/status"}]
        },
        "fullStatus": {
            "ssn:forProperty": "urn:dev:ops:32473-WoTLamp-1234/state",
            "type": "object",
            "properties": {
                "statusString": { "type": "string" },
                "statusCode": { "type": "number" },
                "statusDescription": { "type": "string" }
            },
            "forms": [{"href": "https://mylamp.example.com/status?full=true"}]
        },
        ...
    },
    ...
}
</pre>

    <p>
        In <a href="#thing-description-full-serialization"></a>, the state of the <a>Thing</a>
        is given by the <code>status</code> affordance itself
        and possible state changes are given by the <code>toggle</code> affordance.
        In other words, the state of the physical world object directly provides the
        <a>Interaction Affordances</a> of the <a>Thing</a>. This design is satisfactory for
        simple cases. In more elaborate cases, however, several affordances may be available
        for the same physical state. In the example above, the <code>fullStatus</code>
        <a>Property</a> provides an alternative, more verbose representation for the state
        of the lamp.
    </p>

</section>
<section id="semantic-annotations-example-geoloc">
    <h3>Example III: Geolocation Annotations</h3>

    <p class="issue">
        This new subsection is in work in progress. Examples will be updated based on experience
        of the next PlugFests.
    </p>


    <p>
    For many use cases like in building, agriculture, or smart city location based data is required. This
    information can be provided in the Thing Description in different ways and can be relied on
    different kind of location ontologies (e.g.,[[w3c-basic-geo]], schema.org) depending on purpose (e.g., indoor, outdoor).  
    Also see [[sdw-bp]].
    </p>
    
    <p>
        The TD snippet below uses <code>lat</code> and <code>long</code> from the [[w3c-basic-geo]] ontology to 
        provide static latitude and longitude metadata at Thing's top level. 
    </p>

    <pre class="example" id="saref-geolocation-annotation-example">
{
    "@context": [
        "http://www.w3.org/ns/td",
        {
            "geo": "http://www.w3.org/2003/01/geo/wgs84_pos#"        
        }
    ],
    "@type": "Thing",
    "geo:lat": "26.58",
    "geo:long": "297.83",
    ...
    "properties": {
        ...
    
}
</pre>


<p>
        In some use cases location based metadata have to be provided at the interaction level, e.g., 
        as provided as a <a>Property</a> that returns the latest <code>longitude</code>, <code>latitude</code>, and <code>elevation</code> values
        based on schema.org:
</p>

<pre class="example" id="saref-geolocation-annotation-example-2">
{
    "@context": [
        "http://www.w3.org/ns/td",
        {
            "schema": "http://schema.org#"
        }
    ],
    ...
    "properties": {
        "position": {
            "type": "object",
            "@type": "schema:GeoCoordinates",
            "properties": {
                    "longitude": { "type": "number" },
                    "latitude":  { "type": "number" },
                    "elevation": { "type": "number" }
            },
            "forms": [{"href": "https://robot.example.com/position"}]
        },
        ...
    },
    ...
}
</pre>

<p>
        In case a different name is desired for, e.g., <code>longitude</code>, <code>latitude</code>, 
        and <code>elevation</code> in the data model, the <code>jsonld:context</code> can be used to link 
        terms to specific vocabulary from an ontology (also see [[JSON-SCHEMA-ONTOLOGY]], Section 3.3 Defining a JSON-LD context for data instances):
</p>

<pre class="example" id="saref-geolocation-annotation-example-3">
{
    "@context": "http://www.w3.org/ns/td",
        {
            "schema": "http://schema.org#"
        }
    ...
    "properties": {
        "position": {
        "jsonld:context": {
            "schema": "http://schema.org/"
            "long": "schema:longitude",
            "lat": "schema:latitude",
            "height": "schema:elevation"
        },
        "type": "object",
        "properties": {
            "long": { "type": "number" },
            "lat": { "type": "number" },
            "height": { "type": "number" }
        }
        }
  },
    ...
}
</pre>

</section>
</section>

<section>
<h3>Adding Protocol Bindings</h3>

  <p>
  With the <a>TD Context Extensions</a> in a Thing Description,
  the communication metadata can be supplemented or new <a>Protocol Bindings</a> added
  through additional <a>Vocabulary Terms</a> serialized into JSON objects representing a <code>Form</code> instance.
  (see also <a href="#protocol-bindings"></a>).
  </p>
    
  <p>
  The following TD example uses a fictional CoAP <a>Protocol Binding</a>,
  as no such <a>Protocol Binding</a> is available at the time of writing this specification.
  This <a>TD Context Extension</a> assumes that there is a <em>CoAP in RDF vocabulary</em> similar to <em>HTTP Vocabulary in RDF 1.0</em> [[?HTTP-in-RDF10]]
  that is accessible via an example namespace <code>http://www.example.org/coap-binding#</code>.
  The supplemented <code>cov:methodName</code> member instructs the <a>Consumer</a>
  which CoAP method has to be applied
  (e.g., <code>GET</code> for the CoAP Method Code 0.01,
  <code>POST</code> for the CoAP Method Code 0.02,
  or <code>iPATCH</code> for CoAP Method Code 0.07).
  </p>
    
<aside class="example" id="context-extension-for-forms" title="Specialization of forms through TD Context Extension">
<pre>
{
    "@context": [
        "http://www.w3.org/ns/td",
        { "cov": "http://www.example.org/coap-binding#" }
    ],
    ...
    "properties": {
        "brightness": {
            "description": "The current brightness setting",
            "type": "integer",
            "minimum": -64,
            "maximum": 64,
            "forms": [{
                "op": "readproperty",
                "href": "coap://example.org:61616/api/brightness",
                "cov:methodName": "GET"
            }, {
                "op": "writeproperty",
                "href": "coap://example.org:61616/api/brightness",
                "cov:methodName": "POST"
            }]
        },
        ...
    },
    ...
}
</pre>
</aside>
    
</section>
    
<section>
<h2>Adding Security Schemes</h2>
    
  <p>
  Finally, new security schemes that are not included in <a href="#sec-security-vocabulary-definition"></a>
  can be imported using the <a>TD Context Extension</a> mechanism.
  This example uses a fictional ACE security scheme
  based on [[?ACE]] that is, for this example,
  defined by the namespace at <code>http://www.example.org/ace-security#</code>.
  Note that such additional security schemes must be <a>Subclasses</a> of the
  <a>Class</a> <a href="#securityscheme" class="sec-ref"><code>SecurityScheme</code></a>.
  </p>
    
<pre class="example">
{
    @context: [
        "http://www.w3.org/ns/td",
        {
            "cov": "http://www.example.org/coap-binding#",
            "ace": "http://www.example.org/ace-security#"
        }
    ],
    ...
    "securityDefinitions": {
        "ace_sc": {
            "scheme": "ace:ACESecurityScheme",
            ...
            "ace:as": "coaps://as.example.com/token",
            "ace:audience": "coaps://rs.example.com",
            "ace:scopes": ["limited", "special"],
            "ace:cnonce": true
        }
    },
    "security": ["ace_sc"],
    "properties": {
        "status": {
            ...
            "forms": [{
                "op": "readproperty",
                "href": "coaps://rs.example.com/status",
                "contentType": "application/cbor",
                "cov:methodName": "GET",
                "ace:scopes": ["limited"]
            }]
        }
    },
    "actions": {
        "configure": {
            ...
            "forms": [{
                "op": "invokeaction",
                "href": "coaps://rs.example.com/configure",
                "contentType": "application/cbor",
                "cov:methodName": "POST",
                "ace:scopes": ["special"]
            }]
        }
    },
    ...
}
</pre>

  <p>
  Note that all security schemes defined in <a href="#sec-security-vocabulary-definition"></a>
  are already part of the TD context and need not to be included through a <a>TD Context Extension</a>.
  </p>
    
</section>
</section>

<section id="behavior" class="normative">
<h2>Behavioral Assertions</h2>
 <p>
 The following assertions relate to the behavior of components of a 
 WoT system, as opposed to the representation or information model of the TD. 
 However, note that TDs are descriptive, and may in particular be used to
 describe pre-existing network interfaces. In these cases, assertions cannot
 be made that constrain the behavior of such pre-existing interfaces.  Instead,
 the assertions must be interpreted as constraints on the TD to accurately
 represent such interfaces. 
 </p> 
<section id="behavior-security">
<h3>Security Configurations</h3>
 <p>
 To enable secure interoperation, 
 security configurations must accurately reflect the requirements of the <a>Thing</a>:
<ul>
<li>
 <span class="rfc2119-assertion" id="td-security-binding">
 If a <a>Thing</a> requires a specific access mechanism for an interaction, that
 mechanism MUST be specified in the security configuration of the Thing Description.
 </span>  
</li>
<li>
 <span class="rfc2119-assertion" id="td-security-no-extras">
 If a <a>Thing</a> does not require a specific access mechanism for an interaction, that
 mechanism MUST NOT be specified in the security configuration of the Thing Description.
 </span>  
</li>
</ul>
 Some security protocols may ask for authentication 
 information dynamically, including required encoding or encryption schemes. 
 One consequence of the above is that if a protocol asks for
 a form of security credentials or an encoding or encryption scheme 
 not declared in the Thing Description 
 then the Thing Description is to be considered invalid.
 </p>
</section> <!-- end of id="behavior-security"-->
<section id="behavior-data">
<h3>Data Schemas</h3>
<p>The data schemas provided in the TD should accurately represent the 
data payloads returned and accepted by the described <a>Thing</a>
in the interactions specified in the TD.  In general, <a>Consumers</a> should
follow the data schemas strictly, not generating anything not given
in the WoT Thing Description, but should accept additional data from
the <a>Thing</a> not given explicitly in the WoT Thing Description.  In general, <a>Things</a> are <em>described</em> by WoT Thing Descriptions,
but <a>Consumers</a> are <em>constrained</em> to follow WoT Thing Descriptions when
interacting with <a>Things</a>.
<ul>
<li>
<span class="rfc2119-assertion" 
      id="client-data-schema">
A <a>Thing</a> acting as a <a>Consumer</a> when interacting with another target <a>Thing</a>
described in a WoT Thing Description MUST generate data  
organized according to the data schemas given in the corresponding
interactions.
</span>
</li>
<li>
<span class="rfc2119-assertion" 
      id="server-data-schema">
A WoT Thing Description MUST accurately describe the 
data returned and accepted by each interaction.
</span>
</li>
<li>
<span class="rfc2119-assertion" 
      id="server-data-schema-extras">
A <a>Thing</a> MAY return additional data from an interaction
even when such data is 
not described in the data schemas given in its WoT Thing Description.
</span>
This applies to <code>ObjectSchema</code> and <code>ArraySchema</code> (when <code>items</code> is an Array of
<code>DataSchema</code>) where there can be additional properties or items in the data returned. This behaves as if
<code>"additionalProperties":true</code> or <code>"additionalItems":true</code> as defined in [[?JSON-SCHEMA]].
</li>
<li>
<span class="rfc2119-assertion" 
      id="client-data-schema-accept-extras">
A <a>Thing</a> acting as a <a>Consumer</a> when interacting with another <a>Thing</a> MUST accept without
error any additional data  
not described in the data schemas given in the Thing Description of the target <a>Thing</a>.
</span>
This applies to <code>ObjectSchema</code> and <code>ArraySchema</code> (when <code>items</code> is an Array of
<code>DataSchema</code>) where there can be additional properties or items in the data returned. This behaves as if
<code>"additionalProperties":true</code> or <code>"additionalItems":true</code> as defined in [[?JSON-SCHEMA]].
</li>
<li>
<span class="rfc2119-assertion" 
      id="client-data-schema-no-extras">
A <a>Thing</a> acting as a <a>Consumer</a> when interacting with another <a>Thing</a> MUST NOT generate data
not described in the data schemas given in the Thing Description of that <a>Thing</a>.
</span>
</li>
<li>
<span class="rfc2119-assertion" 
      id="client-uri-template">
A <a>Thing</a> acting as a <a>Consumer</a> when interacting with another <a>Thing</a> MUST generate URIs
according to the URI Templates, base URIs, and form href parameters
given in the Thing Description of the target <a>Thing</a>.
</span>
</li>
<li>
<span class="rfc2119-assertion" 
      id="server-uri-template">
URI Templates, base URIs, and href members
in a WoT Thing Description MUST accurately describe the <a>WoT Interface</a> of the <a>Thing</a>.
</span>
</li>
</ul>
</p>
</section> <!-- end of id="behavior-data"-->

<section id="protocol-bindings">
  <h3>Protocol Bindings</h3>

  <p>
    A <a>Protocol Binding</a> is the mapping from an <a>Interaction Affordance</a> to concrete messages of a
    specific protocol such as HTTP [[?RFC7231]], CoAP [[?RFC7252]], or MQTT [[?MQTT]]. <a>Protocol Bindings</a> of
    <a>Interaction Affordances</a> are serialized as <code>forms</code> as defined in <a href="#form-serialization-json"></a>.
  </p>

  <p>
    Every form in a WoT Thing Description must have a submission target,
    given by the <code>href</code> member. The URI scheme of this
    submission target indicates what <a>Protocol Binding</a> the <a>Thing</a> implements
    [[?WOT-ARCHITECTURE]].
    For instance, if the target starts with <code>http</code> or
    <code>https</code>, a <a>Consumer</a> can then infer the <a>Thing</a> implements the
    <a>Protocol Binding</a> based on HTTP and it should expect HTTP-specific terms in the
    form instance (see next section, <a href="#http-binding-assertions"></a>).
    <ul>
        <li>
            <span class="rfc2119-assertion" id="bindings-requirements-scheme">
                Every form in a WoT Thing Description MUST follow the requirements
                of the <a>Protocol Binding</a> indicated by the URI scheme of its
                <code>href</code> member.
            </span>
        </li>
        <li>
            <span class="rfc2119-assertion" id="bindings-server-accept">
                Every form in a WoT Thing Description MUST accurately describe requests
                (including request headers, if present) accepted by the <a>Thing</a> in an
                interaction.
            </span>
        </li>
    </ul>
  </p>

  <section id="http-binding-assertions">
    <h4>Protocol Binding based on HTTP</h4>

    <p>
        Per default the Thing Description supports the <a>Protocol Binding</a> based on HTTP 
        by including the HTTP RDF vocabulary definitions from <em>HTTP Vocabulary in RDF 1.0</em> [[?HTTP-in-RDF10]].
        This vocabulary can be 
        directly used within TD instances by the usage of the prefix <code>htv</code>, which 
        points to <code>http://www.w3.org/2011/http#</code>. 
        Further details of <a>Protocol Binding</a> based on HTTP can be found in [[?WOT-BINDING-TEMPLATES]].
    </p>
    <p>
        To interact with a <a>Thing</a> that implements the <a>Protocol Binding</a> based on HTTP, a <a>Consumer</a>
        needs to know what HTTP method to use when submitting a form. In the general case,
        a Thing Description can explicitly include a term indicating the method, i.e.,
        <code>htv:methodName</code>. For the
        sake of conciseness, the <a>Protocol Binding</a> based on HTTP defines <a>Default Values</a> for the operation types listed below,
        which also aims at convergence of the methods expected by <a>Things</a> (e.g., GET to read, PUT to write).
        <span class="rfc2119-assertion" id="td-default-http-method">
            When no method is indicated in a form representing an <a>Protocol Binding</a> based on HTTP, 
            a <a>Default Value</a> MUST be assumed as shown in
            the following table.
        </span>
    </p>

    <table class="def">
        <thead>
            <tr>
                <th><a>Vocabulary term</a></th>
                <th>Default value</th>
                <th>Context</th>
            </tr>
        </thead>
        <tbody>
            <tr class="rfc2119-default-assertion" id="td-default-http-method_get">
                <td>
                    <code>htv:methodName</code>
                </td>
                <td><code>GET</code></td>
                <td>
                    <code>Form</code> with operation type <code>readproperty</code>, <code>readallproperties</code>, <code>readmultipleproperties</code>
                </td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-http-method_put">
                <td>
                    <code>htv:methodName</code>
                </td>
                <td><code>PUT</code></td>
                <td>
                    <code>Form</code> with operation type <code>writeproperty</code>, <code>writeallproperties</code>, <code>writemultipleproperties</code>
                </td>
            </tr>
            <tr class="rfc2119-default-assertion" id="td-default-http-method_post">
                <td>
                    <code>htv:methodName</code>
                </td>
                <td><code>POST</code></td>
                <td>
                    <code>Form</code> with operation type <code>invokeaction</code>
                </td>
            </tr>
        </tbody>
    </table>

    <p>
        For example, the <a href="#simple-thing-description-sample">Example 1</a> in <a href="#introduction"></a>
        does not contain operation types and HTTP methods in the forms. 
        The following <a>Default Values</a> should be assumed for the forms in the <a href="#simple-thing-description-sample">Example 1</a>:
    </p>

    <aside class="example with-default">
            <div class="with-default-control">
                <input type="checkbox">
                <span><i>with default values for Protocol Binding based on HTTP</i></span>
            </div>
            <pre>{
    "@context": "http://www.w3.org/ns/td",
    "id": "urn:dev:ops:32473-WoTLamp-1234",
    "title": "MyLampThing",
    "securityDefinitions": {
        "basic_sc": {
            "scheme": "basic",
            "in": "header"
        }
    },
    "security": [
        "basic_sc"
    ],
    "properties": {
        "status": {
            "type": "string",
            "forms": [
                {
                    "href": "https://mylamp.example.com/status"
                }
            ]
        }
    },
    "actions": {
        "toggle": {
            "forms": [
                {
                    "href": "https://mylamp.example.com/toggle"
                }
            ]
        }
    },
    "events": {
        "overheating": {
            "data": {
                "type": "string"
            },
            "forms": [
                {
                    "href": "https://mylamp.example.com/oh",
                    "subprotocol": "longpoll"
                }
            ]
        }
    }
}</pre>
        <pre>{
    "@context": "http://www.w3.org/ns/td",
    "id": "urn:dev:ops:32473-WoTLamp-1234",
    "title": "MyLampThing",
    "securityDefinitions": {
        "basic_sc": {
            "scheme": "basic",
            "in": "header"
        }
    },
    "security": [
        "basic_sc"
    ],
    "properties": {
        "status": {
            "type": "string",
            "forms": [
                {
                    "op": "readproperty",
                    "href": "https://mylamp.example.com/status",
                    "htv:methodName": "GET"
                },
                {
                    "op": "writeproperty",
                    "href": "https://mylamp.example.com/status",
                    "htv:methodName": "PUT"
                }
            ]
        }
    },
    "actions": {
        "toggle": {
            "forms": [
                {
                    "op": "invokeaction",
                    "href": "https://mylamp.example.com/toggle",
                    "htv:methodName": "POST"
                }
            ]
        }
    },
    "events": {
        "overheating": {
            "data": {
                "type": "string"
            },
            "forms": [
                {
                    "op": "subscribeevent",
                    "href": "https://mylamp.example.com/oh",
                    "subprotocol": "longpoll"
                }
            ]
        }
    }
}</pre>
    </aside>

    <p>In the case of a <code>forms</code> entry that has multiple <code>op</code> values the usage 
        of the <code>htv:methodName</code> is not permitted. A <a>TD Processor</a> will extend
        the multiple <code>op</code> values to separate <code>forms</code> entries and associates 
        a single operation with the default assumption. The address information (e.g. <code>href</code>) and 
        other metadata are taken over in the extended version.
    </p>
    
        <aside class="example with-default">
            <div class="with-default-control">
                <input type="checkbox">
                <span><i>extended <code>forms</code> in case of multiple values in <code>op</code></i></span>
            </div>
            <pre>{
    "@context": "http://www.w3.org/ns/td",
    "id": "urn:dev:ops:32473-WoTLamp-1234",
    "title": "MyLampThing",
    "securityDefinitions": {
        "basic_sc": {
            "scheme": "basic",
            "in": "header"
        }
    },
    "security": [
        "basic_sc"
    ],
    "properties": {
        "status": {
            "type": "string",
            "forms": [
                {
                    "op" : ["readproperty", "writeproperty"],
                    "href": "https://mylamp.example.com/status"
                }
            ]
        }
    }
}</pre>
        <pre>{
    "@context": "http://www.w3.org/ns/td",
    "id": "urn:dev:ops:32473-WoTLamp-1234",
    "title": "MyLampThing",
    "securityDefinitions": {
        "basic_sc": {
            "scheme": "basic",
            "in": "header"
        }
    },
    "security": [
        "basic_sc"
    ],
    "properties": {
        "status": {
            "type": "string",
            "forms": [
                {
                    "op": "readproperty",
                    "href": "https://mylamp.example.com/status",
                    "htv:methodName": "GET"
                },
                {
                    "op": "writeproperty",
                    "href": "https://mylamp.example.com/status",
                    "htv:methodName": "PUT"
                }
            ]
        }
    }
}</pre>
    </aside>

  </section>

  <section>
      <h4>Other Protocol Bindings</h4>

      <p>
          The number of <a>Protocol Bindings</a> a <a>Thing</a> can implement
          is not restricted. Other <a>Protocol Bindings</a> (e.g., for CoAP, MQTT, or OPC UA)
          are intended to be standardized in separate documents such as a protocol <a>Vocabulary</a> similar to <em>HTTP Vocabulary in RDF 1.0</em> [[?HTTP-in-RDF10]]
          or specifications including <a>Default Value</a> definitions. Such protocols can be simply integrated into the TD by the
          usage of the <a>TD Context Extension</a> mechanism (see <a href="#sec-context-extensions"></a>).
      </p>
      <p>
          Please refer to [[?WOT-BINDING-TEMPLATES]] for information on how to describe IoT platforms and ecosystems.
      </p>
  </section>
</section>

</section> <!-- end of id="behavior"-->

<section id="sec-security-consideration" class="informative">
  <h4>Security and Privacy Considerations</h4>
  
  <p>
  In general the security measures taken to protect a WoT 
  system will depend on the threats and attackers that system
  may face and the value of the assets needs to protect.
  In addition privacy risks will depend on the association of 
  Things with identifiable people and both the direct information and 
  the inferred information available from such an association.
  A detailed discussion of security and privacy considerations for the Web of Things,
  including a threat model that can be adapted to various circumstances, is
  presented in the informative document [[WOT-SECURITY-GUIDELINES]].  
  This section discusses only security and privacy risks
  and possible mitigations directly relevant to the WoT Thing Description.
  </p>
  <p>A WoT Thing Description can describe both secure and 
  insecure network interfaces.  When a Thing Description is 
  retro-fitted to an existing network interface, no change in the 
  security status of the network interface is to be expected.
  </p>
  <p>The use of a WoT Thing Description introduces  
  the security and privacy risks given in the following sections.
  After each risk, we suggest some possible mitigations.
  </p>
  <section id="sec-security-consideration-context">
  <h5>Context Fetching Privacy Risk</h5>
      <p>Fetching the vocabulary files given in the <code>@context</code>
          member of any JSON-LD [[?json-ld11]] document can be a privacy risk.
          In the case of the WoT, an attacker can observe the network
          traffic produced by such fetches and can use the metadata
          of the fetch, such as the destination IP address,
          to infer information about the device especially if domain-specific
          vocabularies are used.  This is a risk even if the connection
          is encrypted, and is related to DNS privacy leaks.
      </p>
      <dl><dt>Mitigation:</dt><dd>
          Avoid actual fetching of vocabulary files.
          Vocabulary files should be cached whenever possible.
          Ideally they would be made immutable, built into the interpreting device,
          and not fetched at all,
          with the URI in the <code>@context</code> member serving only as 
          an identifier of the (known) vocabulary. 
          This requires the use of strict version control, as updates
          should use a new URI to ensure that existing URIs can refer to 
          immutable data.
          Use well-known standard vocabulary files whenever possible to
          improve the chances that the context file will be available locally
          to systems interpreting the metadata in a Thing Description.
      </dd></dl>
   </section>
   <section id="sec-security-consideration-id">
   <h5>Immutable Identifiers Privacy Risk</h5>
      <p>A Thing Description containing an identifier (<code>id</code>) may
         describe a Thing that is associated with an identifiable
         person.  Such identifiers pose various risks including tracking.
         However, if the identifier is also immutable, then the 
         tracking risk is amplified, since a device
         may be sold or given to another person and the known ID used to 
         track that person.
      </p>
      <dl><dt>Mitigation:</dt><dd>
          All identifiers should be mutable,
          and there should be a mechanism to update the <code>id</code>
          of a <a>Thing</a>.
          Specifically,
          the <code>id</code> of a <a>Thing</a> should not be fixed in hardware.
          This does, however, conflict with the Linked Data ideal that
          identifiers are fixed URIs.  In many circumstances it
          will be acceptable to only allow updates to identifiers if
          a <a>Thing</a> is reinitialized.  In this case as a software entity the
          old <a>Thing</a> ceases to exist and a new <a>Thing</a> is created.
          This can be sufficient to break a tracking chain when, for
          example, a device is sold to a new owner.
          Alternatively, if more frequent changes are desired during 
          the operational phase of a device,
          a mechanism can be put into place to notify only authorized users
          of the change in identifier when a change is made.
          Note however that some classes of devices, e.g., medical devices,
          may require immutable IDs by law in some jurisdictions.
          In this case extra attention should be paid to secure 
          access to files, such as Thing Descriptions, containing such
          immutable identifiers.  It may also be desirable to not share
          the "true" immutable identifier in such a case in the TD whenever possible.
          </dd></dl>
      </p>
   </section>
   <section id="sec-security-consideration-fingerprint">
   <h5>Fingerprinting Privacy Risk</h5>
      <p>As noted above, the <code>id</code> member in a TD can pose a privacy risk.  
      However, even if the <code>id</code> is updated as described to mitigate its
      tracking risk, it may still be possible to associate
      a TD with a particular physical device, and from there to an identifiable person, 
      through fingerprinting.
      </p>
      <p>Even if a specific device instance cannot be identified through fingerprinting,
      it may be possible to infer the type of a device from the information in the TD, such
      as the set of interactions, and use this type to infer private information about an
      identifiable person, such as a medical condition.
      </p>
      <dl><dt>Mitigation:</dt><dd>
          Only authorized users should be provided access
          to the Thing Description for a <a>Thing</a>, and only the amount of
          information needed for the level of authorization and the use case should be provided.
          If the TD is only distributed to authorized users 
          through secure and confidential channels, for
          example through a directory service that requires authentication,
          then external unauthorized parties will not have access to the TD to fingerprint it.
          To further mitigate this risk, information not necessary for a particular
          use case of a TD should be omitted whenever possible.  For example,
          for an ad-hoc connection to a device where the Consumer does 
          not store state about the Thing, the <code>id</code> can be omitted.
          If the Consumer does not need certain interactions for its use case, they can be omitted.
          If the Consumer is not authorized to use certain interactions, they can likewise be omitted.
          If the Consumer does not have any capability to display human-readable information
          such as titles or descriptions, they can be omitted or replaced with zero-length strings.
      </dd></dl>
   </section>
   <section id="sec-security-consideration-global-id-risk">
   <h5>Globally Unique Identifier Privacy Risk</h5>
      <p>Globally unique identifiers pose a privacy risk if a centralized authority is needed to
      create and distribute them, since then a third party has knowledge of the identifiers.
      </p>
      <dl><dt>Mitigation:</dt><dd>
          The <code>id</code> field in TDs are intentionally not required to be globally unique.
          There are several cryptographic mechanisms available to generate suitable IDs in a 
          distributed fashion that do
          not require a central registry.  These mechanisms typically have a very low probability
          of generating duplicate identifiers, and this needs to be taken into account in the system
          design; for example, by detecting duplicates and regenerating IDs when necessary.
          The scope of IDs also does not need to be global: it is acceptable to use identifiers
          that only distinguish Things in a certain context, such as within a home or factory.
      </dd></dl>
   </section>
   <section id="sec-security-consideration-TD-tampering">
   <h5>TD Interception and Tampering Security Risk</h5>
      <p>Intercepting and tampering with TDs can be used to launch man-in-the-middle attacks,
      for example by rewriting URLs in TDs to redirect accesses to a malicious 
      intermediary that can capture or manipulate data.
      </p>
      <dl><dt>Mitigation:</dt><dd>
          Obtain Thing Descriptions only through
          mutually authenticated channels.
          This ensures that the <a>Consumer</a> and the server are both sure of the
          identity of the other party to the communication.
          This is also necessary in order to deliver TDs only to authorized users.
      </dd></dl>
   </section>
   <section id="sec-security-consideration-context-tampering">
   <h5>Context Interception and Tampering Security Risk</h5>
      <p>Intercepting and tampering with context files can be used to facilitate attacks
      by modifying the interpretation of vocabulary. 
      </p>
      <dl><dt>Mitigation:</dt><dd>
	      Ideally context files would only be obtained through authenticated channels
	      but it is notable (and unfortunate) that many contexts are indicated using
	      HTTP URLs, which are vulnerable to interception and modification if 
	      dereferenced.  However, if context files are immutable and cached, 
	      and dereferencing is avoided whenever possible, then this risk can be reduced.
      </dd></dl>
   </section>
   <section id="sec-security-consideration-inferencing">
   <h5>Inferencing of Personally Identifiable Information Privacy Risk</h5>
      <p>In many locales, in order to protect the privacy of users,
      there are legal requirements for the handling of
      personally identifiable information,
      that is,
      information that can be associated with a particular person.
      Such information can of course be generated by IoT devices directly.
      However,
      the existence and metadata of IoT devices
      (the kind of data stored in a Thing Description)
      can also contain or be used to infer personally identifiable information.
      This information can be as simple as the fact that a certain person owns a certain
      type of device,
      which can lead to additional inferences about that person.
      </p>
      <dl><dt>Mitigation:</dt><dd>
          Treat a Thing Description associated with a 
	      personal device as if it contained
	      personally identifiable information.
          As an example application of this principle,
          consider how to obtain user consent.  
          Consent for usage of personally identifiable data
          generated by a <a>Thing</a> is often obtained when a <a>Thing</a> is paired with system
          consuming the data,
          which is frequently also when the Thing Description
          is registered with a local directory or the system consuming the 
          Thing Description in order to access the device.
          In this case, consent for using data from a <a>Thing</a> can be combined with
          consent for accessing the Thing Description of the <a>Thing</a>.
          As a second example, if we consider a TD to contain personally
          identifiable information, then it should not be retained indefinitely
          or used for purposes other than those for which consent was given.
      </dd></dt>
  </section>

  </section>

  <section id="thing-model" class="normative">
  <h1>Thing Model</h1>
      
  <p class="note">
    The following section has its origin in [[wot-thing-description]], Annex C. Here Thing Description 
    Template is renamed to <a>Thing Model</a>, but keeps the same intention.
    For this version of the specification, <a>Thing Model</a> and its model features (e.g., extensions, referencing, obligations, placeholder) are formal 
    introduced. For Thing Model, an own content type is under discussion. Pleace note this section is in work in progress.
  </p>

  <section id="thing-model-concept" class="normative">
    <h2>Basic Concept</h2>

    <p>
    A <em>Thing Model</em>  enables the oppertunity to define the basic information model of a <a>Thing</a>. It can be seen
    as a template for <a>Thing Descriptions</a>, however, that have less restriction as 
    driven in <a href="#sec-vocabulary-definition"></a> and <a href="#sec-td-serialization"></a>. Typically <a>Thing Model</a> examples 
    does not contain any instance-specific information such as protocol specific data like IP addresses. However, instead of having, e.g., concrete URLs, 
    <a>Thing Model</a> allows the usage of URL templates.  
    </p>

    <p>
    The figure below illustrates the relation of the <a>Thing Model</a> and <a>Thing Description</a>. A <a>Thing Model</a> mainly describes 
    interaction affordances such as the <a>Properties</a>, <a>Actions</a>, and <a>Events</a> and common metadata. This kind of template should 
    be valid and followed for all instantiated <a>Thing Descriptions</a> that are relied on this <a>Thing Model</a>. This paradigm can be compared 
    with abstract class or interface definition (~Thing Model) in object-oriented programming to create objects (~Thing Descriptions).
    </p>

  <figure id="thing-model-td">
    <img src="visualization/thing_model_td.png" alt="Thing Model and its relation to the Thing Description">
        <figcaption>
            Thing Model and its relation to the Thing Description.
        </figcaption>
    </figure>


    <p>
    The Thing Model enables:
    <ul>
    <li> onboard and manage of multiple <a>Thing</a> models, e.g., by a cloud service. </li>
    <li> simulate of devices/<a>Things</a> that have not yet been developed.</li>
    <li> develop common applications across devices from different manufacturers that share a common <a>Thing</a> model.</li>
    <li> combining multiple models into a <a>Thing</a>.
    <li> implementation support of a concrete <a>Thing</a>.
    </ul>
    </p>
    <p>
    The <a>Thing Model</a> is a logical description of the interface and possible interaction with <a>Thing</a>'s
    <a>Properties</a>, <a>Actions</a>, and <a>Events</a>, however it does not contain <a>Thing</a> instance-specific
    information, such as concrete protocol usage (e.g., IP address), or even a serial number and GPS location.
    However, Thing Models allows to include, e.g., security schemes if they apply to the entire class of instances the 
    model describes. They might have URLs (e.g., like token servers) that might need to be omitted or parameterized 
    (with templates) although in a lot of cases these might also be given. 
    </p>


    <p>
        <a>Thing Model</a> can be serialized in the same JSON-based format as a Thing Description which also allows JSON-LD processing. 
        Note that a <a>Thing Model</a> cannot be validated in the same way as <a>Thing Description</a> instances due to some missing 
        mandatory terms.
    </p>
  </section>
    <section id="thing-model-declaration" class="normative">
        <h2>Thing Model Declaration</h2>

    <p>
    A <a>Thing Model</a> is recognized by the top level <em>@type</em>.
    <span class="rfc2119-assertion" id="td-model-identification">
        <a>Thing Model</a> definitions MUST use the keyword <em>@type</em> at top level 
        and a value of type string or array that equals or respectively contains <code>ThingModel</code>.
    </span>
    </p>

    <p>
        <span class="rfc2119-assertion" id="td-model-protocol-security-restriction">
    A <a>Thing Model</a> MAY NOT contain instance specific <a>Protocol Binding</a> information such as endpoint address.
    </span>

    As consequent, <a>Thing Model</a> definitions will be also valid if there are no JSON members like <em>forms</em>, 
    <em>securityDefinitions</em>, and <em>security</em>. <a>Thing Models</a> are also valid even if these JSON members are used, however,
    the nested mandatory members like <em>href</em> are omitted.
    </p>

    <p>    
    In the following there is a sample Thing Model for a lamp without any protocol and security information.
    </p>
    
    <pre class="example" title="MyLampThingModel serialized in JSON" id="td-model-example-lamp">
    {
        "@context": ["http://www.w3.org/ns/td"], 
        "@type" : "ThingModel",
        "title": "Lamp Thing Model",
        "description": "Lamp Thing Description Model",
        "properties": {
            "status": {
                "description": "current status of the lamp (on|off)",
                "type": "string",
                "readOnly": true
            }
        },
        "actions": {
            "toggle": {
                "description": "Turn the lamp on or off"
            }
        },
        "events": {
            "overheating": {
                "description": "Lamp reaches a critical temperature (overheating)",
                "data": {"type": "string"}
            }
        }
    }
    </pre>
    </section>

    <section id="thing-model-tools" class="normative">
        <h2>Modeling Tools</h2>

        <p>In the context of <a>Thing Model</a> definitions specifics features are introduced that can be used for <a>Thing</a> modelling.</p>

    <section id="thing-model-versioning" class="normative">
        <h3>Versioning</h3>
    
    <p>
        Over time, <a>Thing Model</a> definitions may change and must be made identifiable through versioning.  
        In that case the string-based term <code>model</code> can be used within the <code>version</code> container to 
        provide a version pattern like [[SEMVER]]. The following snopped shows the usage of <code>model</code> in a
        Thing Model instance. 
    </p>

    <pre class="example" title="Thing Model versioning">
        {
            ...
            "@type" : "ThingModel",
            "title": "Lamp Thing Model",
            "description": "Lamp Thing Description Model",
            "version" : {"model" : "1.0.0" },
            ...
        }
        </pre>

        <p>
         Due to the definition of <a>Thing Model</a> the term <code>instance</code> can be omitted within the <code>version</code> container. 
        </p>

    </section>
    <section id="thing-model-extension-import" class="normative">
        <h3>Extension and Import</h3>

    <p>
     A <a>Thing Model</a> can also <code>extend</code> an existing <a>Thing Model</a>.
     <span class="rfc2119-assertion" id="td-model-extend">
        A <a>Thing Model</a> MUST use at least one <code>links</code> entry with <code>"rel":"extend"</code> 
        that targets to a <a>Thing Model</a> that is be extended.
    </span>
    The <a>Thing Model</a> will inherit all definitions from the extended <a>Thing Model</a>. There is the opportunity 
    to extend the existing definition with further metadata by providing further JSON name-value pairs from existing 
    TD information model (<a href=#sec-vocabulary-definition></a>) or using the context extension concept 
    (<a href=#sec-context-extensions></a>). A <a>Thing Model</a> can also overwrite existing defintions such as <code>title(s)</code> 
    and <code>description(s)</code>. For this there exists two limitiations: 
    <span class="rfc2119-assertion" id="td-model-overwrite-interaction">
        A <a>Thing Model</a> SHOULD NOT overwrite the JSON names defined within the  
        <code>properties</code>, <code>actions</code>, and/or <code>events</code> <a>Map</a> of the extended <a>Thing Model</a>.
    </span>
    <span class="rfc2119-assertion" id="td-model-overwrite-types">
        The value of the <code>types</code> in data schema definitions of the extended <a>Thing Model</a> SHOULD NOT change the value type.
        An exception is allowed when the extended <a>Thing Model</a> uses <code>number</code> as data schema type value, the context <a>Thing Model</a> 
        is allowed only to overwrite this value type to <code>integer</code>.
    </span>
    Those assertations preserve the semantics throughout of the extended <a>Thing Model</a>.
    </p>

    <p>
       Lets assume we have a basic model desciption as provided in the following example:
    </p>

    <pre class="example" title="Basic On/Off Thing Model Definition" id="td-model-example-basic-on-off">
        {
            "@context": ["http://www.w3.org/ns/td"], 
            "@type" : "ThingModel",
            "title": "Basic On/Off Thing Model",
            "properties": {
                "onOff": {
                    "type": "boolean"
                }
            }
        }
    </pre>

    <p>Now it is designed a new device class model called 'Smart Lamp Control' that should be used as template 
        for creating TD instances. This model will reuse the existing definition of the 'Basic On/Off Thing Model'
        and extend it with a <code>dim</code> property:
    </p>

    <pre class="example" title="Smart Lamp Control Thing Model Definition" id="td-model-example-smart-lamp-control">
        {
            "@context": ["http://www.w3.org/ns/td"], 
            "@type" : "ThingModel",
            "title": "Smart Lamp Control with Dimming",
            "links" : [{
                "rel": "extends",
                "href": "http://example.com/BasicOnOffTM",
                "type": "application/td+json"
             }],
            "properties" : {
                "dim" : {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 100
                }
           }
        }
    </pre>
    <p>
    Please note that the <code>title</code> is overwritten and will be used when TD insances are created (also see in the next subsection <a href="#thing-model-td-generation"></a>).
    </p>

    <p>
    The <code>extend</code> feature only allows to inherit all definitions of one TM. In many use cases, however,
     it is desired to import sub-definition of one or more TMs. For doing this, the <code>tm:ref</code> term is introduced
     with a JSON Pointer-based value [[rfc6901]] that allows to copy a defintion within an existing TM into a new created 
     local context definition.  
     <span class="rfc2119-assertion" id="td-model-tmRef">
        The value of <code>tm:ref</code> term MUST be a valid JSON Pointer that identifys to a pre-existing definition based on
        <a>Thing Model</a> specifications. 
    </span>
    <span class="rfc2119-assertion" id="td-model-tmRef">
        Every time <code>tm:ref</code> is used, the referenced pre-definition and its dependencies 
        (e.g., by context extension) MUST be assumed at this point.
    </span>
    </p>

    <p>
        The following example shows a new TM definition that imports the existing definition of the property 
        <code>onOff</code> from <a href="#td-model-example-basic-on-off"></a> into the new property definition 
        <code>switch</code>.
    </p>
    <pre class="example" title="Smart Lamp Control imports existing definition" id="td-model-example-tmRef">
        {
            "@context": ["http://www.w3.org/ns/td"], 
            "@type" : "ThingModel",
            "title": "Smart Lamp Control",
            "properties" : {
                "switch" : {
                    "tm:ref" :"http://example.com/BasicOnOffTM.tm.jsonld#/properties/onOff"
                }
           }
        }
    </pre>

    <p>
      At the place the "tm:ref" is defined, additional name-value pairs can be added. 
      It is also allow to override name-value pairs from the referenced definition.  
      <span class="rfc2119-assertion" id="td-model-tmRef-overwrite">
        If it is intended to override an existing JSON name-value pair definition from <code>tm:ref</code>, the same JSON name MUST be used
        at the same level of the <code>tm:ref</code> declearation that provides a new value.  
       </span>
       <span class="rfc2119-assertion" id="td-model-tmRef-overwrite-semantic-meaning">
        To keep the semantic meaning of the referenced definition it is not allowed to relax any restriction (e.g., increase value ranges) or
        change a data type definition. 
       </span>
    </p>

    <p>
        The following example shows a new TM definition that overwrite and extend an existing definition from
         <a href="#td-model-example-smart-lamp-control"></a>.
    </p>

    <pre class="example" title="Smart Lamp Control extend and overwrite existing definitions" id="td-model-example-tmRef">
        {
            "@context": ["http://www.w3.org/ns/td"], 
            "@type" : "ThingModel",
            "title": "Smart Lamp Control",
            "properties" : {
                "dimming" : {
                    "tm:ref" :"http://example.com/SmartLampControlwithDimming.tm.jsonld#/properties/dim",
                    "maximum": 80,
                    "unit" : "%"
                }
           }
        }
    </pre>
 
    <p>
        The <code>extend</code> and the import mechanism based on <code>tm:ref</code> can be also used at the same time in 
        a TM definition. The following example extends the TM from <a href="#td-model-example-basic-on-off"></a> and imports
        the <code>status</code> and <code>dim</code> definitions from <a href="#td-model-example-lamp"></a> and 
        <a href="#td-model-example-smart-lamp-control"></a> respectively.
    </p>

    <pre class="example" title="Smart Lamp Control Thing Model with extend and import mechanism" id="td-model-example-smart-lamp-control">
        {
            "@context": ["http://www.w3.org/ns/td"], 
            "@type" : "ThingModel",
            "title": "Smart Lamp Control",
            "links" : [{
                "rel": "extends",
                "href": "http://example.com/BasicOnOffTM",
                "type": "application/td+json"
             }],
            "properties" : {
                "status" : {
                    "tm:ref" :"http://example.com/LampTM.tm.jsonld#/properties/status"
                },
                "dimming" : {
                    "tm:ref" :"http://example.com/LampWithDimmingTM.tm.jsonld#/properties/dim"
                }
           }
        }
    </pre>

</section>


<section id="thing-model-td-placeholder" class="normative">
    <h3>Placeholder</h3>

<p>
    <a>Thing Model</a> can specify which terms should be taken in a TD instance, but their values are unspecific and are first known during TD instantiation. 
    In such a case the placeholder labeling MAY be used in Thing Model that MUST be substituted with a concrete value when TD instance is created 
    from the Thing Model. 
    <span class="rfc2119-assertion" id="td-model-placeholder">
        The string-based pattern of the placeholder MUST follow <code>{{PLACEHOLDER_IDENTIFIER}}</code>, 
        which should contain a placeholder identifier name. The identifier name can be used to identify the placeholder for the substitution process.
    </span>
    <span class="rfc2119-assertion" id="td-model-placeholder-value">
        Placeholder can be only applied within the value of the JSON name-value pair and the value have to be typed as JSON string. 
    </span>  
    <span class="rfc2119-assertion" id="td-model-placeholder-retyping"></span>
    In the case a non string-based value of a JSON name-value pair should have a placeholder the value must be (temporary) typed 
    as string.
    </span>
    After replacing the placeholder, e.g. when creating a Thing Description instance, the original type can be applied with the 
    corresponding replaced value.            
</p>

<p>
    The following Thing Model example defines different placeholders. The placeholder map is used to apply the replacement and to
    transform the intended value type.    
</p>

<aside class="example ds-selector-tabs" ><div class="marker">
 <span class="example-title">Thing Description generation from Thing Model</span>
  </div>
    <div class="selectors">
      <button class="selected exampleTab1 thingmodel" onclick="openTab('exampleTab1', 'thingmodel')">Thing Model</button>
      <button class="exampleTab1 placeholder"         onclick="openTab('exampleTab1', 'placeholder')">Placeholder Map</button>
      <button class="exampleTab1 thingdescription"    onclick="openTab('exampleTab1', 'thingdescription')">Thing Description</button>
    </div>
    <pre class="thingmodel exampleTab1 selected ">
{
	"@context": ["http://www.w3.org/ns/td"], 
	"@type" : "ThingModel",
	"title": "Thermostate No. {{THERMOSTATE_NUMBER}}",
	"base": "mqtt://{{MQTT_BROKER_ADDRESS}}",
	"properties": {
		"temperature": {
			"description": "Shows the current temperature value",
			"type": "number",
			"minimum": -20,
			"maximum": "{{THERMOSTATE_TEMPERATURE_MAXIMUM}}",
			"observable" : "{{THERMOSTATE_TEMPERATURE_OBSERVABLE}}"
		}
	}
	...
}
	</pre>
    <pre class="placeholder exampleTab1">
{
	"THERMOSTATE_NUMBER": 4, 
	"MQTT_BROKER_ADDRESS" : "192.168.178.72:1883",
	"THERMOSTATE_TEMPERATURE_MAXIMUM": 47.7, 
	"THERMOSTATE_TEMPERATURE_OBSERVABLE" : true
}
	</pre>
    <pre class="thingdescription exampleTab1">
{
	"@context": ["http://www.w3.org/ns/td"], 
	"@type" : "Thing",
	"title": "Thermostate No. 4",
	"base": "mqtt://192.168.178.72:1883",
	"properties": {
		"temperature": {
			"description": "Shows the current temperature value",
			"type": "number",
			"minimum": -20.0,
			"maximum": 47.7,
			"observable" : true
		}
	}
	...
}
	</pre>
  </aside>

  </section>

  <section id="thing-model-td-required" class="normative">
    <h2>Required</h2>


  <p>    
    In some cases it is desirable to force the information which interaction model is mandatory 
    and has to be definitely implemented in a <a>Thing Description</a> instance or can be always expected 
    by the <a>Thing Model</a>.
    <span class="rfc2119-assertion" id="td-model-tmRequired">
        To guarantee the implementation of particular kind of interaction models, Thing Model definitions MUST use 
        the JSON member name <code>tm:required</code>. 
    </span>
    <span class="rfc2119-assertion" id="td-model-tmRequired-array">
        <code>tm:required</code> MUST be a JSON array at the top level. 
    </span>
    <span class="rfc2119-assertion" id="td-model-tmRequired-JSONPointer">
        The value of <code>tm:required</code> MUST provide JSON Pointer [[RFC6901]] references to the required interaction model 
        definitions. 
    </span>
    <span class="rfc2119-assertion" id="td-model-tmRequired-resolver">
        The JSON Pointers of <code>tm:required</code> MUST resolve to an entire interaction affordance Map 
        definition.
    </span>
</p>

<p>    
The following sample shows the usage of <code>tm:required</code> for the <a>Property</a> interaction <code>status</code>
and <a>Action</a> interaction <code>toggle</code>. 
</p>

<pre class="example" title="Thing Model with the tm:required term for interaction affordances.">
{
    "@context": ["http://www.w3.org/ns/td"], 
    "@type" : "ThingModel",
    "title": "Lamp Thing Model",
    "description": "Lamp Thing Description Model",
    "tm:required": [
        "#/properties/status",
        "#/actions/toggle"
    ],
    "properties": {
        "status": {
            "description": "current status of the lamp (on|off)",
            "type": "string",
            "readOnly": true
        }
    },
    "actions": {
        "toggle": {
            "description": "Turn the lamp on or off"
        }
    },
    "events": {
        "overheating": {
            "description": "Lamp reaches a critical temperature (overheating)",
            "data": {"type": "string"}
        }
    }
}
</pre>
    
<p>
Since the <a>Event</a> <code>overheating</code> is not mandatory it may be not available in a <a>Thing Description</a> 
instance.
</p>

</section>




  
  </section>

  <section id="thing-model-td-generation" class="normative">
    <h2>Derivation to Thing Description Instances</h2>

    <p>
        <a>Thing Models</a> can be used as template to generate <a>Thing Description</a> based on the restriction defined in 
        Sections <a href="#sec-vocabulary-definition"></a> and <a href="#sec-td-serialization"></a>. During this process 
        missing data such as communication and seceurity metadata have to be complemented to create valid <a>Thing Description</a> instances.
        <span class="rfc2119-assertion" id="thing-model-td-generation-inconsistencies">
            A <a>Thing Model</a> MUST be defined in such a way that there are no inconsistencies that would result in a <a>Thing Description</a> not 
            being able to meet the requirements as described in Section <a href="#sec-vocabulary-definition"></a> and <a href="#sec-td-serialization"></a>.
        </span>
        <span class="rfc2119-assertion" id="thing-model-td-generation-processor">
            A TM-to-TD generation processor MUST at least address the following considerations:

         <ul>
            <li>All definitions in the applied <a>Thing Model</a> have to taken over in the <a>Thing Description</a> instance. If used, the extension and imports feature according to Section <a href=#thing-model-extension-import></a> must be resolved 
                and represented in the <a>Thing Description</a> instance as well. </li>
            <li>The value <code>ThingModel</code> value of the top-level <code>@type</code> have to be replaced by the value <code>Thing</code> in the <a>Thing Description</a> instance.</li>
            <li>If the <code>required</code> feature is used based on Section <a href=#thing-model-td-required></a>, the required interactions must definitly be taken over in the <a>Thing Description</a> instance.</li>
            <li>If used, all placholder (see Section <a href="#thing-model-td-placeholder"></a>) in a <a>Thing Model</a> must be replaced with a valid corresponding value in the <a>Thing Description</a>.</li>
            <li>Missing communication and/or security metadata details have to be complemented in the <a>Thing Description</a> instance based on Section <a href=#security-serialization-json></a> and/or <a href=#form-serialization-json></a>.</li>
            <li>If used, <code>links</code> entry with <code>"rel":"extends"</code> should not taken over in the <a>Thing Description</a> instance.
        </ul>
        </span>

    </p>
  

      <p>Thing description instances that follow a Thing model can carry the information which type 
          of Thing model is derived. In this context, the linking concept can be used with <code>"rel" : "type"</code> (also see
          Section <a href="#link"></a>), as shown in the following example: 
      </p>

      <aside class="example ds-selector-tabs" ><div class="marker">
        <span class="example-title">Linking Thing Description to a Thing Model Definition</span>
         </div>
           <div class="selectors">
             <button class="selected exampleTab2 thingmodel" onclick="openTab('exampleTab2', 'thingmodel')">Thing Model</button>
             <button class="exampleTab2 thingdescription"    onclick="openTab('exampleTab2', 'thingdescription')">Thing Description</button>
           </div>
           <pre class="selected exampleTab2 thingmodel">
{
	...
	"@type": "ThingModel",
	"name": "Smart Pump",
	"description": "Smart Pump live plant and simulator",
	"id": "urn:smart:device:wot:pump",
	"version" : {"model" : "1.0.0" },
	...
}
		</pre>
        <pre class="exampleTab2 thingdescription">
{
	...
	"@type": "Thing",
	"name": "Smart Pump",
	"description": "Smart Pump live plant and simulator",
	"id": "urn:smart:device:wot:pump:instance:1",
	"version" : {"instance": "1.0.0",
				 "model" : "1.0.0" },
	"links" : [{
		"rel" : "type",
		"href" : "http://example.com/ThingModelPool/Pump",
		"type": "application/td+json"
	}],
	...
}
		</pre>
        </aside>

         <p>Please not that a TD can only be an instance of only one TM at a time. 
             That means for Thing Descriptions:
         <span class="rfc2119-assertion" id="td-link-type">
            The <code>links</code> array can use the entry with <code>"rel" : "type"</code> maximum one.
        </span> 
    </p>

    

</section>


<section id="thing-model-td-generation-examples" class="normative">
    <h2>Examples</h2>

    <p>
        The following <a>Thing Model</a> extends the model as shown in <a href="#td-model-example-smart-lamp-control"></a> and 
        overwrites the <code>maximum</code> value of the <code>dim</code> property  
    </p>

    <pre class="example" title="Extending Smart Control Lamp with a modified dim constrained">
    {
        "@context": ["http://www.w3.org/ns/td"], 
        "@type" : "ThingModel",
        "links" : [{
            "rel": "extends",
            "href": "http://example.com/SmartControlLampTM",
            "type": "application/td+json"
         }],
        "properties" : {
            "dim" : {
                "maximum": 200
            }
       }
    }
    </pre>

    <p>The expected <a>Thing Description</a> that is derived from this <a>Thing Model</a> would be (with HTTP Binding and basic security applied):</p>

    <pre class="example" title="Thing Description">
        {
            "@context": ["http://www.w3.org/ns/td"], 
            "@type" : "Thing",
            "title": "Smart Lamp Control",
            "securityDefinitions": {
                "basic_sc": {"scheme": "basic", "in": "header"}
            },
            "security": "basic_sc",
            "links" : [{
                "rel": "type",
                "href": "url/to/SmartLampControlModifiedDimTM",
                "type": "application/td+json"
             }
           ],
           "properties" : {
                "onOff : {
                    "type: "boolean",
                    "forms": [{"href": "https://smartlamp.example.com/onoff"}]
                },
                "dim" : {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 200,
                    "forms": [{"href": "https://smartlamp.example.com/dim"}]
                }
           }
        }
    </pre>

    


</section>

 
</section>
  <section id="iana-section" class="normative">
 
  <h1>IANA Considerations</h1>
    <section id="media-type-section">
    <h2><code>application/td+json</code> Media Type Registration</h2>
    <dl>
      <dt>Type name:</dt>
      <dd>application</dd>
      <dt>Subtype name:</dt>
      <dd>td+json</dd>
      <dt>Required parameters:</dt>
      <dd>None</dd>
      <dt>Optional parameters:</dt>
      <dd>None</dd>
      <dt>Encoding considerations:</dt>
      <dd>See <a href="https://tools.ietf.org/html/rfc6839#section-3.1">RFC&nbsp;6839, section 3.1</a>.</dd>
      <dt>Security considerations:</dt>
      <dd>See <a href="https://tools.ietf.org/html/rfc8259#section-12">RFC&nbsp;8259, section 12</a>.
        <p>
          <span class="rfc2119-assertion" id="iana-security-execution">
            Since WoT Thing Description is intended to be a pure data exchange format for
            <a>Thing</a> metadata, the serialization SHOULD NOT be passed through a
            code execution mechanism such as JavaScript's <code>eval()</code>
            function to be parsed.
          </span>
          An (invalid) document may contain code that,
          when executed, could lead to unexpected side effects compromising
          the security of a system.
        </p>
        <p>
          WoT Thing Descriptions can be evaluated with a JSON-LD 1.1 processor,
          which typically follows links to remote contexts (i.e., TD context
          extensions, see <a href="https://www.w3.org/TR/wot-thing-description/#sec-context-extensions">W3C WoT Thing Description, section 7</a>)
          automatically, resulting in the transfer of files
          without the explicit request of the <a>Consumer</a> for each one. If remote
          contexts are served by third parties, it may allow them to gather
          usage patterns or similar information leading to privacy concerns.
          <span class="rfc2119-assertion" id="iana-security-remote">
          While implementations on resource-constrained devices are expected
          to perform raw JSON processing (as opposed to JSON-LD processing),
          implementations in general SHOULD statically cache vetted
          versions of their supported context extensions and not to follow links
          to remote contexts.
          </span>
          Supported context extensions can be managed
          through a secure software update mechanism instead.
        </p>
        <p>
          Context Extensions (see <a href="https://www.w3.org/TR/wot-thing-description/#sec-context-extensions">W3C WoT Thing Description, section 7</a>)
          that are loaded from the Web over non-secure connections,
          such as HTTP, run the risk of being altered by an attacker such that
          they may modify the <a>TD Information Model</a> in a way that could
          compromise security.
          <span class="rfc2119-assertion" id="iana-security-alter">
          For this reason, <a>Consumer</a> again
          SHOULD vet and cache remote contexts before allowing the system
          to use it.
          </span>
        </p>
        <p>
          Given that JSON-LD processing usually includes the substitution of
          long IRIs [[RFC3987]] with short terms,
          WoT Thing Descriptions may expand considerably when processed using
          a JSON-LD 1.1 processor and, in the worst case, the resulting data
          might consume all of the recipient's resources.
          <span class="rfc2119-assertion" id="iana-security-expansion">
          <a>Consumers</a> SHOULD treat any TD metadata with due skepticism.
          </span>
        </p>
      </dd>
      <dt>Interoperability considerations:</dt>
      <dd>See <a href="https://tools.ietf.org/html/rfc8259">RFC&nbsp;8259</a>.
        <p>
        Rules for processing both conforming and non-conforming content are
        defined in this specification.
        </p>
      </dd>
      <dt>Published specification:</dt>
      <dd><a href="https://w3c.github.io/wot-thing-description">https://w3c.github.io/wot-thing-description</a></dd>
      <dt>Applications that use this media type:</dt>
      <dd>
        All participating entities in the W3C Web of Things, that is,
        <a>Things</a>, <a>Consumers</a>, and Intermediaries as defined in the
        <a href="https://www.w3.org/TR/wot-architecture">Web of Things (WoT) Architecture</a>.</dd>
      <dt>Fragment identifier considerations:</dt>
      <dd>See <a href="https://tools.ietf.org/html/rfc6839#section-3.1">RFC&nbsp;6839, section 3.1</a>.</dd>
      <dt>Additional information:</dt>
      <dd>
        <dl>
          <dt>Magic number(s):</dt>
          <dd>Not Applicable</dd>
          <dt>File extension(s):</dt>
          <dd>.jsontd</dd>
          <dt>Macintosh file type code(s):</dt>
          <dd>TEXT</dd>
        </dl>
      </dd>
      <dt>Person &amp; email address to contact for further information:</dt>
      <dd>Matthias Kovatsch &lt;w3c@kovatsch.net&gt;</dd>
      <dt>Intended usage:</dt>
      <dd>COMMON</dd>
      <dt>Restrictions on usage:</dt>
      <dd>None</dd>
      <dt>Author(s):</dt>
      <dd>The WoT Thing Description specification is a product of the Web of Things Working Group.</dd>
      <dt>Change controller:</dt>
      <dd><abbr title="World Wide Web Consortium">W3C</abbr></dd>
    </dl>

    </section>
    <section id="content-format-section">
    <h2>CoAP Content-Format Registration</h2>
    <p>
      IANA assigns compact CoAP Content-Format IDs for media types in the
      <a href="https://www.iana.org/assignments/core-parameters/core-parameters.xhtml#content-formats">CoAP Content-Formats</a>
      subregistry within the
      <a href="https://www.iana.org/assignments/core-parameters/core-parameters.xhtml">Constrained RESTful Environments (CoRE) Parameters</a>
      registry [[RFC7252]].
      The Content-Format ID for WoT Thing Description is 432.
    </p>
    <dl>
      <dt>Media Type:</dt>
      <dd>application/td+json</dd>
      <dt>Encoding:</dt>
      <dd>-</dd>
      <dt>ID:</dt>
      <dd>432</dd>
      <dt>Reference:</dt>
      <dd>[<a href="https://w3c.github.io/wot-thing-description">"Web of Things (WoT) Thing Description", May 2019</a>]</dd>
    </section>
  </section>

  <section id="example-serialization" class="appendix informative">
    <h2>Example Thing Description Instances</h2>
  
    <section id="myLampThing-example-serialization">
    <h3>MyLampThing Example with CoAP Protocol Binding</h3>
  
    <p>Feature list of the <a>Thing</a>:</p>
  
    <ul>
        <li>Title: MyLampThing</li>
        <li>Context Extensions: none</li>
        <li>Offered affordances: 1 Property, 1 Action, 1 Event</li>
        <li>Security: PSKSecurityScheme</li>
        <li>Protocol Binding: CoAP [[?RFC7252]] over TLS</li>
        <li>Comment: Also see <a href="#adding-protocol-bindings"></a>.</li>
    </ul>
  
  <pre class="example" title="MyLampThing with CoAP Protocol Binding">
  {
     "@context": [
        "http://www.w3.org/ns/td",
        {
        "cov": "http://www.example.org/coap-binding#"
        }
      ],
      "id": "urn:dev:ops:32473-WoTLamp-1234",
      "title": "MyLampThing",
      "description": "MyLampThing uses JSON serialization",
      "securityDefinitions": {"psk_sc":{"scheme": "psk"}},
      "security": ["psk_sc"],
      "properties": {
          "status": {
              "description": "Shows the current status of the lamp",
              "type": "string",
              "forms": [{
                  "op": "readproperty",
                  "href": "coaps://mylamp.example.com/status",
                  "cov:methodName": "GET" 
              }]
          }
      },
      "actions": {
          "toggle": {
              "description": "Turn on or off the lamp",
              "forms": [{
                  "href": "coaps://mylamp.example.com/toggle",
                  "cov:methodName": "POST" 
              }]
          }
      },
      "events": {
          "overheating": {
              "description": "Lamp reaches a critical temperature (overheating)",
              "data": {"type": "string"},
              "forms": [{
                  "href": "coaps://mylamp.example.com/oh",
                  "cov:methodName": "GET",
                  "subprotocol": "cov:observe" 
              }]
          }
      }
  }
  </pre>
  </section>
  
    <section id="myLightSensor-example-serialization">
    <h3>MyIlluminanceSensor Example with MQTT Protocol Binding</h3>
  
    <p>Feature list of the <a>Thing</a>:</p>
  
    <ul>
        <li>Title: MyIlluminanceSensor</li>
        <li>Context Extensions: none</li>
        <li>Offered affordances: 1 Event</li>
        <li>Security: none</li>
        <li>Protocol Binding: MQTT [[?MQTT]]</li>
        <li>Comment: An MQTT client frequently publishes the illuminance data (number is serialized in text format) to 
            the topic <code>/illuminance</code> by the MQTT broker running behind the address 192.168.1.187:1883.</li>
    </ul>
  
  <pre class="example" title="MyIlluminanceSensor with MQTT Protocol Binding">
          {   
              "@context": "http://www.w3.org/ns/td",
              "title": "MyIlluminanceSensor",
              "id": "urn:dev:ops:32473-WoTIlluminanceSensor-1234",
              "securityDefinitions": {"nosec_sc": {"scheme": "nosec"}},
              "security": ["nosec_sc"],
              "events": {
                  "illuminance": {
                      "data":{"type": "integer"},
                      "forms": [
                          {
                              "href": "mqtt://192.168.1.187:1883/illuminance",
                              "contentType": "text/plain",
                              "op": "subscribeevent"
                          }
                      ]
                  }
              } 
          }
  </pre>
    </section>
  
  
    <section id="webhook-example-serialization">
      <h3>Webhook Event Example</h3>
    
      <p>Feature list of the <a>Thing</a>:</p>
    
      <ul>
          <li>Title: WebhookThing</li>
          <li>Context Extensions: use HTTP <a>Protocol Binding</a> supplements (htv prefix already included in TD context)</li>
          <li>Offered affordances: 1 Event</li>
          <li>Security: none</li>
          <li>Protocol Binding: HTTP</li>
          <li>Comment: <i>WebhookThing</i> provides an Event affordance <code>temperature</code>
              which periodically pushes the latest temperature value to the <a>Consumer</a> using a Webhook mechanism,
              where the <a>Thing</a> sends POST requests to a callback URI provided by the <a>Consumer</a>.
              To describe this, the <code>subscription</code> member defines a write-only parameter <code>callbackURL</code>,
              which must be submitted through the <code>subscribeevent</code> form.
              The read-only parameter <code>subscriptionID</code> is returned by the subscription.
              The <i>WebhookThing</i> will then periodically POST to this callback URI with a payload defined by <code>data</code>.
              To unsubscribe, the <a>Consumer</a> has to submit the <code>unsubscribeevent</code> form,
              which makes use of a URI Template.
              The <code>uriVariables</code> member informs the <a>Consumer</a> to include the <code>subscriptionID</code> string.
              This can be further automated by using a <a>TD Context Extension</a> to include proper semantic annotations.
              Alternatively, one can imagine unsubscribing using the <code>cancellation</code> member similarly to <code>subscription</code>
              and combine this with a <code>unsubscribeevent</code> form that describes a POST request with payload to unsubscribe.
          </li>
      </ul>
    
<pre class="example" title="Temperature Event with subscription and cancellation">
{
    "@context": "http://www.w3.org/ns/td",
    "id": "urn:dev:ops:32473-Thing-1234",
    "title": "WebhookThing",
    "description": "Webhook-based Event with subscription and unsubscribe form.",
    "securityDefinitions": {"nosec_sc": {"scheme": "nosec"}},
    "security": ["nosec_sc"],
    "events": {
        "temperature": {
            "description": "Provides periodic temperature value updates.",
            "subscription": {
                "type": "object",
                "properties": {
                    "callbackURL": {
                        "type": "string",
                        "format": "uri",
                        "description": "Callback URL provided by subscriber for Webhook notifications.",
                        "writeOnly": true
                    },
                    "subscriptionID": {
                        "type": "string",
                        "description": "Unique subscription ID for cancellation provided by WebhookThing.",
                        "readOnly": true
                    }
                }
            },
            "data": {
                "type": "number",
                "description": "Latest temperature value that is sent to the callback URL."
            },
            "cancellation": {
                "type": "object",
                "properties": {
                    "subscriptionID": {
                        "type": "integer",
                        "description": "Required subscription ID to cancel subscription.",
                        "writeOnly": true
                    }
                }
            },
            "uriVariables": {
                "subscriptionID": { "type": "string" }
            },
            "forms": [
                {
                    "op": "subscribeevent",
                    "href": "http://192.168.0.124:8080/events/temp/subscribe",
                    "contentType": "application/json",
                    "htv:methodName": "POST"
                },
                {
                    "op": "unsubscribeevent",
                    "href": "http://192.168.0.124:8080/events/temp/{subscriptionID}",
                    "htv:methodName": "DELETE"
                }
            ]
        }
    }
}
</pre>

    </section>
  </section>

  <section id="json-schema-for-validation" class="appendix informative">
  <h1>JSON Schema for TD Instance Validation</h1>
    <p>
        Below is a JSON Schema [[?JSON-SCHEMA]] document for syntactically validating Thing Description instances serialized in JSON based format.
    </p>
    <p class="note">The Thing Description defined by this document allows for 
        adding external vocabularies by using <code>@context</code> mechanism 
        known from JSON-LD [[?json-ld11]], and the terms in those external vocabularies can be
        used in addition to the terms defined in <a href="#sec-vocabulary-definition"></a>. 
        For this reason, the below JSON schema is intentionally non-strict in that 
        regard. You can replace the value of <code>additionalProperties</code> schema 
        property <code>true</code> with <code>false</code> in different scopes/levels in 
        order to perform a stricter validation in case no external vocabularies are used.
    </p>

    <p class="note"> Please note that some JSON Schema validation tools do not support the <code>iri</code> string format.
    </p>

    <p>
        The following JSON Schema for validating TD instances does not require the terms with <a>Default Values</a> to be present. Thus the terms with <a>Default Values</a> are optional. (see also <a href="#sec-default-values"></a>)
    </p>
    <pre class="advisement">
{
    "title": "WoT TD Schema - 16 February 2021",
    "description": "JSON Schema for validating TD instances against the TD model. TD instances can be with or without terms that have default values",
    "$schema ": "http://json-schema.org/draft-07/schema#",
    "definitions": {
        "anyUri": {
            "type": "string",
            "format": "iri-reference"
        },
        "description": {
            "type": "string"
        },
        "descriptions": {
            "type": "object",
            "additionalProperties": {
                "type": "string"
            }
        },
        "title": {
            "type": "string"
        },
        "titles": {
            "type": "object",
            "additionalProperties": {
                "type": "string"
            }
        },
        "security": {
            "oneOf": [{
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                {
                    "type": "string"
                }
            ]
        },
        "scopes": {
            "oneOf": [{
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                {
                    "type": "string"
                }
            ]
        },
        "subprotocol": {
            "type": "string",
            "enum": [
                "longpoll",
                "websub",
                "sse"
            ]
        },
        "thing-context-w3c-uri": {
            "type": "string",
            "enum": [
                "https://www.w3.org/2019/wot/td/v1",
                "http://www.w3.org/ns/td"
            ]
        },
        "thing-context": {
            "oneOf": [{
                    "type": "array",
                    "items": [{
                        "$ref": "#/definitions/thing-context-w3c-uri"
                    }],
                    "additionalItems": {
                        "anyOf": [{
                                "$ref": "#/definitions/anyUri"
                            },
                            {
                                "type": "object"
                            }
                        ]
                    }
                },
                {
                    "$ref": "#/definitions/thing-context-w3c-uri"
                }
            ]
        },
        "type_declaration": {
            "oneOf": [{
                    "type": "string",
                    "not": {"const":"ThingModel"}
                },
                {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "not": {"const":"ThingModel"}
                    }
                }
            ]
        },
        "dataSchema": {
            "type": "object",
            "properties": {
                "@type": {
                    "$ref": "#/definitions/type_declaration"
                },
                "description": {
                    "$ref": "#/definitions/description"
                },
                "title": {
                    "$ref": "#/definitions/title"
                },
                "descriptions": {
                    "$ref": "#/definitions/descriptions"
                },
                "titles": {
                    "$ref": "#/definitions/titles"
                },
                "writeOnly": {
                    "type": "boolean"
                },
                "readOnly": {
                    "type": "boolean"
                },
                "oneOf": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/dataSchema"
                    }
                },
                "unit": {
                    "type": "string"
                },
                "enum": {
                    "type": "array",
                    "minItems": 1,
                    "uniqueItems": true
                },
                "format": {
                    "type": "string"
                },
                "const": {},
                "contentEncoding":{
                    "type": "string"
                },
                "contentMediaType":{
                    "type": "string"
                },
                "type": {
                    "type": "string",
                    "enum": [
                        "boolean",
                        "integer",
                        "number",
                        "string",
                        "object",
                        "array",
                        "null"
                    ]
                },
                "items": {
                    "oneOf": [{
                            "$ref": "#/definitions/dataSchema"
                        },
                        {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/dataSchema"
                            }
                        }
                    ]
                },
                "maxItems": {
                    "type": "integer",
                    "minimum": 0
                },
                "minItems": {
                    "type": "integer",
                    "minimum": 0
                },
                "minimum": {
                    "type": "number"
                },
                "maximum": {
                    "type": "number"
                },
                "minLength":{
                    "type": "integer",
                    "minimum": 0
                },
                "maxLength":{
                    "type": "integer",
                    "minimum": 0
                },
                "multipleOf":{
                    "oneOf":[{"type": "integer"},{"type": "number"}]
                },
                "properties": {
                    "additionalProperties": {
                        "$ref": "#/definitions/dataSchema"
                    }
                },
                "required": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "form_element_property": {
            "type": "object",
            "properties": {
                "op": {
                    "oneOf": [{
                            "type": "string",
                            "enum": [
                                "readproperty",
                                "writeproperty",
                                "observeproperty",
                                "unobserveproperty"
                            ]
                        },
                        {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "enum": [
                                    "readproperty",
                                    "writeproperty",
                                    "observeproperty",
                                    "unobserveproperty"
                                ]
                            }
                        }
                    ]
                },
                "href": {
                    "$ref": "#/definitions/anyUri"
                },
                "contentType": {
                    "type": "string"
                },
                "contentCoding": {
                    "type": "string"
                },
                "subprotocol": {
                    "$ref": "#/definitions/subprotocol"
                },
                "security": {
                    "$ref": "#/definitions/security"
                },
                "scopes": {
                    "$ref": "#/definitions/scopes"
                },
                "response": {
                    "type": "object",
                    "properties": {
                        "contentType": {
                            "type": "string"
                        }
                    }
                },
                "additionalResponses": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "contentType": {
                                "type": "string"
                            },
                            "schema": {
                                "type": "object",
                                "additionalProperties": {
                                    "$ref": "#/definitions/dataSchema"
                                }
                            }
                        }
                    }
                }
            },
            "required": [
                "href"
            ],
            "additionalProperties": true
        },
        "form_element_action": {
            "type": "object",
            "properties": {
                "op": {
                    "oneOf": [{
                            "type": "string",
                            "enum": [
                                "invokeaction"
                            ]
                        },
                        {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "enum": [
                                    "invokeaction"
                                ]
                            }
                        }
                    ]
                },
                "href": {
                    "$ref": "#/definitions/anyUri"
                },
                "contentType": {
                    "type": "string"
                },
                "contentCoding": {
                    "type": "string"
                },
                "subprotocol": {
                    "$ref": "#/definitions/subprotocol"
                },
                "security": {
                    "$ref": "#/definitions/security"
                },
                "scopes": {
                    "$ref": "#/definitions/scopes"
                },
                "response": {
                    "type": "object",
                    "properties": {
                        "contentType": {
                            "type": "string"
                        }
                    }
                },
                "additionalResponses": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "contentType": {
                                "type": "string"
                            },
                            "schema": {
                                "type": "object",
                                "additionalProperties": {
                                    "$ref": "#/definitions/dataSchema"
                                }
                            }
                        }
                    }
                }
            },
            "required": [
                "href"
            ],
            "additionalProperties": true
        },
        "form_element_event": {
            "type": "object",
            "properties": {
                "op": {
                    "oneOf": [{
                            "type": "string",
                            "enum": [
                                "subscribeevent",
                                "unsubscribeevent"
                            ]
                        },
                        {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "enum": [
                                    "subscribeevent",
                                    "unsubscribeevent"
                                ]
                            }
                        }
                    ]
                },
                "href": {
                    "$ref": "#/definitions/anyUri"
                },
                "contentType": {
                    "type": "string"
                },
                "contentCoding": {
                    "type": "string"
                },
                "subprotocol": {
                    "$ref": "#/definitions/subprotocol"
                },
                "security": {
                    "$ref": "#/definitions/security"
                },
                "scopes": {
                    "$ref": "#/definitions/scopes"
                },
                "response": {
                    "type": "object",
                    "properties": {
                        "contentType": {
                            "type": "string"
                        }
                    }
                },
                "additionalResponses": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "contentType": {
                                "type": "string"
                            },
                            "schema": {
                                "type": "object",
                                "additionalProperties": {
                                    "$ref": "#/definitions/dataSchema"
                                }
                            }
                        }
                    }
                }
            },
            "required": [
                "href"
            ],
            "additionalProperties": true
        },
        "form_element_root": {
            "type": "object",
            "properties": {
                "op": {
                    "oneOf": [{
                            "type": "string",
                            "enum": [
                                "readallproperties",
                                "writeallproperties",
                                "readmultipleproperties",
                                "writemultipleproperties",
                                "observeallproperties",
                                "unobserveallproperties"
                            ]
                        },
                        {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "enum": [
                                    "readallproperties",
                                    "writeallproperties",
                                    "readmultipleproperties",
                                    "writemultipleproperties",
                                    "observeallproperties",
                                    "unobserveallproperties"
                                ]
                            }
                        }
                    ]
                },
                "href": {
                    "$ref": "#/definitions/anyUri"
                },
                "contentType": {
                    "type": "string"
                },
                "contentCoding": {
                    "type": "string"
                },
                "subprotocol": {
                    "$ref": "#/definitions/subprotocol"
                },
                "security": {
                    "$ref": "#/definitions/security"
                },
                "scopes": {
                    "$ref": "#/definitions/scopes"
                },
                "response": {
                    "type": "object",
                    "properties": {
                        "contentType": {
                            "type": "string"
                        }
                    }
                },
                "additionalResponses": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "contentType": {
                                "type": "string"
                            },
                            "schema": {
                                "type": "object",
                                "additionalProperties": {
                                    "$ref": "#/definitions/dataSchema"
                                }
                            }
                        }
                    }
                }
            },
            "required": [
                "href"
            ],
            "additionalProperties": true
        },
        "property_element": {
            "type": "object",
            "properties": {
                "@type": {
                    "$ref": "#/definitions/type_declaration"
                },
                "description": {
                    "$ref": "#/definitions/description"
                },
                "descriptions": {
                    "$ref": "#/definitions/descriptions"
                },
                "title": {
                    "$ref": "#/definitions/title"
                },
                "titles": {
                    "$ref": "#/definitions/titles"
                },
                "forms": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                        "$ref": "#/definitions/form_element_property"
                    }
                },
                "uriVariables": {
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/dataSchema"
                    }
                },
                "observable": {
                    "type": "boolean"
                },
                "writeOnly": {
                    "type": "boolean"
                },
                "readOnly": {
                    "type": "boolean"
                },
                "oneOf": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/dataSchema"
                    }
                },
                "unit": {
                    "type": "string"
                },
                "enum": {
                    "type": "array",
                    "minItems": 1,
                    "uniqueItems": true
                },
                "format": {
                    "type": "string"
                },
                "const": {},
                "type": {
                    "type": "string",
                    "enum": [
                        "boolean",
                        "integer",
                        "number",
                        "string",
                        "object",
                        "array",
                        "null"
                    ]
                },
                "items": {
                    "oneOf": [{
                            "$ref": "#/definitions/dataSchema"
                        },
                        {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/dataSchema"
                            }
                        }
                    ]
                },
                "maxItems": {
                    "type": "integer",
                    "minimum": 0
                },
                "minItems": {
                    "type": "integer",
                    "minimum": 0
                },
                "minimum": {
                    "type": "number"
                },
                "maximum": {
                    "type": "number"
                },
                "minLength":{
                    "type": "integer",
                    "minimum": 0
                },
                "maxLength":{
                    "type": "integer",
                    "minimum": 0
                },
                "multipleOf":{
                    "oneOf":[{"type": "integer"},{"type": "number"}]
                },
                "properties": {
                    "additionalProperties": {
                        "$ref": "#/definitions/dataSchema"
                    }
                },
                "required": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "required": [
                "forms"
            ],
            "additionalProperties": true
        },
        "action_element": {
            "type": "object",
            "properties": {
                "@type": {
                    "$ref": "#/definitions/type_declaration"
                },
                "description": {
                    "$ref": "#/definitions/description"
                },
                "descriptions": {
                    "$ref": "#/definitions/descriptions"
                },
                "title": {
                    "$ref": "#/definitions/title"
                },
                "titles": {
                    "$ref": "#/definitions/titles"
                },
                "forms": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                        "$ref": "#/definitions/form_element_action"
                    }
                },
                "uriVariables": {
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/dataSchema"
                    }
                },
                "input": {
                    "$ref": "#/definitions/dataSchema"
                },
                "output": {
                    "$ref": "#/definitions/dataSchema"
                },
                "safe": {
                    "type": "boolean"
                },
                "idempotent": {
                    "type": "boolean"
                }
            },
            "required": [
                "forms"
            ],
            "additionalProperties": true
        },
        "event_element": {
            "type": "object",
            "properties": {
                "@type": {
                    "$ref": "#/definitions/type_declaration"
                },
                "description": {
                    "$ref": "#/definitions/description"
                },
                "descriptions": {
                    "$ref": "#/definitions/descriptions"
                },
                "title": {
                    "$ref": "#/definitions/title"
                },
                "titles": {
                    "$ref": "#/definitions/titles"
                },
                "forms": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                        "$ref": "#/definitions/form_element_event"
                    }
                },
                "uriVariables": {
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/dataSchema"
                    }
                },
                "subscription": {
                    "$ref": "#/definitions/dataSchema"
                },
                "data": {
                    "$ref": "#/definitions/dataSchema"
                },
                "cancellation": {
                    "$ref": "#/definitions/dataSchema"
                }
            },
            "required": [
                "forms"
            ],
            "additionalProperties": true
        },
        "link_element": {
            "type": "object",
            "properties": {
                "href": {
                    "$ref": "#/definitions/anyUri"
                },
                "type": {
                    "type": "string"
                },
                "rel": {
                    "type": "string",
                    "not": {"const":"extends"}
                },
                "anchor": {
                    "$ref": "#/definitions/anyUri"
                }
            },
            "required": [
                "href"
            ],
            "additionalProperties": true
        },
        "securityScheme": {
            "oneOf": [{
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "nosec"
                            ]
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "combo"
                            ]
                        },
                        "oneOf": {
                            "type": "array",
                            "minItems": 2,
                            "items": {
                               "type": "string"
                            }
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "combo"
                            ]
                        },
                        "allOf": {
                            "type": "array",
                            "minItems": 2,
                            "items": {
                               "type": "string"
                            }
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "basic"
                            ]
                        },
                        "in": {
                            "type": "string",
                            "enum": [
                                "header",
                                "query",
                                "body",
                                "cookie"
                            ]
                        },
                        "name": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "digest"
                            ]
                        },
                        "qop": {
                            "type": "string",
                            "enum": [
                                "auth",
                                "auth-int"
                            ]
                        },
                        "in": {
                            "type": "string",
                            "enum": [
                                "header",
                                "query",
                                "body",
                                "cookie"
                            ]
                        },
                        "name": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "apikey"
                            ]
                        },
                        "in": {
                            "type": "string",
                            "enum": [
                                "header",
                                "query",
                                "body",
                                "cookie"
                            ]
                        },
                        "name": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "bearer"
                            ]
                        },
                        "authorization": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "alg": {
                            "type": "string"
                        },
                        "format": {
                            "type": "string"
                        },
                        "in": {
                            "type": "string",
                            "enum": [
                                "header",
                                "query",
                                "body",
                                "cookie"
                            ]
                        },
                        "name": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "psk"
                            ]
                        },
                        "identity": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "$ref": "#/definitions/type_declaration"
                        },
                        "description": {
                            "$ref": "#/definitions/description"
                        },
                        "descriptions": {
                            "$ref": "#/definitions/descriptions"
                        },
                        "proxy": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scheme": {
                            "type": "string",
                            "enum": [
                                "oauth2"
                            ]
                        },
                        "authorization": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "token": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "refresh": {
                            "$ref": "#/definitions/anyUri"
                        },
                        "scopes": {
                            "oneOf": [{
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                },
                                {
                                    "type": "string"
                                }
                            ]
                        },
                        "flow": {
                            "type": "string",
                            "enum": [
                                "code"
                            ]
                        }
                    },
                    "required": [
                        "scheme"
                    ]
                }
            ]
        }
    },
    "type": "object",
    "properties": {
        "id": {
            "type": "string",
            "format": "uri"
        },
        "title": {
            "$ref": "#/definitions/title"
        },
        "titles": {
            "$ref": "#/definitions/titles"
        },
        "properties": {
            "type": "object",
            "additionalProperties": {
                "$ref": "#/definitions/property_element"
            }
        },
        "actions": {
            "type": "object",
            "additionalProperties": {
                "$ref": "#/definitions/action_element"
            }
        },
        "events": {
            "type": "object",
            "additionalProperties": {
                "$ref": "#/definitions/event_element"
            }
        },
        "description": {
            "$ref": "#/definitions/description"
        },
        "descriptions": {
            "$ref": "#/definitions/descriptions"
        },
        "version": {
            "type": "object",
            "properties": {
                "instance": {
                    "type": "string"
                }
            },
            "required": [
                "instance"
            ]
        },
        "links": {
            "type": "array",
            "items": {
                "$ref": "#/definitions/link_element"
            }
        },
        "forms": {
            "type": "array",
            "minItems": 1,
            "items": {
                "$ref": "#/definitions/form_element_root"
            }
        },
        "base": {
            "$ref": "#/definitions/anyUri"
        },
        "securityDefinitions": {
            "type": "object",
            "minProperties": 1,
            "additionalProperties": {
                "$ref": "#/definitions/securityScheme"
            }
        },
        "support": {
            "$ref": "#/definitions/anyUri"
        },
        "created": {
            "type": "string",
            "format": "date-time"
        },
        "modified": {
            "type": "string",
            "format": "date-time"
        },
        "security": {
            "oneOf": [{
                    "type": "string"
                },
                {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                        "type": "string"
                    }
                }
            ]
        },
        "@type": {
            "$ref": "#/definitions/type_declaration"
        },
        "@context": {
            "$ref": "#/definitions/thing-context"
        }
    },
    "required": [
        "title",
        "security",
        "securityDefinitions",
        "@context"
    ],
    "additionalProperties": true
}
    </pre>

  </section>



<section id="json-ld-ctx-usage" class="appendix informative">
    <h1>JSON-LD Context Usage</h1>

    <p>
        The present specification introduces the <a>TD Information Model</a>
        as a set of constraints over different <a>Vocabularies</a>, i.e. sets of
        <a>Vocabulary Terms</a>. This section briefly explains how a machine-readable
        definition of these constraints can be integrated into client applications,
        by making use of the mandatory <code>@context</code> of a TD document.
    </p>

    <p>
        Accessing the <a>TD Information Model</a> from a TD document is done in
        two steps. First, clients must retrieve a mapping from JSON strings to IRIs.
        This mapping is defined as a JSON-LD context, as explained later. Second, clients
        can access the constraints defined on these IRIs by dereferencing them.
        Constraints are defined as logical axioms in the RDF format, readily interpretable
        by client programs.
    </p>

    <p>
        All <a>Vocabulary Terms</a> referenced in <a href="#sec-vocabulary-definition"></a>
        are serialized as (compact) JSON strings in a TD document. However, each of these
        terms is unambiguously identified by a full IRI, as per the first Linked Data
        principle [[LINKED-DATA]]. The mappings from JSON keys to IRIs is what the
        <code>@context</code> value of a TD points to. For instance, the file at
    </p>

    <p>
        <code>http://www.w3.org/ns/td</code>
    </p>

    <p>
        includes the following mappings (among others):
        <table>
            <tbody>
                <tr>
                    <td><code>properties</code></td>
                    <td>→</td>
                    <td><code>https://www.w3.org/2019/wot/td#hasPropertyAffordance</code></td>
                </tr>
                <tr>
                    <td><code>object</code></td>
                    <td>→</td>
                    <td><code>https://www.w3.org/2019/wot/json-schema#ObjectSchema</code></td>
                </tr>
                <tr>
                    <td><code>basic</code></td>
                    <td>→</td>
                    <td><code>https://www.w3.org/2019/wot/security#BasicSecurityScheme</code></td>
                </tr>
                <tr>
                    <td><code>href</code></td>
                    <td>→</td>
                    <td><code>https://www.w3.org/2019/wot/hypermedia#hasTarget</code></td>
                </tr>
                <tr>
                    <td colspan="3">...</td>
                </tr>
            </tbody>
        </table>
    </p>

    <p>
        This JSON file follows the JSON-LD 1.1 syntax [[JSON-LD11]].
        Numerous JSON-LD libraries can automatically process the <code>@context</code> of a TD
        and expand all the JSON strings it includes.
    </p>

    <p>
        Once every <a>Vocabulary Term</a> of a TD is expanded to a IRI, the second step
        consists in dereferencing this IRI to get fragments of the <a>TD Information Model</a>
        that refer to that <a>Vocabulary Term</a>. For instance, dereferencing the IRI
    </p>

    <p>
        <code>https://www.w3.org/2019/wot/json-schema#ObjectSchema</code>
    </p>

    <p>
        results in an RDF document stating that the term <code>ObjectSchema</code> is a
        <a>Class</a> and more precisely, a sub-class of <code>DataSchema</code>. Such
        logical axioms are represented in RDF using formalisms of various complexity:
        here, sub-class relations are expressed as RDF Schema axioms [[RDF-SCHEMA]].
        Moreover, these axioms may be serialized in various formats. Here, they are
        serialized in the Turtle format [[TURTLE]]:
    </p>

    <p>
<pre class="nohighlight">
<code>&lt;https://www.w3.org/2019/wot/json-schema#ObjectSchema&gt;
    a rdfs:Class .
&lt;https://www.w3.org/2019/wot/json-schema#ObjectSchema&gt;
    rdfs:subClassOf &lt;https://www.w3.org/2019/wot/json-schema#DataSchema&gt; .</code>
</pre>
    </p>

    <p>
        By default, if a user agent does not perform any content negotiation, a human-readable
        HTML documentation is returned instead of the RDF document. To negotiate content,
        clients must include the HTTP header <code>Accept: text/turtle</code> in their request.
    </p>
</section>

<section id="changes" class="appendix">
  <h1>Recent Specification Changes</h1>
  <section>
  <h2 id="changes-from-recommendation">Changes from Recommendation 9 April 2020</h2>
    <ul>
      <li>Section <a href="#canonicalization-serialization-json"></a> was added to define a 
          canonical serialization, useful for signing and comparison of Thing Descriptions.</li>
      <li>Section <a href="#sec-data-schema-vocabulary-definition"></a> defines a list of content types that can be used with data schema.</li>
      <li>The additional term <em>additionalResponses</em> was added to section <a href="#form"></a>.  These can be used to define error responses.</li>
      <li>Section <a href="#sec-data-schema-vocabulary-definition"></a> defines a list of content types that can be used with data schema.</li>
      <li>Additional terms <em>contentEncoding</em> and <em>contentMediaType</em> were added in section <a href="#dataschema"></a>.  There is an <a href="#example-26">Example 26</a> that shows how to use them to describe binary data embedded in text-based values.</li>
      <li>An additional term <em>multipleOf</em> was added in section <a href="#numberschema"></a>.</li>
      <li>Additional terms <em>minLength</em>, <em>maxLength</em> were added in section <a href="#stringschema"></a>.</li>
      <li>A new security scheme <a href="#combosecurityscheme"></a> was added.</li>
      <li>Section <a href="#oauth2securityscheme"></a> was updated with two additional flows <em>client</em> and <em>device</em>. The section also notes that all other flows besides the ones defined in the section should be specified using an extension.</li>
      <li>In section <a href="#x5-4-default-value-definitions"></a>, the default value definition given for <em>op</em> term in <em>EventAffordance</em>'s <em>form</em>s was changed.</li>
      <li><a href="#example-23">Example 23</a> was updated to show an example use of URI Template variables in a property definition.</li>
      <li>Section <a href="#semantic-annotations-example-geoloc"></a> was added to describe three examples that show how to embed location based data or annotate data schema elements with location based semantics.
</li>
      <li>The section describing <a href="#thing-model"></a> was moved to the main body of this document. It was previously in the appendix.</li>
    </ul>
  </section>

</section>

<section id="acknowledgements" class="appendix normative">
  <h1>Acknowledgements</h1>
  <p>The editors would like to special thank Matthias Kovatsch (co-editor of TD 1.0), Michael Koster, Michael Lagally, Kazuyuki Ashimura, Ege Korkan, Daniel Peintner, Toru Kawaguchi, María Poveda, Dave Raggett, Kunihiko Toumura, Takeshi Yamada, Ben Francis, Manu Sporny, Klaus Hartke, Addison Phillips, Jose M. Cantera, Tomoaki Mizushima, Soumya Kanti Datta and Benjamin Klotz for providing contributions, guidance and expertise.</p>
  <p>Also, many thanks to the W3C staff and all other current and former active Participants of the W3C Web of Things Interest Group (WoT IG) and Working Group (WoT WG) for their support, technical input and suggestions that led to improvements to this document.</p>
  <p>Finally, special thanks to Joerg Heuer for leading the WoT IG for 2 years from its inception and guiding the group to come up with the concept of WoT building blocks including the Thing Description.</p>
</section>

<p class="note">
    Temporary ReSpec fix regarding non-listed references: [[RFC6068]], [[RFC3966]], [[html]], [[RFC6750]],  [[RFC7519]],  [[RFC7797]],  [[RFC8392]],  [[RFC7516]], [[LDML]],  [[SEMVER]], [[RFC7617]], [[RFC7616]] 
</p>

</body>
</html>
